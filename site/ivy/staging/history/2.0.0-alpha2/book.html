<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!--
   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.    
-->
<html>
<head>
	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
	<script type="text/javascript">var xookiConfig = {level: 0};</script>	
	

	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
<title>Documentation (2.0.0-alpha2) | Apache Ivy&#153; 2.0.0-alpha2-incubating Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="style/print-style.css" />

<script language="javascript" type="text/javascript">xooki = {u: function(url) {return "xooki/"+url;}};</script>
</head>
<body>

<div id="body">

<table id="header" summary="Navigation elements." border="0"
	cellpadding="0" cellspacing="0" width="100%">
	<tr>
		<td id="home" width="30%"><a href="http://incubator.apache.org/"
			title="Home"><img src="images/apache-incubator-logo.png" alt="Apache Incubator"
			border="0" /></a></td>

		<td class="product" width="70%" align="right" valign="middle"><img
			src="images/logo.png" alt="ivy" border="0" /></td>
	</tr>
</table>

		<div id="main">
            <div id="xooki-messages" onclick="xooki.html.hide('xooki-messages')" style="zIndex:999;display:none;position:absolute;top:30px;padding:10px;border-style:solid;background:#eeeeee;"></div><div class='toc-title toc-title-1'>Documentation (2.0.0-alpha2)</div><br class="xooki-br"/>Welcome to the official Ivy documentation.<br class="xooki-br"/><br class="xooki-br"/><h1>What is Ivy?</h1>
Ivy is a tool for managing (recording, tracking, resolving and reporting) project dependencies. It is characterized by the following:<br class="xooki-br"/><ol>
<li>flexibility and configurability - Ivy is essentially process agnostic and is not tied to any methodology or structure. Instead it provides the necessary flexibility and configurability to be adapted to a broad range of dependency management and build processes.</li>

<li>tight integration with Apache Ant - while available as a standalone tool, Ivy works particularly well with Apache Ant providing a number of powerful Ant tasks ranging from dependency resolution to dependency reporting and publication.</li>
</ol>
Ivy is open source and released under a very permissive Apache License.<br class="xooki-br"/><br class="xooki-br"/>Ivy has a lot of powerful features, the most popular and useful being its flexibility, integration with ant, and its strong transitive dependencies management engine.<br class="xooki-br"/><br class="xooki-br"/>The transitive dependencies management is a feature which let you get dependencies of your dependencies, transitively. In order to address this problematic ivy needs to find metadata about your modules, usually in an <a href="ivyfile.html">ivy file</a>. To find these metadata and your dependencies artifacts (usually jars), Ivy can be configured to use a lot of different <a href="configuration/resolvers.html">repositories</a>.<br class="xooki-br"/><br class="xooki-br"/><h1>About this doc</h1>
<div class="postit" style="width: 250px;">
Tip: The menu on the left is dynamic, you  can click on the arrows to browse the menu without going to each page.
</div>
This documentation has been migrated from the old Ivy web site hosted by Jayasoft, feel free to report any problem on the mailing-lists.<br class="xooki-br"/><br class="xooki-br"/>If you browse this documentation from your installation of Ivy, you can also check the <a href="http://incubator.apache.org/ivy/">online version</a> for latest updates.<br class="xooki-br"/><br class="xooki-br"/>You can also browse this documentation offline either by downloading the documentation distribution, or by checking out the doc directory from svn. This documentation uses <a href="http://xooki.sourceforge.net/">xooki</a> as documentation engine, so you can very easily edit it and submit patches when you browse it from source.<br class="xooki-br"/><br class="xooki-br"/>Since Ivy 2.0.0-alpha-2, we keep an online history of the documentation. You can thus browse history versions online (in the history menu in the web site) and even check the trunk version documentation currently in development.<br class="xooki-br"/><br class="xooki-br"/>For earlier versions, we suggest downloading the documentation to browse the documentation corresponding to the version you use. The full history of Ivy versions with corresponding links for download is available in the history menu on the web site.<br class="xooki-br"/><br class="xooki-br"/><h1>Other places to go</h1>
Check Ivy features. <br class="xooki-br"/>Read our FAQ.<br class="xooki-br"/>Ask for help on our mailing lists.<br class="xooki-br"/>Report bug or feature request in our issue tracking system.<br class="xooki-br"/>Check external tools and resources.<br class="xooki-br"/><br class="xooki-br"/><h1>Overview</h1>
This documentation is decomposed in 3 main parts:
<ul>
  <li><a href="tutorial.html">Tutorials</a></li> 
The tutorials is the best way to begin to play with ivy. You will easily and quickly learn the basics of Ivy.<br class="xooki-br"/>  <li><a href="reference.html">Reference</a></li> 
The reference documentation gives you all the details of Ivy. <br class="xooki-br"/>The introduction part is particularly useful: it defines some vocabulary, explains main concepts such as dependency resolvers and patterns, and give an overview on how ivy works internally. <br class="xooki-br"/>It's also in the reference doc that you will find all you always dreamed to know about ivy configuration, ivy files, and ivy use (especially with ant).<br class="xooki-br"/>  <li><a href="dev.html">Developer doc</a></li> 
The developers's doc is useful for users who would like to extend Ivy or build it from source. It's also the documentation used by the Ivy team, so you will also find information about how we make releases.
</ul>
<hr/><div class='toc-title toc-title-2'>Release Notes</div><br class="xooki-br"/><h2>Disclaimer</h2>
<pre>
Apache Ivy is an effort undergoing incubation at The Apache Software<br class="xooki-br"/>Foundation (ASF). Incubation is required of all newly accepted projects<br class="xooki-br"/>until a further review indicates that the infrastructure, communications,<br class="xooki-br"/>and decision making process have stabilized in a manner consistent with<br class="xooki-br"/>other successful ASF projects. While incubation status is not necessarily<br class="xooki-br"/>a reflection of the completeness or stability of the code, it does<br class="xooki-br"/>indicate that the project has yet to be fully endorsed by the ASF.
</pre>
<h2>Announcement</h2>
<pre>
July 20 2007 - The Ivy incubator project is please to announce its<br class="xooki-br"/>2.0.0 alpha 2 release, a new step on the road toward 2.0 final.<br class="xooki-br"/><br class="xooki-br"/>Ivy is a tool for managing (recording, tracking, resolving and<br class="xooki-br"/>reporting) project dependencies, characterized by flexibility,<br class="xooki-br"/>configurability, and tight integration with Apache Ant.<br class="xooki-br"/><br class="xooki-br"/>This second release of Ivy in the Apache incubator is still an alpha<br class="xooki-br"/>version, and as such we do not guarantee any stability, especially <br class="xooki-br"/>of the API, until the final 2.0.0 version ships.  In practise, the <br class="xooki-br"/>ant tasks and core functionality do appear to be working, to the extent <br class="xooki-br"/>that the new version can be switched in over the 1.4.1 release.<br class="xooki-br"/><br class="xooki-br"/>Key features of the 2.0.0-alpha-2 release are<br class="xooki-br"/> * enhanced support for reading, Maven2 POM files<br class="xooki-br"/> * cleaner code for easier developer participation<br class="xooki-br"/> * Minor bug fixes as documented in Jira.<br class="xooki-br"/><br class="xooki-br"/>We encourage all users of Ivy to try this new version, so that any <br class="xooki-br"/>remaining compatibility issues can be reported and resolved before <br class="xooki-br"/>the product is released. <br class="xooki-br"/><br class="xooki-br"/>Issues should be reported to:<br class="xooki-br"/><a href="https://issues.apache.org/jira/browse/IVY">https://issues.apache.org/jira/browse/IVY</a><br class="xooki-br"/><br class="xooki-br"/>Download the 2.0.0 alpha 2 release files at:<br class="xooki-br"/><a href="http://incubator.apache.org/ivy/download.html">http://incubator.apache.org/ivy/download.html</a><br class="xooki-br"/><br class="xooki-br"/>More information can be found on the Ivy website:<br class="xooki-br"/><a href="http://incubator.apache.org/ivy/">http://incubator.apache.org/ivy/</a><br class="xooki-br"/><br class="xooki-br"/>Regards,<br class="xooki-br"/>Xavier Hanin (2.0.0-alpha-2 release mgr)
</pre>
<h2>Release Notes</h2>
<pre>
	               Apache Ivy v2.0.0-alpha2-incubating<br class="xooki-br"/>                               Release Notes<br class="xooki-br"/>   -----------------------------------------------------------------------<br class="xooki-br"/><br class="xooki-br"/>CONTENTS<br class="xooki-br"/>1. What is Apache Ivy?<br class="xooki-br"/>2. Status of this release<br class="xooki-br"/>3. Major Changes in this Release<br class="xooki-br"/>4. Migrating from Jayasoft Ivy to Apache Ivy<br class="xooki-br"/>5. How to Get Involved<br class="xooki-br"/>6. How to Report Issues<br class="xooki-br"/>7. Committers and Contributors for this release<br class="xooki-br"/>8. List of Changes in this Release   <br class="xooki-br"/>   <br class="xooki-br"/>   <br class="xooki-br"/>1. What is Apache Ivy?<br class="xooki-br"/><br class="xooki-br"/>Apache Ivy is a tool for managing (recording, tracking, resolving and reporting) <br class="xooki-br"/>project dependencies. <br class="xooki-br"/>It is characterized by the following:<br class="xooki-br"/><br class="xooki-br"/>   1. flexibility and configurability <br class="xooki-br"/>   		Apache Ivy is essentially process agnostic and is not tied to any <br class="xooki-br"/>   		methodology or structure. <br class="xooki-br"/>   		Instead it provides the necessary flexibility and configurability <br class="xooki-br"/>   		to be adapted to a broad range of dependency management and build <br class="xooki-br"/>   		processes.<br class="xooki-br"/>   2. tight integration with Apache Ant<br class="xooki-br"/>   		while available as a standalone tool, Apache Ivy works particularly well <br class="xooki-br"/>   		with Apache Ant providing a number of powerful Ant tasks ranging <br class="xooki-br"/>   		from dependency resolution to dependency reporting and publication.<br class="xooki-br"/><br class="xooki-br"/>2. Status of this release <br class="xooki-br"/><br class="xooki-br"/>This is the second release of Ivy in the Apache incubator, and as an<br class="xooki-br"/>alpha version we do not guarantee any stability. API and features<br class="xooki-br"/>are still likely to change until final 2.0.0 version. Still we encourage<br class="xooki-br"/>the use of this version for early testing.<br class="xooki-br"/><br class="xooki-br"/>The current production quality version is still 1.4.1, which has not been produced <br class="xooki-br"/>within the Apache Software Foundation.<br class="xooki-br"/><br class="xooki-br"/>3. Major Changes in this Release<br class="xooki-br"/><br class="xooki-br"/>This section describes what has changed between version 1.4.1 and this version of <br class="xooki-br"/>Apache Ivy.<br class="xooki-br"/><br class="xooki-br"/>This new version of Apache Ivy is fully compatible with previous versions as long as you do <br class="xooki-br"/>not use custom plugins: Ivy API has changed, but not its behavior:<br class="xooki-br"/><br class="xooki-br"/>Some tasks and configuration elements have been renamed, but the old versions<br class="xooki-br"/>are still available, they are only deprecated (you will see deprecated warnings).<br class="xooki-br"/><br class="xooki-br"/>3.1. Java Package Name Changes<br class="xooki-br"/><br class="xooki-br"/>All of the Ivy Java package names have changed in Apache Ivy. They now start <br class="xooki-br"/>with org.apache rather than fr.jayasoft. There have been other changes as well. <br class="xooki-br"/>Important refactorings have done on the source code to ease the understanding<br class="xooki-br"/>of Ivy internal architecture by new developers.<br class="xooki-br"/><br class="xooki-br"/>A class named org.apache.ivy.Ivy14 is provided with an API compatible with the<br class="xooki-br"/>fr.jayasoft.Ivy class of Ivy 1.4.1, to ease migration to this new version.<br class="xooki-br"/><br class="xooki-br"/>3.2. Configuration replaced by Settings<br class="xooki-br"/><br class="xooki-br"/>Configuration used to have two meanings in prior Ivy versions, causing some confusion<br class="xooki-br"/>with new users.<br class="xooki-br"/>To avoid this confusion, Apache Ivy calls settings instead of configuration the files<br class="xooki-br"/>used to customize Ivy. Configuration is still used for module configurations.<br class="xooki-br"/><br class="xooki-br"/>Besides the changes in the documentation, this renaming also imply a modification<br class="xooki-br"/>in settings files, which now use ivysettings as root element instead of ivyconf,<br class="xooki-br"/>and settings instead of conf element to define top level defaults (such as <br class="xooki-br"/>defaultCache, ...).<br class="xooki-br"/>Previous names have been deprecated, so previous settings files can still be used, but <br class="xooki-br"/>you will see a deprecation warning.<br class="xooki-br"/><br class="xooki-br"/>3.3. Review of settings loading<br class="xooki-br"/><br class="xooki-br"/>This new Ivy version experience with a new way of loading the settings. The configure task<br class="xooki-br"/>is deprecated, and replaced by a settings datatype. By using the settings datatype, you can<br class="xooki-br"/>easily use several settings inside one Ant build script, and use a scope to tell Ivy which<br class="xooki-br"/>settings to use when calling a task which requires some settings.<br class="xooki-br"/><br class="xooki-br"/>This is still an experiment though, so feedback is very welcome in the mailing lists.<br class="xooki-br"/><br class="xooki-br"/>3.4. Public resolver in default settings is now ibiblio in m2 compatible mode<br class="xooki-br"/><br class="xooki-br"/>In previous versions Ivy used to use the ivyrep resolver as default public resolver, <br class="xooki-br"/>but ivyrep is no longer maintained, while maven 2 repository on ibiblio is growing rapidly.<br class="xooki-br"/><br class="xooki-br"/>Since Ivy is compatible with maven 2 repository, defaulting to the ibiblio maven 2 <br class="xooki-br"/>repository makes more sense.<br class="xooki-br"/><br class="xooki-br"/>If you have any issue of backward compatibility with these new settings, you can simply <br class="xooki-br"/>set the following ant property before loading the settings (implicitly or explicitly):<br class="xooki-br"/>ivy.14.compatible=true<br class="xooki-br"/><br class="xooki-br"/>3.5. Relative paths resolution<br class="xooki-br"/><br class="xooki-br"/>Relative paths resolution in Ivy used to be resolved against the current directory. <br class="xooki-br"/>Some work is in progress in this area, currently relative path resolution for the inclusion<br class="xooki-br"/>of configuration files in Ivy files has been modified to work relative to the Ivy file in which<br class="xooki-br"/>the configurations are included.<br class="xooki-br"/><br class="xooki-br"/>This may break your dependency resolution if you used to use relative paths for configuration<br class="xooki-br"/>file inclusion.<br class="xooki-br"/><br class="xooki-br"/>4. Migrating from Jayasoft Ivy to Apache Ivy<br class="xooki-br"/><br class="xooki-br"/>Apache Ivy is fully compatible with Jayasoft Ivy as long as you do not use <br class="xooki-br"/>custom plugins.<br class="xooki-br"/>This means that you can use Apache Ivy as a drop in replacement of Jayasoft Ivy.<br class="xooki-br"/><br class="xooki-br"/>However due to the the renaming of configuration files to settings files, we<br class="xooki-br"/>strongly suggest to update your configuration files:<br class="xooki-br"/>- rename the files called ivyconf*.xml in ivysettings*.xml<br class="xooki-br"/>- rename 'ivyconf' element in 'ivysettings'<br class="xooki-br"/>- rename 'conf' element of those settings file in 'settings'<br class="xooki-br"/><br class="xooki-br"/>We also suggest using the new org.apache.ivy.ant package name for the antlib declaration.<br class="xooki-br"/><br class="xooki-br"/>Migrating custom plugins can be done by using the org.apache.ivy.Ivy14 class<br class="xooki-br"/>instead of fr.jayasoft.ivy.Ivy, and reorganizing your imports to reflect the <br class="xooki-br"/>changes in the package names.<br class="xooki-br"/><br class="xooki-br"/>5. How to Get Involved<br class="xooki-br"/><br class="xooki-br"/>The Apache Ivy project really needs and appreciates any contributions, <br class="xooki-br"/>including documentation help, source code and feedback.  If you are interested<br class="xooki-br"/>in contributing, please visit <a href="http://incubator.apache.org/ivy/get-involved.html">http://incubator.apache.org/ivy/get-involved.html</a>.<br class="xooki-br"/><br class="xooki-br"/>6. How to Report Issues<br class="xooki-br"/><br class="xooki-br"/>The Apache Ivy project uses JIRA for issue tracking.  Please report any <br class="xooki-br"/>issues you find at <a href="http://issues.apache.org/jira/browse/IVY">http://issues.apache.org/jira/browse/IVY</a><br class="xooki-br"/><br class="xooki-br"/>7. Committers and Contributors for this Release<br class="xooki-br"/><br class="xooki-br"/>Here is the list of people who have contributed source code and documentation<br class="xooki-br"/>to this release. Many thanks to all of them, and also to the whole Ivy community<br class="xooki-br"/>contributing ideas and feedback, and promoting the use of Ivy. The list would be too<br class="xooki-br"/>long, but Ivy couldn't be what it is without you!<br class="xooki-br"/><br class="xooki-br"/> Committers<br class="xooki-br"/>	Maarten Coene<br class="xooki-br"/>	Xavier Hanin<br class="xooki-br"/>	Gilles Scokart<br class="xooki-br"/><br class="xooki-br"/> Contributors<br class="xooki-br"/> 	Stephane Bailliez<br class="xooki-br"/>	Mikkel Bjerg<br class="xooki-br"/>	Jeffrey Blattman<br class="xooki-br"/>	Archie Cobbs<br class="xooki-br"/>	Scott Goldstein<br class="xooki-br"/>	Jan Materne<br class="xooki-br"/>	Tjeerd Verhagen<br class="xooki-br"/>	John Williams<br class="xooki-br"/>	Jaroslaw Wypychowski<br class="xooki-br"/><br class="xooki-br"/>8. List of Changes in this Release<br class="xooki-br"/><br class="xooki-br"/>For a full release history of Ivy see the file CHANGES.txt<br class="xooki-br"/><br class="xooki-br"/>For details about the following changes, check our JIRA install at <br class="xooki-br"/><a href="http://issues.apache.org/jira/browse/ivy">http://issues.apache.org/jira/browse/ivy</a><br class="xooki-br"/><br class="xooki-br"/>List of changes since Ivy 2.0.0-alpha-1-incubating:<br class="xooki-br"/>- NEW: Add cleancache task (<a href="http://issues.apache.org/jira/browse/IVY-565">IVY-565</a>)<br class="xooki-br"/>- NEW: A checkstyle report is generated (<a href="http://issues.apache.org/jira/browse/IVY-483">IVY-483</a>) (thanks to Jan Materne)<br class="xooki-br"/>- NEW: Hide private or specific conf when publishing (<a href="http://issues.apache.org/jira/browse/IVY-77">IVY-77</a>)<br class="xooki-br"/><br class="xooki-br"/>- IMPROVEMENT: File buffer increased to 64KB (<a href="http://issues.apache.org/jira/browse/IVY-551">IVY-551</a>)<br class="xooki-br"/>- IMPROVEMENT: Expose default cache location as an ant property (<a href="http://issues.apache.org/jira/browse/IVY-563">IVY-563</a>)<br class="xooki-br"/>- IMPROVEMENT: Expose Ivy variables as Ant Properties (<a href="http://issues.apache.org/jira/browse/IVY-564">IVY-564</a>)<br class="xooki-br"/>- IMPROVEMENT: Change default cache location (<a href="http://issues.apache.org/jira/browse/IVY-530">IVY-530</a>)<br class="xooki-br"/>- IMPROVEMENT: Upgraded VFS dependency to 1.0 and removed dependency on VFS-sandbox (<a href="http://issues.apache.org/jira/browse/IVY-498">IVY-498</a>)<br class="xooki-br"/>- IMPROVEMENT: Use maven2 repository to download dependencies<br class="xooki-br"/>- IMPROVEMENT: Allow "main" parameters to be passed directly (instead of using -args flag) (<a href="http://issues.apache.org/jira/browse/IVY-480">IVY-480</a>) (thanks to Archie Cobbs)<br class="xooki-br"/>- IMPROVEMENT: Remove @author tags (thanks to Stephane Bailliez)<br class="xooki-br"/>- IMPROVEMENT: Remove use of deprecated elements in ivysettings.xml (<a href="http://issues.apache.org/jira/browse/IVY-505">IVY-505</a>) (with contribution from Jan Materne)<br class="xooki-br"/>- IMPROVEMENT: Buildlist onlydirectdep attribute (<a href="http://issues.apache.org/jira/browse/IVY-473">IVY-473</a> and <a href="http://issues.apache.org/jira/browse/IVY-504">IVY-504</a>) (with contribution from Mikkel Bjerg)<br class="xooki-br"/>- IMPROVEMENT: Code / XML Polished (<a href="http://issues.apache.org/jira/browse/IVY-554">IVY-554</a>) (with contribution from Tjeerd Verhagen)<br class="xooki-br"/>- IMPROVEMENT: Javadoc improvements (<a href="http://issues.apache.org/jira/browse/IVY-544">IVY-544</a>) (with contribution from Tjeerd Verhagen)<br class="xooki-br"/>- IMPROVEMENT: Unit test improvements (<a href="http://issues.apache.org/jira/browse/IVY-545">IVY-545</a>) (thanks to Tjeerd Verhagen)<br class="xooki-br"/>- IMPROVEMENT: Dependent jars missing in ivy binaries (<a href="http://issues.apache.org/jira/browse/IVY-481">IVY-481</a>)<br class="xooki-br"/><br class="xooki-br"/>- FIX: Ant target "clean" on Ivy multi-project tutorial points to wrong cache directory. (<a href="http://issues.apache.org/jira/browse/IVY-548">IVY-548</a>)<br class="xooki-br"/>- FIX: Variables not replaced during deliver (<a href="http://issues.apache.org/jira/browse/IVY-520">IVY-520</a>) (thanks to John Williams)<br class="xooki-br"/>- FIX: XmlModuleDescriptorWriter does not produce matcher attribute on include and exclude rules (<a href="http://issues.apache.org/jira/browse/IVY-556">IVY-556</a>)<br class="xooki-br"/>- FIX: pom.groupId is not recognized in maven 2 pom parser (<a href="http://issues.apache.org/jira/browse/IVY-550">IVY-550</a>)<br class="xooki-br"/>- FIX: Evicted modules report depends on the order of the dependencies (<a href="http://issues.apache.org/jira/browse/IVY-526">IVY-526</a>)<br class="xooki-br"/>- FIX: Ivy does not work on Turkish machines (<a href="http://issues.apache.org/jira/browse/IVY-65">IVY-65</a>)<br class="xooki-br"/>- FIX: Ivy does not handle multiple version dependencies in maven2 poms correctly (<a href="http://issues.apache.org/jira/browse/IVY-494">IVY-494</a>)<br class="xooki-br"/>- FIX: pom parser doesn't necessarily processes all important information (<a href="http://issues.apache.org/jira/browse/IVY-524">IVY-524</a>)<br class="xooki-br"/>- FIX: <info> element of Ivy file in cache is not updated when using namespaces (<a href="http://issues.apache.org/jira/browse/IVY-516">IVY-516</a>)<br class="xooki-br"/>- FIX: Retrieve Ant task ignores resolveId attribute (<a href="http://issues.apache.org/jira/browse/IVY-522">IVY-522</a>) (thanks to Scott Goldstein)<br class="xooki-br"/>- FIX: The deprecated "keep" attribute on post resolve tasks causes an error (<a href="http://issues.apache.org/jira/browse/IVY-517">IVY-517</a>)<br class="xooki-br"/>- FIX: Some circular dependencies not retrieved (<a href="http://issues.apache.org/jira/browse/IVY-400">IVY-400</a>)<br class="xooki-br"/>- FIX: ${version} property not recognized in poms (<a href="http://issues.apache.org/jira/browse/IVY-512">IVY-512</a>)<br class="xooki-br"/>- FIX: Bug on handling dependency artifacts when a module configuration is specified (<a href="http://issues.apache.org/jira/browse/IVY-507">IVY-507</a>)<br class="xooki-br"/>- FIX: Configure fails when having httpclient in classpath without commons-logging (<a href="http://issues.apache.org/jira/browse/IVY-502">IVY-502</a>)<br class="xooki-br"/>- FIX: packaging data not parsed in maven 2 pom (<a href="http://issues.apache.org/jira/browse/IVY-500">IVY-500</a>) (thanks to Jeffrey Blattman)<br class="xooki-br"/>- FIX: install ant task: requires default resolver in ivy settings (<a href="http://issues.apache.org/jira/browse/IVY-477">IVY-477</a>)<br class="xooki-br"/>- FIX: Ant project reference lost from context on multiple ant calls in single thread (<a href="http://issues.apache.org/jira/browse/IVY-497">IVY-497</a>) (thanks to Jaroslaw Wypychowski)<br class="xooki-br"/>- FIX: EOL in the doc pages (<a href="http://issues.apache.org/jira/browse/IVY-470">IVY-470</a>)<br class="xooki-br"/>- FIX: Cache is storing ArtifactOrigin properties with no guarantee of unicity and types telescope during resolve. (<a href="http://issues.apache.org/jira/browse/IVY-430">IVY-430</a>) (thanks to Stephane Bailliez)<br class="xooki-br"/>- FIX: ivy:install ant task does not fail on error (<a href="http://issues.apache.org/jira/browse/IVY-475">IVY-475</a>) (thanks to Jeffrey Blattman)<br class="xooki-br"/>- FIX: Credentials are shown in build log even if debug is not enabled (<a href="http://issues.apache.org/jira/browse/IVY-486">IVY-486</a>)<br class="xooki-br"/>- FIX: Post-Resolve task shouldn't set the 'resolveid' (<a href="http://issues.apache.org/jira/browse/IVY-489">IVY-489</a>)<br class="xooki-br"/>- FIX: build fails without emma code coverage JARs present (<a href="http://issues.apache.org/jira/browse/IVY-478">IVY-478</a>)<br class="xooki-br"/>- FIX: buildlist broken - regression in 2.0.0-alpha1-incubating (<a href="http://issues.apache.org/jira/browse/IVY-493">IVY-493</a>)<br class="xooki-br"/>- FIX: Circular dependency startegy in buildlist (<a href="http://issues.apache.org/jira/browse/IVY-509">IVY-509</a>)<br class="xooki-br"/>- FIX: ivy should stop telling me off twice for ivyconf.xml files (<a href="http://issues.apache.org/jira/browse/IVY-513">IVY-513</a>)<br class="xooki-br"/>- FIX: Allow relative path in ivy.xml files (<a href="http://issues.apache.org/jira/browse/IVY-347">IVY-347</a>)
</pre><hr/><div class='toc-title toc-title-2'>Tutorials</div><br class="xooki-br"/>The best way to learn is to practice! That's what the ivy tutorials will help you to do, to discover some of the great ivy features.<br class="xooki-br"/><br class="xooki-br"/>Here is the very first tutorial, it doesn't even require to install Ivy, and should not take more than 30 seconds if you already have ant and a jdk properly installed:
<ul>
<li>make sure you have <a href="http://ant.apache.org/">ant</a> 1.6.2 or greater and a <a href="http://java.sun.com">jdk</a> properly installed</li>
<li>copy <a href="samples/build.xml">this build file</a> in an empty directory on your local filesystem (and make sure you name it build.xml)</li>
<li>open a console in this directory and run "ant". That's it!</li>
</ul>
If you have any trouble, check the <a href="../../faq.html">FAQ</a>, it may be related to your internet connection (proxy anyone?).<br class="xooki-br"/><br class="xooki-br"/>OK, you've seen how easy it is to make your first step with ivy? Go ahead with the other tutorials, but before make sure you have properly <a href="install.html">installed</a> ivy and downloaded the tutorials sources (included in all ivy distributions, in the <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk/src/example">src/example</a> directory).<br class="xooki-br"/><br class="xooki-br"/>The following tutorials are available:
<ul>
<li><a href="tutorial/start.html">Quick Start</a></li> 
guide you through your very first steps with ivy.
<li><a href="tutorial/ivyrep.html">Using IvyRep</a></li> 
show you the out of the box power of ivy + ivyrep.
<li><a href="tutorial/defaultconf.html">Configuring default resolver</a></li> 
give you a better understanding of the default configuration and show you how to customize it to your needs.
<li><a href="tutorial/multiple.html">Multiple Resolvers</a></li> 
teach you how to configure Ivy to find its dependencies in multiple places.
<li><a href="tutorial/dual.html">Dual Resolver</a></li> 
help you configure ivy to find ivy files in one place and artifacts in another.
<li><a href="tutorial/multi-project.html">Project Dependencies</a></li> 
makes you touch the interest of using ivy in multi project environment.
<li><a href="tutorial/conf.html">Using Ivy Configurations</a></li> 
show how to use configurations in ivy file to define set of artifacts.
<li><a href="tutorial/build-repository.html">Building a repository</a></li> 
show how to build your own enterprise repository.
</ul>
	<hr/><div class='toc-title toc-title-3'>Quick Start</div><br class="xooki-br"/>In this example, we will see one of the easiest way to use ivy. No settings or other complicated files to write, only the list of libraries the project will use. <br class="xooki-br"/><br class="xooki-br"/>If you have already followed the go-ivy tutorial on the <a href="../tutorial.html">tutorials home page</a>, this tutorial will be already familiar. It is actually pretty much the same, except that it requires ivy to be installed in your ant lib, and the java source and the ivy dependencies are available in separate files. For the java source, it's definitely recommended to put it in a separate file. For ivy dependencies, it depends on your usage and is discussed on the <a href="../bestpractices.html">best practices page</a>. <br class="xooki-br"/><br class="xooki-br"/>But enough introduction material, let's go with this simple tutorial!<br class="xooki-br"/><br class="xooki-br"/><em>You'll find this tutorial sources in the ivy distribution in the src/example/hello-ivy directory.</em><br class="xooki-br"/><br class="xooki-br"/><h1>The ivy.xml file</h1>
This file is used to describe the dependencies of the project on other libraries.<br class="xooki-br"/>Here is the sample: 
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="hello-ivy" /&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-lang" rev="2.0" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>

<h1>The build.xml file</h1>
The build file corresponding to use it, contains only:
<pre>
&lt;project xmlns:ivy="antlib:fr.jayasoft.ivy.ant" name="hello-ivy" default="run"&gt;<br class="xooki-br"/>    <br class="xooki-br"/>    ...<br class="xooki-br"/>    <br class="xooki-br"/>    &lt;!-- ================================= <br class="xooki-br"/>          target: resolve              <br class="xooki-br"/>         ================================= --&gt;<br class="xooki-br"/>    &lt;target name="resolve" description="--&gt; retrieve dependencies with ivy"&gt;<br class="xooki-br"/>        &lt;ivy:retrieve /&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/>&lt;/project&gt;
</pre>
<h1>Running the project</h1>
To run the sample, open a dos (or shell) window, and go under the hello-ivy example directory.<br class="xooki-br"/>Then, on the command prompt, just run ant :
<div class="shell"><pre>
I:\hello-ivy>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>no configuration file found, using default...<br class="xooki-br"/>:: resolving dependencies :: jayasoft/hello-ivy-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar(2.0">http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar(2.0</a>) ...<br class="xooki-br"/>..................................... (165kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-lang-2.0/commons-lang.jar[jar] (4688ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   1   |   1   |   0   |   0   ||   1   |   1   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/hello-ivy<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        1 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>    [mkdir] Created dir: I:\hello-ivy\build<br class="xooki-br"/>    [javac] Compiling 1 source file to I:\hello-ivy\build<br class="xooki-br"/>     [java] standard message : hello ivy !<br class="xooki-br"/>     [java] capitalized by org.apache.commons.lang.WordUtils : Hello Ivy !<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 8 seconds</pre></div>
<h1>What happened ?</h1>
Without any settings, other than it's default settings, ivy retrieve files from the maven ibiblio libraries repository. That's what happened here. <br class="xooki-br"/>The resolve task has downloaded the commons-lang.jar file from ibiblio, then copied it to the ivy cache and then dispatch it in the default library directory of the project : the lib dir.<br class="xooki-br"/>Some will say that the task was long to achieve. Yeah, it's true it was, but it has downloaded from the web the needed file. Let's try to run it again:
<div class="shell"><pre>I:\hello-ivy>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: resolving dependencies :: jayasoft/hello-ivy-null :: [default]<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        [default] jayasoft/hello-ivy-working@rahan: 1 artifacts (0 downloaded)<br class="xooki-br"/>:: retrieving :: jayasoft/hello-ivy :: [default]<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>     [java] standard message : hello ivy !<br class="xooki-br"/>     [java] capitalized by org.apache.commons.lang.WordUtils : Hello Ivy !<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 1 second</pre></div>
Great ! the cache was used, no download was needed and the build was instantaneous.<br class="xooki-br"/><br class="xooki-br"/>If you want to check the content of the cache, by default it is put in your user home in a .ivy/cache directory.<br class="xooki-br"/><br class="xooki-br"/>And now, if you want to generate a report detailing all the dependencies of your module, you can call the report target, and check the generated file in the build directory. You should obtain something looking like <a href="../samples/jayasoft-ivyrep-example-default.html">this</a>.<br class="xooki-br"/><br class="xooki-br"/>You are now ready to go to the next tutorials to go one step beyond using ivy transitive dependencies management.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Using IvyRep</div><br class="xooki-br"/>In this example, we will see the easiest way to use ivy and benefit from its transitive dependencies feature. <br class="xooki-br"/>No settings or other complicated files to write, only the list of libraries the project will use.<br class="xooki-br"/><br class="xooki-br"/><h1>The ivy.xml file</h1>
This file is used to describe, the dependencies of the project on other libraries.<br class="xooki-br"/>Here is the sample : 
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="hello-ivy" /&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-lang" rev="2.0" /&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-cli" rev="1.0" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>
The build file corresponding to use it, contains only :
<pre>
&lt;project xmlns:ivy="antlib:fr.jayasoft.ivy.ant" name="hello-ivy" default="run"&gt;<br class="xooki-br"/>    <br class="xooki-br"/>    ...<br class="xooki-br"/>    <br class="xooki-br"/>    &lt;!-- ================================= <br class="xooki-br"/>          target: resolve              <br class="xooki-br"/>         ================================= --&gt;<br class="xooki-br"/>    &lt;target name="resolve" description="--&gt; retreive dependencies with ivy"&gt;<br class="xooki-br"/>        &lt;ivy:retrieve /&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/>&lt;/project&gt;
</pre>
<h1>Running the project</h1>
To run the sample, open a shell window, and go under the ivyrep example directory.<br class="xooki-br"/>Then, on the command prompt, just run ant :
<div class="shell"><pre>
I:\ivyrep>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>no configuration file found, using default...<br class="xooki-br"/>:: resolving dependencies :: jayasoft/ivyrep-example-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-cli/jars/commons-cli-1.0.jar">http://www.ibiblio.org/maven/commons-cli/jars/commons-cli-1.0.jar</a> (1.0) ...<br class="xooki-br"/>...... (31kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-cli-1.0/commons-cli.jar[jar] (1437ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar">http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar</a> (2.0) ...<br class="xooki-br"/>..................................... (165kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-lang-2.0/commons-lang.jar[jar] (5640ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.jar">http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.jar</a> (1.0) ...<br class="xooki-br"/>..... (21kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-logging-1.0/commons-logging.jar[jar] (1250ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        :: evicted modules:<br class="xooki-br"/>        apache/commons-lang-1.0 by [apache/commons-lang-2.0] in [default]<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   4   |   3   |   2   |   1   ||   3   |   3   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/ivyrep-example<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        3 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>    [mkdir] Created dir: I:\ivyrep\build<br class="xooki-br"/>    [javac] Compiling 1 source file to I:\ivyrep\build<br class="xooki-br"/>     [java] standard message : hello ivy !<br class="xooki-br"/>     [java] capitalized by org.apache.commons.lang.WordUtils : Hello Ivy !<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 16 seconds</pre></div>
<h1>What happened ?</h1>
Without any settings, other than it's default settings, ivy uses the ivyrep resolver. This resolver looks for ivy files on <a href="http://ivyrep.jayasoft.org/">ivyrep</a>, and for artifacts on ibiblio. That's what happened here. <br class="xooki-br"/><br class="xooki-br"/>The resolve task has found an <a href="http://ivyrep.jayasoft.org/apache/commons-cli/ivy-1.0.xml">ivy file on ivyrep for commons-cli 1.0</a>.<br class="xooki-br"/>This ivy file indicates that commons-cli 1.0 depends on commons-lang 1.0 and commons-logging 1.0.<br class="xooki-br"/><br class="xooki-br"/>The resolve task detects the conflict between the revision 2.0 of commons-lang that is asked in the ivy above, and the revision 1.0 required in commons-cli. With no particular conflict manager, the 2.0 is selected, and the 1.0 is evicted. The 1.0 being evicted, it is not downloaded at all.<br class="xooki-br"/><br class="xooki-br"/>The resolve task has then downloaded the commons-cli 1.0, commons-logging 1.0 and commons-lang.jar 2.0 files from ibiblioand put them to the ivy cache. <br class="xooki-br"/>Then the retrieve task has copied them in the default library directory of the project: the lib dir.<br class="xooki-br"/>Some will say that the task was long to achieve. Yes, it's true it was, but it has downloaded from the internet the needed files. Let's try to run it again:
<div class="shell"><pre>
I:\ivyrep>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>no configuration file found, using default...<br class="xooki-br"/>:: resolving dependencies :: jayasoft/ivyrep-example-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        :: evicted modules:<br class="xooki-br"/>        apache/commons-lang-1.0 by [apache/commons-lang-2.0] in [default]<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   4   |   0   |   0   |   1   ||   3   |   0   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/ivyrep-example<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        0 artifacts copied, 3 already retrieved<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>     [java] standard message : hello ivy !<br class="xooki-br"/>     [java] capitalized by org.apache.commons.lang.WordUtils : Hello Ivy !<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 2 seconds</pre></div>
Great ! the cache was used, no download was needed and the build was almost instantaneous.<br class="xooki-br"/><br class="xooki-br"/>If you want to check the content of the cache, by default it is put in your user home in a .ivy/cache directory. Check the next tutorials to see how to configure this.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Adjusting default settings</div><br class="xooki-br"/>Until Ivy 1.2a, the default resolver was a simple ivyrep resolver, with only a small number of possibilities of configuration. Whenever you wanted to do something slightly more complicated than looking for ivy files on ivyrep and artifacts on ibiblio, you had to write your own ivysettings file (see other tutorials and <a href="../configuration.html">settings</a> reference for details about this).<br class="xooki-br"/><br class="xooki-br"/>Ivy 1.3 introduced new default settings a lot more flexible.<br class="xooki-br"/><br class="xooki-br"/><h1>Concept</h1>
This default settings mainly consist of 3 kind of repositories:
<ul>
<li>local</li> a repository which is private to the user. 
<li>shared</li> a repository which is shared between all the member of a team
<li>public</li> a public repository on which most modules can be found
</ul>

Note that if you work alone, the distinction between local and shared repository is not very important, but there are some things to know to distinguish them.<br class="xooki-br"/><br class="xooki-br"/>Now let's describe each of these repositories concept in more details. We will describe how they are setup physically later.<br class="xooki-br"/><h2>Local</h2>
The local repository is particularly useful when you want to do something without being disturb by anything else happening in the environment. This means that whenever ivy is able to locate a module in this repository it will be used, no matter of what is available in others.<br class="xooki-br"/><br class="xooki-br"/>For instance, if you have a module declaring a dependency on the module foo in revision latest.integration, then if a revision of foo is found in the local repository, it will be used, <em>even if a more recent revision is available in other repositories</em>. <br class="xooki-br"/><br class="xooki-br"/>This may be disturbing for some of you, but imagine you have to implement a new feature on a project, and in order to achieve that you need to modify two modules: you add a new method in module foo and exploit this new method in module bar. Then if you publish the module foo to your local repository, you will be sure to get it in your bar module, even if someone else publish a new revision of foo in the shared repository (this revision not having the new method you are currently adding). <br class="xooki-br"/><br class="xooki-br"/>But be careful, when you have finished your development and publish it on the shared you will have to clean your local repository to benefit from new versions published in the shared repository.<br class="xooki-br"/><br class="xooki-br"/>Note also that modules found in the local repository must be complete, i.e. they must provide both a module descriptor and the published artifacts. <br class="xooki-br"/><h2>Shared</h2>
As its name suggest, the shared repository is aimed to be shared among a whole development team. It is a place where you can publish your team private modules for instance, and it's also a place where you can put modules not available in the public repository (sun jars, for instance), or simply not accurate (bad or incomplete module descriptors for instance).<br class="xooki-br"/><br class="xooki-br"/>Note that modules can be split across the shared repository and the public one: you can have the module descritor in the shared repository and the artifacts in the public one, for instance.<br class="xooki-br"/><h2>Public</h2>
The public repository is the place where most modules can be found, but which sometimes lack the information you need. It's usually a repository available through an internet connection only, even if this is not mandatory.<br class="xooki-br"/><h1>Setting up the repositories</h1>
Now that we have seen the objective of each of the three repositories, let's see how they are setup and how to configure them to fit your needs.<br class="xooki-br"/><br class="xooki-br"/>First, several repositories uses the same root in your filesystem. Referenced as ${ivy.default.ivy.user.dir}, this is by default the directory .ivy2 in your user home.<br class="xooki-br"/><br class="xooki-br"/>Note that several things can be done by setting ivy variable. To set them without defining your own ivysettings.xml file, you can:<ul>
<li>set an ant property before any call to ivy in your build file if you use ivy from ant</li>
<li>set an environment variable if you use ivy from the command line</li>
</ul>
For instance:
<pre>
&lt;target name="resolve"&gt;<br class="xooki-br"/>  &lt;property name="ivy.default.ivy.user.dir" value="/path/to/ivy/user/dir"/&gt;<br class="xooki-br"/>  &lt;ivy:resolve /&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>

Now we will show how to override default values for the different kind of repositories, note that you can find what are these default values below in the detail of the default settings.<br class="xooki-br"/><h2>Local</h2>
By default, the local repository lies in ${ivy.default.ivy.user.dir}/local. This is usually a good place, but you may want to modify it however. No problem, you just have to set the following ivy variable to the directory you want to use: <pre>ivy.local.default.root</pre>. For instance:
<pre>ivy.local.default.root=/opt/ivy/repository/local</pre>.<br class="xooki-br"/><br class="xooki-br"/>If you already have something you would like to use as your local repository, you may also want to modify the layout of this repository. Once again, two variables are available for that:
<pre>ivy.local.default.ivy.pattern</pre> gives the pattern to find ivy files
<pre>ivy.local.default.artifact.pattern</pre> gives the pattern to find artifacts<br class="xooki-br"/>For example:
<pre>
ivy.local.default.root=/opt/ivy/repository/local<br class="xooki-br"/>ivy.local.default.ivy.pattern=[module]/[revision]/ivy.xml<br class="xooki-br"/>ivy.local.default.artifact.pattern=[module]/[revision]/[artifact].[ext]
</pre>
<h2>Shared</h2>
By default, the shared repository lies in ${ivy.default.ivy.user.dir}/shared. This is fine if you work alone, but the shared repository is supposed to be, mmm, shared! So changing this directory is often required, and it is usually modified to point to a shared directory. You can use <pre>ivy.shared.default.root</pre> variable to specify in a new directory. Moreover, you can also configure the layout with variables similar to the one for the local repository:
<pre>ivy.shared.default.ivy.pattern</pre> gives the pattern to find ivy files
<pre>ivy.shared.default.artifact.pattern</pre> gives the pattern to find artifacts<br class="xooki-br"/>For example:
<pre>
ivy.shared.default.root=/opt/ivy/repository/shared<br class="xooki-br"/>ivy.shared.default.ivy.pattern=[organisation]/[module]/[revision]/ivy.xml<br class="xooki-br"/>ivy.shared.default.artifact.pattern=[organisation]/[module]/[revision]/[artifact].[ext]
</pre>

<h2>Public</h2>
By default, the public repository is ibiblio in m2 compatible mode. <br class="xooki-br"/><br class="xooki-br"/><em>In 1.4 version Ivy was using ivyrep has default resolver, if you want to restore this, set<br class="xooki-br"/>ivy.14.compatible=true as an ant property</em><br class="xooki-br"/><br class="xooki-br"/><h1>Going further</h1>
OK, so we have seen how to easily change the settings of the three main repositories. But what if I want my shared repository is on a web server ? What if the public repository is not compatible with ivyrep ? What if ... <br class="xooki-br"/><br class="xooki-br"/>Everything can be changed in the default settings, for sure, you can even do your own settings. But you can also benefit from a part of the default settings without writing a complete one.<br class="xooki-br"/><br class="xooki-br"/>But before explaining how, you will need to have a quick overview of how ivy is configured by default.<br class="xooki-br"/><br class="xooki-br"/>By default, ivy is configured using an ivysettings.xml which is packaged in the ivy jar. Here is this settings file:
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;settings defaultResolver="default"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.conf.dir}/ivysettings-public.xml"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.conf.dir}/ivysettings-shared.xml"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.conf.dir}/ivysettings-local.xml"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.conf.dir}/ivysettings-main-chain.xml"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.conf.dir}/ivysettings-default-chain.xml"/&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
OK, so not much info here, except a lot of inclusions. These inclusions have been done on purpose so that you can easily change only one part of the ivysettings and benefit of the rest easily. For example, if you want to define your own public resolver, you will just have to configure ivy with an ivysettings like that:
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;settings defaultResolver="default"/&gt;<br class="xooki-br"/>  &lt;include url="<a href="http://myserver/ivy/myivysettings-public.xml">http://myserver/ivy/myivysettings-public.xml</a>"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.settings.dir}/ivysettings-shared.xml"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.settings.dir}/ivysettings-local.xml"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.settings.dir}/ivysettings-main-chain.xml"/&gt;<br class="xooki-br"/>  &lt;include url="${ivy.default.settings.dir}/ivysettings-default-chain.xml"/&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
Note that only the ivysettings-public inclusion has changed to include a home made public resolver. Note also that this can be used like that thanks to the fact that ${ivy.default.settings.dir} is a variable which is always set to the place where ivy default settings files are (i.e. packaged in the jar).<br class="xooki-br"/>To finish this example, you for sure have to write your own ivysettings file for defining your own public resolver. For instance:
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;filesystem name="public"&gt;<br class="xooki-br"/>      &lt;ivy pattern="/path/to/my/public/rep/[organisation]/[module]/ivy-[revision].xml" /&gt;<br class="xooki-br"/>      &lt;artifact pattern="/path/to/my/public/rep/[organisation]/[module]/[artifact]-[revision].[ext]" /&gt;<br class="xooki-br"/>    &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
No the last thing you will need in order to properly take advantage of the default settings is the content of each included ivysettings file:<br class="xooki-br"/><strong>ivysettings-public.xml</strong>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;ibiblio name="public" m2compatible="true"/&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
<strong>ivysettings-shared.xml</strong>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;property name="ivy.shared.default.root"             value="${ivy.default.ivy.user.dir}/shared" override="false"/&gt;<br class="xooki-br"/>  &lt;property name="ivy.shared.default.ivy.pattern"      value="[organisation]/[module]/[revision]/[type]s/[artifact].[ext]" override="false"/&gt;<br class="xooki-br"/>  &lt;property name="ivy.shared.default.artifact.pattern" value="[organisation]/[module]/[revision]/[type]s/[artifact].[ext]" override="false"/&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;filesystem name="shared"&gt;<br class="xooki-br"/>      &lt;ivy pattern="${ivy.shared.default.root}/${ivy.shared.default.ivy.pattern}" /&gt;<br class="xooki-br"/>      &lt;artifact pattern="${ivy.shared.default.root}/${ivy.shared.default.artifact.pattern}" /&gt;<br class="xooki-br"/>    &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
<strong>ivysettings-local.xml</strong>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;property name="ivy.local.default.root"             value="${ivy.default.ivy.user.dir}/local" override="false"/&gt;<br class="xooki-br"/>  &lt;property name="ivy.local.default.ivy.pattern"      value="[organisation]/[module]/[revision]/[type]s/[artifact].[ext]" override="false"/&gt;<br class="xooki-br"/>  &lt;property name="ivy.local.default.artifact.pattern" value="[organisation]/[module]/[revision]/[type]s/[artifact].[ext]" override="false"/&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;filesystem name="local"&gt;<br class="xooki-br"/>      &lt;ivy pattern="${ivy.local.default.root}/${ivy.local.default.ivy.pattern}" /&gt;<br class="xooki-br"/>      &lt;artifact pattern="${ivy.local.default.root}/${ivy.local.default.artifact.pattern}" /&gt;<br class="xooki-br"/>    &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
<strong>ivysettings-main-chain.xml</strong>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;chain name="main" dual="true"&gt;<br class="xooki-br"/>      &lt;resolver ref="shared"/&gt;<br class="xooki-br"/>      &lt;resolver ref="public"/&gt;<br class="xooki-br"/>    &lt;/chain&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
<strong>ivysettings-default-chain.xml</strong>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;chain name="default" returnFirst="true"&gt;<br class="xooki-br"/>      &lt;resolver ref="local"/&gt;<br class="xooki-br"/>      &lt;resolver ref="main"/&gt;<br class="xooki-br"/>    &lt;/chain&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>

Here you are, you have enough clues to configure that the way you want... check the <a href="../configuration.html">settings documentation</a> to see if what you want to do is possible, and go ahead !<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Multiple Resolvers</div><br class="xooki-br"/>This example is an illustration of how artifacts can be retrieved by multiple resolvers. Using multiple resolvers is very important when using continous integration. Indeed, in such environments, you can use multiple repositories and so multiple resolvers to retrieve both released versions of projects than continous integrated versions produced for example with cruise-control. In our example, we will just show how to use two resolvers, one on a local repository and one using ibiblio repository.<br class="xooki-br"/><br class="xooki-br"/><h1>project description</h1>
<h2>the project : chained-resolvers</h2>
The project is very simple and contains only one test class : example.Hello<br class="xooki-br"/>It depends on two libraries apache commons-lang and a little test library (sources are included in jar file). The test library is used by the project to uppercase a string, and commons-lang is used to capitalize the same string.<br class="xooki-br"/><br class="xooki-br"/>Here is the content of the project:
<ul>
  <li>build.xml : the ant build file for the project</li>
  <li>ivy.xml : the ivy project file</li>
  <li>src\example\Hello.java : the only class of the project</li>
</ul>
Take a look at it's <b>ivy.xml</b> file :
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="chained-resolvers" /&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-lang" rev="2.0" /&gt;<br class="xooki-br"/>        &lt;dependency name="test" rev="1.0" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>
As we expect, the ivy file declares to be dependent on the two libraries that the project use : apache commons-lang.jar and test.jar.<br class="xooki-br"/><br class="xooki-br"/><h2>the <b>ivy</b> settings</h2>
The ivy settings is made in the config directory it contains only one file: ivysettings.xml.<br class="xooki-br"/><br class="xooki-br"/>Let's analyse it.
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;settings defaultResolver="chain-example" /&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;chain name="chain-example"&gt;<br class="xooki-br"/>      &lt;filesystem name="libraries"&gt;<br class="xooki-br"/>        &lt;artifact pattern="${ivy.settings.dir}/repository/[artifact]-[revision].[type]" /&gt;<br class="xooki-br"/>      &lt;/filesystem&gt;<br class="xooki-br"/>      &lt;ibiblio name="ibiblio" /&gt;<br class="xooki-br"/>    &lt;/chain&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
<h2>the <b>settings</b> tag</h2>
This tag initializes ivy with some parameters. Here only one is used, the name of the resolver to use by default.<br class="xooki-br"/><br class="xooki-br"/><h2>the <b>resolvers</b> tag</h2>
Under this tag, we can find the description of the resolvers that ivy will use. In our example, we have only one resolver, called "chain-example", which is quite special as it defines a list (a chain) of resolvers.<br class="xooki-br"/>The resolvers put in the chain are : 
<ul>
  <li>libraries : it is a file resolver. This one is configured to look for artifacts in the "repository" sub directory of the directory that contains the ivysettings.xml file.</li>
  <li>ibiblio : this resolver is a special one. It looks in the ibiblio maven repository to retrieve the libraries.</li>
</ul>

<h1>walkthrough</h1>
<div class="step">
<h2>step 1 : preparation</h2>
Open a DOS or shell window, and go to the "chained-resolvers" directory.
</div>
<div class="step">
<h2>step 2 : clean directory tree</h2>
On the prompt type : ant<br>
This will clean up the entire project directory tree and ivy cache. You can do it each time you want to clean up this example.
</div>
<div class="step">
<h2>step 3 : run the project</h2>
Goto chainedresolvers-project directory. And simply run <b>ant</b>.
<div class="shell"><pre>I:\chained-resolvers\chainedresolvers-project>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>configure:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: resolving dependencies :: jayasoft/chained-resolvers-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar(2.0">http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar(2.0</a>) ...<br class="xooki-br"/>.................................... (165kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-lang-2.0/commons-lang.jar[jar] (5390ms)<br class="xooki-br"/>downloading <a href="file:/I:/chained-resolvers/config/repository/test-1.0.jar(1.0">file:/I:/chained-resolvers/config/repository/test-1.0.jar(1.0</a>) ...<br class="xooki-br"/>. (1kB)<br class="xooki-br"/>        [SUCCESSFUL ] jayasoft/test-1.0/test.jar[jar] (16ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   2   |   2   |   0   |   0   ||   2   |   2   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/chained-resolvers<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        2 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>    [mkdir] Created dir: I:\chained-resolvers\chainedresolvers-project\build<br class="xooki-br"/>    [javac] Compiling 1 source file to I:\chained-resolvers\chainedresolvers-project\build<br class="xooki-br"/>     [java] standard message :example world !<br class="xooki-br"/>     [java] capitalized by org.apache.commons.lang.WordUtils : Example World !<br class="xooki-br"/>     [java] upperCased by test.StringUtils : EXAMPLE WORLD !<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 9 seconds</pre></div></div>
We can see in the log of the resolve task, that the two dependencies have been retrieved (2 artifacts) and copied to the ivy cache directory (2 downloaded). The run target succeed in using both commons-lang.jar comming from ibiblio repository and test.jar coming from the local repository.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Dual Resolver</div><br class="xooki-br"/>This tutorial presents the use of the DualResolver, a feature introduced in the version 0.6 of Ivy.<br class="xooki-br"/><br class="xooki-br"/>Dual Resolver is used when ivy files can be found in a repository while artifacts are in another. It is especially useful to use full power of ivy (including transitive dependencies) with the ibiblio repository for artifacts. The problem with the maven ibiblio repository is that it does not contain ivy files. Since transitive dependencies are based upon ivy files, using the ibiblio resolver does not permit to use transitive dependencies.<br class="xooki-br"/><br class="xooki-br"/>The solution to this problem is to store your own repository only for ivy files, and use ibiblio for artifacts. That's what is done in this tutorial.<br class="xooki-br"/><br class="xooki-br"/><h1>project description</h1>
Let's have a look at the src/example/dual directory in your ivy distribution.<br class="xooki-br"/>It contains a build file and 3 directories:
<ul>
<li>config: contains the ivy settings file</li>
<li>repository: a sample repository of ivy files</li>
<li>project: the project making use of ivy with dual resolver</li>
</ul>

<h2>the dual project</h2>
The project is very simple and contains only one test class : example.Hello<br class="xooki-br"/>It depends on two libraries: apache commons-lang and apache commons-httpclient.<br class="xooki-br"/><br class="xooki-br"/>Here is the content of the project :
<ul>
  <li>build.xml : the ant build file for the project</li>
  <li>ivy.xml : the ivy project file</li>
  <li>src\example\Hello.java : the only class of the project</li>
</ul>
Take a look at it's <b>ivy.xml</b> file:
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="hello-ivy" /&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-httpclient" rev="2.0.2" /&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-lang" rev="2.0" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>

As you can see, nothing special here... Indeed, it's the philosophy of ivy to keep ivy files independent of the way dependencies are retrieved.<br class="xooki-br"/><br class="xooki-br"/><h2>the <b>ivy</b> settings</h2>
The ivy settings is made in the config directory it contains only one file: ivysettings.xml.<br class="xooki-br"/><br class="xooki-br"/>Let's analyse it.
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;settings defaultResolver="dual-example" /&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;dual name="dual-example"&gt;<br class="xooki-br"/>      &lt;filesystem name="ivys"&gt;<br class="xooki-br"/>        &lt;ivy pattern="${ivy.settings.dir}/../repository/[module]-ivy-[revision].xml" /&gt;<br class="xooki-br"/>      &lt;/filesystem&gt;<br class="xooki-br"/>      &lt;ibiblio name="ibiblio" /&gt;<br class="xooki-br"/>    &lt;/dual&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>

Here we configure one resolver, the default one, which is a dual resolver. This dual resolver has two sub resolvers: the first is what is called the "ivy" resolver of the dual resolver, and the second one is what is called the "artifact" resolver. It is important that the dual resolver exactly has two sub resolvers in this given order.<br class="xooki-br"/>The ivy resolver, here a filesystem one, is used only to find ivy files. The settings given in this resolver says that all ivy files are in the same directory, named like that: [module]-ivy-[revision].xml. If we check the repository directory, we can confirm that it contains a file named commons-httpclient-ivy-2.0.2.xml. It fulfills the given pattern and will thus be find by this resolver.<br class="xooki-br"/>The artifact resolver is simply an ibiblio one, and will thus try to find required artifacts in the maven ibiblio repository.<br class="xooki-br"/><br class="xooki-br"/><h1>walkthrough</h1>
<div class="step">
<h2>step 1 : preparation</h2>
Open a DOS or shell window, and go to the "dual" directory.
</div>
<div class="step">
<h2>step 2 : clean up</h2>
On the prompt type : ant<br>
This will clean up the entire project directory tree (compiled classes and retrieved libs) and ivy cache. <br class="xooki-br"/>You can do it each time you want to clean up this example.
</div>
<div class="step">
<h2>step 3 : run the project</h2>
Goto project directory. And simply run <b>ant</b>.
<div class="shell"><pre>
I:\dual\project>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>configure:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: resolving dependencies :: jayasoft/hello-ivy-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar">http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar</a> (2.0) ...<br class="xooki-br"/>.....<br class="xooki-br"/>.........<br class="xooki-br"/>..........<br class="xooki-br"/>...........<br class="xooki-br"/>. (165kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-lang-2.0/commons-lang.jar[jar] (8032ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-httpclient/jars/commons-httpclient-2.0.2.jar">http://www.ibiblio.org/maven/commons-httpclient/jars/commons-httpclient-2.0.2.jar</a> (2.0.2) ...<br class="xooki-br"/>...........<br class="xooki-br"/>......<br class="xooki-br"/>....<br class="xooki-br"/>..........<br class="xooki-br"/>............<br class="xooki-br"/>........ (220kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-httpclient-2.0.2/commons-httpclient.jar[jar] (10031ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.4.jar">http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.4.jar</a> (1.0.4) ...<br class="xooki-br"/>......... (37kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-logging-1.0.4/commons-logging.jar[jar] (1469ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   3   |   3   |   1   |   0   ||   3   |   3   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/hello-ivy<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        3 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>    [mkdir] Created dir: I:\dual\project\build<br class="xooki-br"/>    [javac] Compiling 1 source file to I:\dual\project\build<br class="xooki-br"/>     [java] standard message : hello ivy !<br class="xooki-br"/>     [java] capitalized by org.apache.commons.lang.WordUtils : Hello Ivy !<br class="xooki-br"/>     [java] head status code with httpclient: 200<br class="xooki-br"/>     [java] now check if httpclient dependency on commons-logging has been realized<br class="xooki-br"/>     [java] found logging class in classpath: interface org.apache.commons.logging.Log<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 24 seconds
</pre></div></div>
<br/>
As you can see, ivy not only downloaded commons-lang and commons-httpclient, but also commons-logging. Indeed, commons-logging is a dependency of httpclient, as we can see in the httpclient ivy file found in the repository directory:
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info organisation="apache" module="commons-httpclient" revision="2.0.2" status="release" publication="20041010174300" /&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency name="commons-logging" rev="1.0.4" conf="default" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>
<br/>
So everything worked well, ivy file has been found in the repository directory and artifacts have been downloaded from ibiblio. You now just have to write ivy files for the module you often use, and they will be much easier to use... And imagine a world in which each module delivers also an ivy file. Since it is independent of the way to retrieve dependencies, it would made all dependencies handling much easier, wouldn't it?<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Project dependencies</div><br class="xooki-br"/>This example is an illustration of dependency between two project.<br class="xooki-br"/><br class="xooki-br"/>The dependant project declares that it uses the standalone one. We will illustrate two things : 
<ul>
  <li>public libraries declared by standalone project will automatically be recovered by the dependant project</li>
  <li>the dependant project will retrieve the "latest" version of the standalone project</li>
</ul>
<h1>the projects used</h1>
<h2>the project : standalone</h2>
The standalone project is very simple. It depends on the apache library commons-lang and contains only one class: standalone.Main which provides two services:
<ul>
  <li>return the version of the project</li>
  <li>capitalize a string using org.apache.commons.lang.WordUtils.capitalizeFully</li>
</ul>
Here is the content of the project:
<ul>
  <li>build.xml : the ant build file for the project</li>
  <li>ivy.xml : the ivy project file</li>
  <li>src\standalone\Main.java : the only class of the project</li>
</ul>
Take a look at it's <b>ivy.xml</b> file:
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="standalone" /&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-lang" rev="2.0" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>

The ivy dependency file declares only one dependency on apache commons-lang library which by default is a public dependency (see <a href="../ivyfile.html">ivy file definition</a>).<br class="xooki-br"/><h2>the project : depending</h2>
The project depending is very simple too. It declares only one dependency on the latest version of the standalone project and it contains only one class depending.Main which make 2 things:
<ul>
  <li>getting the version of the standalone project throw a call to standalone.Main.getVersion()</li>
  <li>transform a string throw a call to standalone.Main.capitalizeWords(str)</li>
</ul>
Take a look at it's <b>ivy.xml</b> file:
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="depending" /&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency name="standalone" rev="latest.integration" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>

<h2>the <b>ivy</b> settings</h2>
The ivy settings is made in the config directory wich contains 2 files :
<ul>
  <li>ivysettings.properties : a property file</li>
  <li>ivysettings.xml : the file containing the ivy settings</li>
</ul>

Let's analyse the ivysettings.xml file.
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>        &lt;properties file="${ivy.settings.dir}/ivysettings.properties" /&gt;<br class="xooki-br"/>        &lt;settings defaultCache="${ivy.settings.dir}/ivy-cache" defaultResolver="libraries" /&gt;<br class="xooki-br"/>        &lt;resolvers&gt;<br class="xooki-br"/>                &lt;filesystem name="projects"&gt;<br class="xooki-br"/>                        &lt;artifact pattern="${repository.dir}/[artifact]-[revision].[ext]" /&gt;<br class="xooki-br"/>                        &lt;ivy pattern="${repository.dir}/[module]-[revision].xml" /&gt;<br class="xooki-br"/>                &lt;/filesystem&gt;<br class="xooki-br"/>                &lt;ivyrep name="libraries" /&gt;<br class="xooki-br"/>        &lt;/resolvers&gt;<br class="xooki-br"/>        &lt;modules&gt;<br class="xooki-br"/>                &lt;module organisation="jayasoft" name=".*" resolver="projects" /&gt;<br class="xooki-br"/>        &lt;/modules&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
The file contains four main tags: properties, settings, resolvers and modules.<br class="xooki-br"/><h2>the <b>properties</b> tag</h2>
This tag only load some properties for the ivy process in the same manner as ant will do it.<br class="xooki-br"/><h2>the <b>settings</b> tag</h2>
This tag is in charge to initialize some parameters for ivy process. The directory that ivy will use to cache (to store) artifacts found will be in a sub directory called ivy-cache of the directory containing the ivysettings.xml file itself. <br class="xooki-br"/>The second parameter, tells ivy to use a resolver called "libraries" as its default resolver. As a recall, a resolver is in charge to resolve an artifact from some information like: the organisation that provides the artifact, the name of the library and the version of the library. More information can be found in the <a href="../configuration.html">settings documentation</a>.<br class="xooki-br"/><h2>the <b>resolvers</b> tag</h2>
This tag defines the resolvers to use. Here we have two resolvers defined: "projects" and "libraries".<br class="xooki-br"/>The filesystem resolver called "projects" is able to resolve the internal dependencies wanted. <br class="xooki-br"/>The ivyrep resolver called "libraries" is able to find dependencies on <a href="http://ivyrep.jayasoft.org/">ivyrep</a>.<br class="xooki-br"/><h2>the <b>modules</b> tag</h2>
The modules tag allows to configure which resolver should be use for which module. Here the settings only tells to use the "projects" resolver for all modules having for organisation "jayasoft" and any module name (.* regexp matches any module name).<br class="xooki-br"/>For other modules (i.e. all modules not from jayasoft), since there is no special settings, the default resolver will be used: "libraries".<br class="xooki-br"/><h1>walkthrough</h1>
<div class="step">
<h2>step 1: preparation</h2>
Open a DOS or shell window, and go to the "dependance" directory.
</div>
<div class="step">
<h2>step 2: clean directory tree</h2>
On the prompt type : ant<br class="xooki-br"/>This will clean up the entire project directory tree. You can do it each time you want to clean up this example.
</div>
<div class="step">
<h2>step 3: publication of standalone project</h2>
Goto standalone directory  and publish the project
<div class="shell"><pre>I:\standalone>ant publish<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>configure:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: resolving dependencies :: jayasoft/standalone-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar">http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-2.0.jar</a> (2.0) ...<br class="xooki-br"/>.................................... (165kB)<br class="xooki-br"/>        [SUCCESSFUL ] apache/commons-lang-2.0/commons-lang.jar[jar] (6672ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   1   |   1   |   0   |   0   ||   1   |   1   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/standalone<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        1 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>compile:<br class="xooki-br"/>    [mkdir] Created dir: I:\standalone\build\classes<br class="xooki-br"/>    [javac] Compiling 1 source file to I:\standalone\build\classes<br class="xooki-br"/><br class="xooki-br"/>jar:<br class="xooki-br"/>[propertyfile] Creating new property file: I:\standalone\build\classes\version.properties<br class="xooki-br"/>      [jar] Building jar: I:\standalone\build\standalone.jar<br class="xooki-br"/><br class="xooki-br"/>publish:<br class="xooki-br"/>:: delivering :: jayasoft/standalone-working@xmen :: 1 :: release :: Wed Apr 27 08:41:47 CEST 2005<br class="xooki-br"/>        delivering ivy file to I:\standalone/build/ivy.xml<br class="xooki-br"/>:: publishing :: jayasoft/standalone-working@xmen<br class="xooki-br"/>        published standalone to I:\config\repository\standalone-1.jar<br class="xooki-br"/>        published ivy to I:\config\repository\standalone-1.xml<br class="xooki-br"/>     [echo] project standalone released with version 1<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 10 seconds</pre></div>
What we see here:
<ul>
  <li>the project depends on 1 library (1 artifact)</li>
  <li>the library was not in the ivy cache and so was downloaded (1 downloaded)</li>
  <li>the project has been released under version number 1</li>
</ul>
</div>
To give more details on the publish, as you can see the call to the publish task has resulted in two main things:<br class="xooki-br"/>- the delivery of a resolved ivy file to build/ivy.xml. This has been done because by default the publish task not only publishes artifacts but also ivy file. So it has looked to the path where the ivy file to publish should be, using the artifactspattern: ${build.dir}/[artifact].[ext].<br class="xooki-br"/>For an ivy file, this resolves to build/ivy.xml. Because this file does not exist, it automatically make a call to the deliver task which delivers a resolved ivy file to this destination.<br class="xooki-br"/>- the publication of artifact standalone and resolved ivy file to the repository. Both are mere copy of files found in the current project, more precisely in the build dir. This is because the artifactspattern has been set to ${build.dir}/[artifact].[ext], so standalone artifact is found in build/standalone.jar and ivy file in build/ivy.xml. And because we have asked the publish task to publish them using the "projects" resolver, these files are copied to repository\standalone-1.jar and to repository\standalone-1.xml, respecting the artifact and ivy patterns of our settings (see above).<br class="xooki-br"/>
<div class="step">
<h2>step 4: running the depending project</h2>
Goto to directory depending and run ant
<div class="shell"><pre>I:\depending>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>clean:<br class="xooki-br"/><br class="xooki-br"/>configure:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: resolving dependencies :: jayasoft/depending-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        [1] jayasoft/standalone<br class="xooki-br"/>downloading <a href="file:/I:/config/repository/standalone-1.jar">file:/I:/config/repository/standalone-1.jar</a> (1) ...<br class="xooki-br"/>. (1kB)<br class="xooki-br"/>        [SUCCESSFUL ] jayasoft/standalone-1/standalone.jar[jar] (15ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   2   |   2   |   2   |   0   ||   2   |   1   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/depending<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        2 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>compile:<br class="xooki-br"/>    [mkdir] Created dir: I:\depending\build\classes<br class="xooki-br"/>    [javac] Compiling 1 source file to I:\depending\build\classes<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>     [java] you are using version 1 of class standalone.Main<br class="xooki-br"/>     [java] standard message : i am depending.Main and standalone.Main will do the job for me<br class="xooki-br"/>     [java]     [standalone.Main] capitalizing string "i am depending.Main and standalone.Main will do the job for me" <br class="xooki-br"/>				     using org.apache.commons.lang.WordUtils<br class="xooki-br"/>     [java] capitalized message : I Am Depending.main And Standalone.main Will Do The Job For Me<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 3 seconds</pre></div>
What we see here :
<ul>
  <li>the project depends on 2 libraries (2 artifacts)</li>
  <li>one of the libraries was in the cache because there was only 1 download (1 downloaded)</li>
  <li>ivy retrieved the version 1 of the project standalone. The call to standalone.Main.getVersion() has returned 1. If you look in the depending/lib directory, you should see standalone-1.jar which is the artifact version 1 of the project standalone</li>
  <li>the call to standalone.Main.capitalizeWords(str) succeed, which means that the required library were in the classpath. If you look at the lib directory, you will see that the library commons-lang-2.0.jar was retrieved. This library was declared to be used by the project "standalone", so ivy get it too for the dependant project.</li>
</ul>
</div>
<div class="step">
<h2>step 5 : new version of standalone project</h2>
Like we did before in step 3, publish again the standalone project. This will result as a new version of the project.
<div class="shell"><pre>I:\standalone>ant publish<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>configure:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: resolving dependencies :: jayasoft/standalone-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   1   |   0   |   0   |   0   ||   1   |   0   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/standalone<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        0 artifacts copied, 1 already retrieved<br class="xooki-br"/><br class="xooki-br"/>compile:<br class="xooki-br"/><br class="xooki-br"/>jar:<br class="xooki-br"/>[propertyfile] Updating property file: I:\standalone\build\classes\version.properties<br class="xooki-br"/>      [jar] Building jar: I:\standalone\build\standalone.jar<br class="xooki-br"/><br class="xooki-br"/>publish:<br class="xooki-br"/>   [delete] Deleting: I:\standalone\build\ivy.xml<br class="xooki-br"/>:: delivering :: jayasoft/standalone-working@xmen :: 2 :: release :: Wed Apr 27 09:17:13 CEST 2005<br class="xooki-br"/>        delivering ivy file to I:\standalone/build/ivy.xml<br class="xooki-br"/>:: publishing :: jayasoft/standalone-working@xmen<br class="xooki-br"/>        published standalone to I:\config\repository\standalone-2.jar<br class="xooki-br"/>        published ivy to I:\config\repository\standalone-2.xml<br class="xooki-br"/>     [echo] project standalone released with version 2<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 2 seconds</pre></div>
Now if you look in your repository folder, you must find 2 version published of the standalone project.<br class="xooki-br"/>Let's look at it:
<div class="shell"><pre>I:\dependence\standalone>dir ..\config\repository /w<br class="xooki-br"/> Le volume dans le lecteur I s'appelle DATA<br class="xooki-br"/> Le numéro de série du volume est 30E5-91BA<br class="xooki-br"/><br class="xooki-br"/> Répertoire de I:\dependence\config\repository<br class="xooki-br"/><br class="xooki-br"/>[.]                [..]               standalone-1.jar   standalone-1.xml   standalone-2.jar   standalone-2.xml<br class="xooki-br"/>               4 fichier(s)            3 936 octets<br class="xooki-br"/>               2 Rép(s)   9 874 350 080 octets libres<br class="xooki-br"/><br class="xooki-br"/>I:\dependence\standalone></pre></div>
</div>
Ok now our repository contains two versions of the project <b>standalone</b>, other projects can refer to both versions.
<div class="step">
<h2>step 6 : depending got the new version</h2>
What do we expect about running again the depending project? Two major things are expected: 
<ul>
  <li>retrieve the version 2 as the latest.integration version of the standalone project</li>
  <li>running the test must display version 2 of standalone project</li>
</ul>
Let's go!!!
<div class="shell"><pre>I:\depending>ant<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>clean:<br class="xooki-br"/>   [delete] Deleting 3 files from I:\depending<br class="xooki-br"/>   [delete] Deleted 4 directories from I:\depending<br class="xooki-br"/><br class="xooki-br"/>configure:<br class="xooki-br"/>:: Ivy 1.0-rc3 - 20050421161206 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: resolving dependencies :: jayasoft/depending-working@xmen<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        [2] jayasoft/standalone<br class="xooki-br"/>downloading <a href="file:/I:/config/repository/standalone-2.jar">file:/I:/config/repository/standalone-2.jar</a> (2) ...<br class="xooki-br"/>. (1kB)<br class="xooki-br"/>        [SUCCESSFUL ] jayasoft/standalone-2/standalone.jar[jar] (0ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   2   |   2   |   2   |   0   ||   2   |   1   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: jayasoft/depending<br class="xooki-br"/>        confs: [default]<br class="xooki-br"/>        2 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>compile:<br class="xooki-br"/>    [mkdir] Created dir: I:\depending\build\classes<br class="xooki-br"/>    [javac] Compiling 1 source file to I:\depending\build\classes<br class="xooki-br"/><br class="xooki-br"/>run:<br class="xooki-br"/>     [java] you are using version 2 of class standalone.Main<br class="xooki-br"/>     [java] standard message : i am depending.Main and standalone.Main will do the job for me<br class="xooki-br"/>     [java]     [standalone.Main] capitalizing string "i am depending.Main and standalone.Main will do the job for me" <br class="xooki-br"/>			     using org.apache.commons.lang.WordUtils<br class="xooki-br"/>     [java] capitalized message : I Am Depending.main And Standalone.main Will Do The Job For Me<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 3 seconds</pre></div>
Ok we have the result expected as the run target shows that we are using the version 2 of the main class of standalone project. If we take a look at the resolve target results, we can see that one artifact has been downloaded to the ivy cache. In fact this file is the version 2 of the standalone project that was taken from the repository, you can now retrieve it in the ivy-cache directory.
</div>

	<hr/><div class='toc-title toc-title-3'>Using Ivy in multiple projects environment</div><br class="xooki-br"/><strong>Warning: tutorial in progress !</strong><br class="xooki-br"/><br class="xooki-br"/>In the previous tutorial you have seen how to deal with dependencies between two simple projects.<br class="xooki-br"/><br class="xooki-br"/>This tutorial will guide you through the use of ivy in a more complete environment. All the sources of this tutorial are available in src/example/multi-project in ivy distribution (warning: the sources attached with ivy 1.3 contain an error in the common.xml file. Please use either latest build to find proper example sources or replace the common.xml file with <a href="../samples/multi-project/common.xml">this one</a>).<br class="xooki-br"/><br class="xooki-br"/><h1>Context</h1>
Here is a 10000ft overview of the projects involved in this tutorial:
<ul>
<li>version</li> helps to identify module by a version
<li>list</li> gives a list of files in a directory (recursively)
<li>size</li> gives the total size of all files in a directory, or of a collection of files
<li>find</li> find files in a given dir or among a list of files which match a given name
<li>sizewhere</li> gives the total size of files matching a name in a directory
<li>console</li> give access to all other modules features through a simple console app
</ul>
For sure this is not aimed to demonstrate how to develop a complex app or give indication of advanced algorithm :-)<br class="xooki-br"/><br class="xooki-br"/>But this gives a simple understanding of how ivy can be used to develop an application divided in multiple modules.<br class="xooki-br"/><br class="xooki-br"/>Now, here is how these modules relate to each other:<br class="xooki-br"/><a href="../samples/projects-dependencies-graph.jpg"><img src="samples/projects-dependencies-graph-small.jpg" alt="dependencies graph"/><br/><center><i>click to enlarge</i></center></a><br class="xooki-br"/><br class="xooki-br"/>Modules in yellow are the modules described in this tutorial, and modules in blue are external dependencies (we will see how to generate this graph later in this tutorial).<br class="xooki-br"/><br class="xooki-br"/>As you can see, we have here a pretty interesting set of modules with dependencies between each other, each depending on the latest version of the others.<br class="xooki-br"/><br class="xooki-br"/><h1>The example files</h1>
The sources for this tutorial can be found in src/example/multi-project in the ivy distribution. In this directory, you will find the following files:
<ul>
<li><a href="../samples/multi-project/build.xml">build.xml</a></li>This is a root build file which can be used to call targets on all modules, in the order of their dependencies (ensuring that a module is always built before any module depending on it, for instance)
<li>common
<ul>
<li><a href="../samples/multi-project/common.xml">common.xml</a></li> the common build file imported by all build.xml files for each project. This build defines the targets which can be used in all projects.
<li>build.properties</li>some properties common to all projects
</ul>
</li>
<li>projects</li>
contains a directory per module, with for each
<ul>
<li>ivy.xml</li>Ivy file of the module, describing its dependencies upon other modules and / or external modules.<br class="xooki-br"/>Example:
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>    &lt;info <br class="xooki-br"/>        organisation="jayasoft"<br class="xooki-br"/>        module="find"<br class="xooki-br"/>        status="integration"/&gt;<br class="xooki-br"/>    &lt;configurations&gt;<br class="xooki-br"/>      &lt;conf name="core"/&gt;<br class="xooki-br"/>      &lt;conf name="standalone" extends="core"/&gt;<br class="xooki-br"/>    &lt;/configurations&gt;<br class="xooki-br"/>    &lt;publications&gt;<br class="xooki-br"/>      &lt;artifact name="find" type="jar" conf="core" /&gt;<br class="xooki-br"/>    &lt;/publications&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>      &lt;dependency name="version" rev="latest.integration" conf="core-&gt;default" /&gt;<br class="xooki-br"/>      &lt;dependency name="list" rev="latest.integration" conf="core" /&gt;<br class="xooki-br"/>      &lt;dependency org="apache" name="commons-collections" rev="3.1" conf="core-&gt;default" /&gt;<br class="xooki-br"/>      &lt;dependency org="apache" name="commons-cli" rev="1.0" conf="standalone-&gt;default" /&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>
<li>build.xml</li>The build file of the project, which consists mainly in an import of the common build file and of a module specific properties file:
<pre>
&lt;project name="find" default="compile"&gt;<br class="xooki-br"/>	&lt;property file="build.properties"/&gt;<br class="xooki-br"/>	<br class="xooki-br"/>	&lt;import file="${common.dir}/common.xml"/&gt;<br class="xooki-br"/>&lt;/project&gt;
</pre>
<li>build.properties</li>Module specific properties + properties to find the common build file
<pre>
projects.dir = ${basedir}/..<br class="xooki-br"/>wkspace.dir = ${projects.dir}/..<br class="xooki-br"/>common.dir = ${wkspace.dir}/common
</pre>
<li>src</li> the source directory with all java sources
</ul>
</ul>

Note that this doesn't demonstrate good practice for software development in general, in particular you won't find any unit test in this samples, even if we think unit testing is very important. But this isn't the aim of this tutorial.<br class="xooki-br"/><br class="xooki-br"/>Now that you are a bit more familiar with the structure, let's have a look at the most important part of this example: the common build file. Indeed, as you have seen all modules build files only import the common build file, and defines their dependencies in their ivy files (with which you should begin to be familiar).<br class="xooki-br"/><br class="xooki-br"/>So, here are some aspects of this common build file:<br class="xooki-br"/><h2>ivy settings</h2>
<pre>

    &lt;!-- setup ivy default configuration with some custom info --&gt;<br class="xooki-br"/>    &lt;property name="ivy.local.default.root" value="${repository.dir}/local"/&gt;<br class="xooki-br"/>    &lt;property name="ivy.shared.default.root" value="${repository.dir}/shared"/&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;!-- here is how we would have configured ivy if we had our own ivysettings file<br class="xooki-br"/>       &lt;ivy:settings file="${common.dir}/ivysettings.xml" /&gt;<br class="xooki-br"/>    --&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>

This declaration configures ivy only by setting two properties: the location for the local repository and the location for the shared repository. It's the only settings done here, since ivy 1.3 is configured by default to work in a team environment (see <a href="tutorial/defaultconf.html">default settings tutorial</a> for details about this). For sure in a real environment the shared repository location would rather be in a team shared directory (or in a more complex repository, again see the default settings tutorial to see how to use something really different).<br class="xooki-br"/>There is only in comments how the settings would have been done if the default settings wasn't ok for our purpose.<br class="xooki-br"/><br class="xooki-br"/><h2>resolve dependencies</h2>
<pre>
&lt;target name="resolve" depends="clean-lib" description="--&gt; retrieve dependencies with ivy"&gt;<br class="xooki-br"/>    &lt;mkdir dir="${lib.dir}"/&gt; &lt;!-- not usually necessary, ivy creates the directory IF there are dependencies --&gt;<br class="xooki-br"/>    &lt;!-- this target is named resolve even if we do a retrieve: <br class="xooki-br"/>         in fact a resolve will be called, and then the retrieve will simply copy files in the lib directory --&gt;<br class="xooki-br"/>    &lt;ivy:retrieve pattern="${lib.dir}/[artifact].[ext]" /&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>
Here we see that we only call a retrieve task, the resolve being done automatically with default parameters (which are ok in our case). So here nothing special, we simply use ivy to retrieve dependencies in the lib directory, putting artifacts without revision in their names (it's easier to use with an ide, for instance).<br class="xooki-br"/><br class="xooki-br"/><h2>publish</h2>
<pre>
&lt;target name="publish" depends="clean-build, new-version, jar" description="--&gt; publish this project in the ivy repository"&gt;<br class="xooki-br"/>    &lt;property name="revision" value="${version}"/&gt;<br class="xooki-br"/>    &lt;ivy:publish artifactspattern="${build.dir}/[artifact].[ext]" <br class="xooki-br"/>        resolver="shared"<br class="xooki-br"/>        pubrevision="${revision}" <br class="xooki-br"/>        status="release"<br class="xooki-br"/>    	/&gt;<br class="xooki-br"/>    &lt;echo message="project ${ant.project.name} released with version ${revision}" /&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>
This target let publish the module in the shared repository, with the revision found in the version property, which is set by other targets. It can be used when a module reaches a specific milestone, or whenever you want the teeam to benefit from a new version of the module.<br class="xooki-br"/><h2>publish-local</h2>
<pre>
&lt;target name="publish-local" depends="local-version, jar" description="--&gt; publish this project in the local ivy repository"&gt;<br class="xooki-br"/>    &lt;delete file="${build.dir}/ivy.xml"/&gt; &lt;!-- delete last produced ivy file to be sure a new one will be generated --&gt;<br class="xooki-br"/>    &lt;ivy:publish artifactspattern="${build.dir}/[artifact].[ext]" <br class="xooki-br"/>        resolver="local"<br class="xooki-br"/>        pubrevision="${revision}"<br class="xooki-br"/>        pubdate="${now}"<br class="xooki-br"/>        status="integration"<br class="xooki-br"/>    	/&gt;<br class="xooki-br"/>    &lt;echo message="project ${ant.project.name} published locally with version ${revision}" /&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>
This is very similar to the publish task, except that this publish the revision in the local repository, which is used only in your environment and doesn't disturb the team. When you change something in a module and want to benefit from the change in another one, you can simply call publish-local in this module, and then your next build of the other module will automatically get this local version.<br class="xooki-br"/><h2>clean-local</h2>
<pre>
&lt;target name="clean-local" depends="configure" description="cleans the local repository for the current module"&gt;<br class="xooki-br"/>    &lt;delete dir="${ivy.local.default.root}/${ant.project.name}"/&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>
This target is used when you don't want to use your local version of a module anymore, for example when you release a new version to the whole team.<br class="xooki-br"/><h2>report</h2>
<pre>
&lt;target name="report" depends="resolve" description="--&gt; generates a report of dependencies"&gt;<br class="xooki-br"/>    &lt;ivy:report todir="${build.dir}"/&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>
Generates both an html report and a graphml report.<br class="xooki-br"/><br class="xooki-br"/>For example, to generate a graph like the one shown at the beginning of this tutorial, you just have to follow the instructions given <a href="../yed.html">here</a> with the graphml file you will find in <pre>projects/console/build/</pre> after having called report in the console project, and that's it, you have a clear overview of all your app dependencies !<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Using Ivy Configurations</div><br class="xooki-br"/>This tutorial introduces the use of configuration in ivy files. Ivy configurations is indeed a very important concept. Someone even told me one day that using Ivy without using configurations is like eating a good cheese without touching the glass of Chateau Margaux 1976 you have just aside :-)<br class="xooki-br"/><br class="xooki-br"/>More seriously, configurations in ivy can be better understood as views on your module, and you will see how they can be used efficiently here.<br class="xooki-br"/><br class="xooki-br"/>Reference documentation on configurations can be found <a href="../terminology.html">here</a> and <a href="../ivyfile/configurations.html">here</a>.<br class="xooki-br"/><h1>Introduction</h1>
Source code available in src/example/configurations/multi-projects.<br class="xooki-br"/>We have two projects :<br class="xooki-br"/>  - a library that define an api to filter String array and two implementations of this api.<br class="xooki-br"/>  - a very small app that use this library.<br class="xooki-br"/>  <br class="xooki-br"/>The library produces 3 artifacts:<br class="xooki-br"/>  - the api jar,<br class="xooki-br"/>  - an implementation jar with no external dependency,<br class="xooki-br"/>  - an other implementation that needs commons-collection to perform.<br class="xooki-br"/><br class="xooki-br"/>The application only need api to compile and can use any of the two implementation at runtime.<br class="xooki-br"/><br class="xooki-br"/><h1>The library project</h1>
The first project we defined in this tutorial is the filter-framework.<br class="xooki-br"/>In order to have a fine grained artifacts publication definition, we defined configurations to map usage other can make of our library.<br class="xooki-br"/><h2>The ivy.xml file</h2>

<div class="ivy-file">
<pre>
&lt;ivy-module version="1.3"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="filter-framework"/&gt;<br class="xooki-br"/>    &lt;configurations&gt;<br class="xooki-br"/>    	&lt;conf name="api"  description="only provide filter framework API"/&gt;<br class="xooki-br"/>      &lt;conf name="homemade-impl" extends="api" description="provide a home made implementation of our api"/&gt;<br class="xooki-br"/>      &lt;conf name="cc-impl" extends="api" description="provide an implementation that use apache common collection framework"/&gt;<br class="xooki-br"/>      &lt;conf name="test" extends="cc-impl" visibility="private" description="for testing our framework"/&gt;<br class="xooki-br"/>    &lt;/configurations&gt;<br class="xooki-br"/>    &lt;publications&gt;<br class="xooki-br"/>      &lt;artifact name="filter-api" type="jar"  conf="api" ext="jar"/&gt;<br class="xooki-br"/>      &lt;artifact name="filter-hmimpl" type="jar"  conf="homemade-impl" ext="jar"/&gt;<br class="xooki-br"/>      &lt;artifact name="filter-ccimpl" type="jar"  conf="cc-impl" ext="jar"/&gt;      <br class="xooki-br"/>    &lt;/publications&gt;<br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency org="apache" name="commons-collections" rev="3.1" conf="cc-impl-&gt;default"/&gt;<br class="xooki-br"/>        &lt;dependency org="junit" name="junit" rev="3.8" conf="test-&gt;default"/&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre> 
</div>
<h2>Explanation</h2>
As you can see we defined 3 public configurations and a private one (defined junit dependency for testing).<br class="xooki-br"/>The 2 implementations conf  <b>homemade-impl</b>,  <b>cc-impl</b> extends <b>api</b> configuration so artifacts defined in api will also be required in its extending conf.<br class="xooki-br"/>In the publications tag we defined the artifacts we produce (here it's jars) and we affect them a configuration.<br class="xooki-br"/>Later when others will use our library they will have a very flexible way to defined what they need.<br class="xooki-br"/><br class="xooki-br"/><h2>See it in action</h2>
The library project is build using ant. Open a shell in the root directory of the project and type <b>ant</b>.
<div class="shell"><pre>
Buildfile: build.xml<br class="xooki-br"/>clean:<br class="xooki-br"/>resolve:<br class="xooki-br"/>:: Ivy 20060123130642 - 20060123130642 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>no configuration file found, using default...<br class="xooki-br"/>:: configuring :: url = jar:<a href="file:/C:/dev/ant/apache-ant-1.6.2/lib/ivy-20060123130642.jar!/fr/jayasoft/ivy/conf/ivysettings.xml">file:/C:/dev/ant/apache-ant-1.6.2/lib/ivy-20060123130642.jar!/fr/jayasoft/ivy/conf/ivysettings.xml</a><br class="xooki-br"/>:: resolving dependencies :: [ jayasoft | filter-framework | working@SPIDER ]<br class="xooki-br"/>        confs: [api, homemade-impl, cc-impl, test]<br class="xooki-br"/>        found [ apache | commons-collections | 3.1 ] in main<br class="xooki-br"/>        found [ junit | junit | 3.8 ] in main<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-collections/jars/commons-collections-3.1.jar">http://www.ibiblio.org/maven/commons-collections/jars/commons-collections-3.1.jar</a> ................(546kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ apache | commons-collections | 3.1 ]/commons-collections.jar[jar] (34320ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/junit/jars/junit-3.8.jar">http://www.ibiblio.org/maven/junit/jars/junit-3.8.jar</a> ........................... (118kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ junit | junit | 3.8 ]/junit.jar[jar] (8462ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |        api       |   0   |   0   |   0   |   0   ||   0   |   0   |<br class="xooki-br"/>        |   homemade-impl  |   0   |   0   |   0   |   0   ||   0   |   0   |<br class="xooki-br"/>        |      cc-impl     |   1   |   1   |   1   |   0   ||   1   |   1   |<br class="xooki-br"/>        |       test       |   2   |   2   |   1   |   0   ||   2   |   2   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: [ jayasoft | filter-framework ]<br class="xooki-br"/>        confs: [api, homemade-impl, cc-impl, test]<br class="xooki-br"/>        3 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>build:<br class="xooki-br"/>    [mkdir] Created dir: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\build<br class="xooki-br"/>    [mkdir] Created dir: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\distrib<br class="xooki-br"/>    [javac] Compiling 4 source files to D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\build<br class="xooki-br"/>      [jar] Building jar: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\distrib\filter-api.jar<br class="xooki-br"/>      [jar] Building jar: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\distrib\filter-hmimpl.jar<br class="xooki-br"/>      [jar] Building jar: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\distrib\filter-ccimpl.jar<br class="xooki-br"/><br class="xooki-br"/>test:<br class="xooki-br"/>    [mkdir] Created dir: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\build\test-report<br class="xooki-br"/>    [mkdir] Created dir: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\build\test-classes<br class="xooki-br"/>    [javac] Compiling 3 source files to D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\filter-framework\build\test-classes<br class="xooki-br"/>    [junit] Running filter.ccimpl.CCFilterTest<br class="xooki-br"/>    [junit] Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.02 sec<br class="xooki-br"/>    [junit] Running filter.hmimpl.HMFilterTest<br class="xooki-br"/>    [junit] Tests run: 5, Failures: 0, Errors: 0, Time elapsed: 0.01 sec<br class="xooki-br"/><br class="xooki-br"/>publish:<br class="xooki-br"/>:: delivering :: [ jayasoft | filter-framework | working@SPIDER ] :: 1.3 :: release :: Tue Jan 24 10:53:41 CET 2006<br class="xooki-br"/>        delivering ivy file to distrib/ivy.xml<br class="xooki-br"/>:: publishing :: [ jayasoft | filter-framework | working@SPIDER ]<br class="xooki-br"/>        published filter-api to D:\users\mm\.ivy/local/jayasoft/filter-framework/1.3/jars/filter-api.jar<br class="xooki-br"/>        published filter-ccimpl to D:\users\mm\.ivy/local/jayasoft/filter-framework/1.3/jars/filter-ccimpl.jar<br class="xooki-br"/>        published filter-hmimpl to D:\users\mm\.ivy/local/jayasoft/filter-framework/1.3/jars/filter-hmimpl.jar<br class="xooki-br"/>        published ivy to D:\users\mm\.ivy/local/jayasoft/filter-framework/1.3/ivys/ivy.xml<br class="xooki-br"/>     [echo] project filter-framework released with version 1.3<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL
</pre></div>
The ant's default target is publish. <br class="xooki-br"/>This target use ivy to publish our library binaries in a local repository. <br class="xooki-br"/>As we do not specify any repository path the default one is use. ({home.dir}/.ivy/local/jayasoft/filter-framework/)<br class="xooki-br"/>Now we are ready to use our library.<br class="xooki-br"/><br class="xooki-br"/><h1>The application project</h1>

Now that we have shipped our fantastic library, we want to use it!<br class="xooki-br"/>The tutorial comes with a sample application called myapp. You will find it in the tutorial folder.<br class="xooki-br"/><h2>The ivy.xml file</h2>

<div class="ivy-file">
<pre>
&lt;ivy-module version="1.3"&gt;<br class="xooki-br"/>    &lt;info organisation="jayasoft" module="myapp"/&gt;<br class="xooki-br"/>   <br class="xooki-br"/>    &lt;configurations&gt;<br class="xooki-br"/>      &lt;conf name="build" visibility="private" description="compilation only need api jar" /&gt;<br class="xooki-br"/>      &lt;conf name="noexternaljar" description="use only company jar" /&gt;<br class="xooki-br"/>      &lt;conf name="withexternaljar" description="use company jar and third party jars" /&gt;    <br class="xooki-br"/>    &lt;/configurations&gt;<br class="xooki-br"/>    <br class="xooki-br"/>    &lt;dependencies&gt;<br class="xooki-br"/>        &lt;dependency org="jayasoft" name="filter-framework" rev="latest.integration" conf="build-&gt;api; noexternaljar-&gt;homemade-impl; withexternaljar-&gt;cc-impl"/&gt;<br class="xooki-br"/>    &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre> 
</div>
<h2>Explanation</h2>
We create 3 configurations that define the way we want to use the application.<br class="xooki-br"/>The build configuration, (as said before) only need api to compile.<br class="xooki-br"/>The other configuration are defined for runtime.<br class="xooki-br"/>One configuration will only use "home-made" jars, and the second one will use external jars.<br class="xooki-br"/><br class="xooki-br"/>We also defined a dependency on the previous library.<br class="xooki-br"/>In the dependency we use configuration mapping to match ours and library configurations.<br class="xooki-br"/>You can found more information on configuration mapping <a href="../ivyfile/configurations.html">here</a><br class="xooki-br"/><ol>
  <li><b>build->api</b> : here we tell ivy that our <b>build</b> configuration depends on the api configuration of the dependcy</li>
  <li><b>noexternaljar->homemade-impl</b> : here we tell ivy that our <b>noexternaljar</b> configuration depends on the <b>homemade-impl</b> configuration of the dependcy.</li>
  <li><b>withexternaljar->cc-impl</b> : here we tell ivy that our <b>withexternaljar</b> configuration depends on the <b>cc-impl</b> configuration of the dependcy</li>
</ol>
Note that we never declares any of the dependency artifacts we need in each configuration: it's the dependency module file which declares the published artifacts and which should be used in each configuration.<br class="xooki-br"/><br class="xooki-br"/>In the ant buld.xml file we defined a resolve target as follow:<br class="xooki-br"/>
<pre>
&lt;target name="resolve" description="--&gt; retreive dependencies with ivy"&gt;<br class="xooki-br"/>	&lt;ivy:retrieve pattern="${ivy.lib.dir}/[conf]/[artifact].[ext]"/&gt;<br class="xooki-br"/>&lt;/target&gt; 
</pre> 

When we call this target, Ivy will do a resolve using our ivy.xml file in the root folder and will after do retrieve putting all the artifacts in folder for each configuration. Here is how your lib directory should look like after a call to this target:
<div class="shell"><pre>
 Repertoire de D:\ivy\src\example\configurations\multi-projects\myapp\lib<br class="xooki-br"/><br class="xooki-br"/>01/24/2006  11:19 AM    <REP>          build<br class="xooki-br"/>01/24/2006  11:19 AM    <REP>          noexternaljar<br class="xooki-br"/>01/24/2006  11:19 AM    <REP>          withexternaljar<br class="xooki-br"/>               0 fichier(s)                0 octets<br class="xooki-br"/><br class="xooki-br"/> Repertoire de D:\ivy\src\example\configurations\multi-projects\myapp\lib\build<br class="xooki-br"/><br class="xooki-br"/>01/24/2006  10:53 AM             1,174 filter-api.jar<br class="xooki-br"/>               1 fichier(s)            1,174 octets<br class="xooki-br"/><br class="xooki-br"/> Repertoire de D:\ivy\src\example\configurations\multi-projects\myapp\lib\noexternaljar<br class="xooki-br"/><br class="xooki-br"/>01/24/2006  10:53 AM             1,174 filter-api.jar<br class="xooki-br"/>01/24/2006  10:53 AM             1,030 filter-hmimpl.jar<br class="xooki-br"/>               2 fichier(s)            2,204 octets<br class="xooki-br"/><br class="xooki-br"/> Repertoire de D:\ivy\src\example\configurations\multi-projects\myapp\lib\withexternaljar<br class="xooki-br"/>01/24/2006  10:53 AM           559,366 commons-collections.jar<br class="xooki-br"/>01/24/2006  10:53 AM             1,174 filter-api.jar<br class="xooki-br"/>01/24/2006  10:53 AM             1,626 filter-ccimpl.jar<br class="xooki-br"/>               3 fichier(s)          562,166 octets
</pre></div>
As you can see for each configuration we have now a set of jars.<br class="xooki-br"/><br class="xooki-br"/>Let's try to launch our app.<br class="xooki-br"/><br class="xooki-br"/><h2>See it in action</h2>
Use ant to run the application.<br class="xooki-br"/>Default ant target is run-cc and will launch application using common collection jar.
<div class="shell"><pre>
Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: Ivy 20060123130642 - 20060123130642 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>no configuration file found, using default...<br class="xooki-br"/>:: configuring :: url = jar:<a href="file:/C:/dev/ant/apache-ant-1.6.2/lib/ivy-20060123130642.jar!/fr/jayasoft/ivy/conf/ivysettings.xml">file:/C:/dev/ant/apache-ant-1.6.2/lib/ivy-20060123130642.jar!/fr/jayasoft/ivy/conf/ivysettings.xml</a><br class="xooki-br"/>:: resolving dependencies :: [ jayasoft | myapp | working@SPIDER ]<br class="xooki-br"/>        confs: [build, noexternaljar, withexternaljar]<br class="xooki-br"/>        found [ jayasoft | filter-framework | 1.3 ] in local<br class="xooki-br"/>        [1.3] [ jayasoft | filter-framework | latest.integration ]<br class="xooki-br"/>        found [ apache | commons-collections | 3.1 ] in default<br class="xooki-br"/>downloading D:\users\mm\.ivy\local\jayasoft\filter-framework\1.3\jars\filter-ccimpl.jar .... (1kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ jayasoft | filter-framework | 1.3 ]/filter-ccimpl.jar[jar] (0ms)<br class="xooki-br"/>downloading D:\users\mm\.ivy\local\jayasoft\filter-framework\1.3\jars\filter-api.jar .... (1kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ jayasoft | filter-framework | 1.3 ]/filter-api.jar[jar] (0ms)<br class="xooki-br"/>downloading D:\users\mm\.ivy\local\jayasoft\filter-framework\1.3\jars\filter-hmimpl.jar .... (1kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ jayasoft | filter-framework | 1.3 ]/filter-hmimpl.jar[jar] (10ms)<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |       build      |   1   |   1   |   1   |   0   ||   1   |   1   |<br class="xooki-br"/>        |   noexternaljar  |   1   |   1   |   1   |   0   ||   2   |   2   |<br class="xooki-br"/>        |  withexternaljar |   2   |   1   |   1   |   0   ||   3   |   2   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: [ jayasoft | myapp ]<br class="xooki-br"/>        confs: [build, noexternaljar, withexternaljar]<br class="xooki-br"/>        6 artifacts copied, 0 already retrieved<br class="xooki-br"/><br class="xooki-br"/>build:<br class="xooki-br"/>    [mkdir] Created dir: D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\myapp\build<br class="xooki-br"/>    [javac] Compiling 1 source file to D:\svn\jayasoft\projects\tools\ivy\src\example\configurations\multi-projects\myapp\build<br class="xooki-br"/><br class="xooki-br"/>run-cc:<br class="xooki-br"/>     [java] Filtering with:class filter.ccimpl.CCFilter<br class="xooki-br"/>     [java] Result :[two, tree]
</pre></div>
Launching application with only home made jars is straingforward.<br class="xooki-br"/>type ant run-hm<br class="xooki-br"/>
<div class="shell"><pre>
Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>resolve:<br class="xooki-br"/>:: Ivy 20060123130642 - 20060123130642 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>no configuration file found, using default...<br class="xooki-br"/>:: configuring :: url = jar:<a href="file:/C:/dev/ant/apache-ant-1.6.2/lib/ivy-20060123130642.jar!/fr/jayasoft/ivy/conf/ivysettings.xml">file:/C:/dev/ant/apache-ant-1.6.2/lib/ivy-20060123130642.jar!/fr/jayasoft/ivy/conf/ivysettings.xml</a><br class="xooki-br"/>:: resolving dependencies :: [ jayasoft | myapp | working@SPIDER ]<br class="xooki-br"/>        confs: [build, noexternaljar, withexternaljar]<br class="xooki-br"/>        found [ jayasoft | filter-framework | 1.3 ] in default<br class="xooki-br"/>        [1.3] [ jayasoft | filter-framework | latest.integration ]<br class="xooki-br"/>        found [ apache | commons-collections | 3.1 ] in default<br class="xooki-br"/>:: resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |       build      |   1   |   1   |   0   |   0   ||   1   |   0   |<br class="xooki-br"/>        |   noexternaljar  |   1   |   1   |   0   |   0   ||   2   |   0   |<br class="xooki-br"/>        |  withexternaljar |   2   |   1   |   0   |   0   ||   3   |   0   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>:: retrieving :: [ jayasoft | myapp ]<br class="xooki-br"/>        confs: [build, noexternaljar, withexternaljar]<br class="xooki-br"/>        0 artifacts copied, 6 already retrieved<br class="xooki-br"/><br class="xooki-br"/>build:<br class="xooki-br"/><br class="xooki-br"/>run-hm:<br class="xooki-br"/>     [java] Filtering with:class filter.hmimpl.HMFilter<br class="xooki-br"/>     [java] Result :[two, tree]<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL
</pre></div>
Nice we got the same result but we can see that implementation class are different.<br class="xooki-br"/><br class="xooki-br"/><h1>Conclusion</h1>
<b>You should use configuration as often as possible</b><br class="xooki-br"/>Configurations are very important concept in ivy. They allow you to groups artifacts set by meaning.<br class="xooki-br"/>When you write ivy file for projects that are supposed to be reused, use configurations to allow people to get only they what they need without having to specify it by hand using artifact tag in dependency section. <br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Building a repository</div><br class="xooki-br"/>With the <a href="../use/install.html">install</a> ant task you are given the possibility to copy ivy descriptors and artifacts found from a resolver and publish them into another resolver.<br/> 

This tutorial will show you how to build your own clean enterprise repository of ivy descriptors and modules artifacts.<br class="xooki-br"/>We will first use some basic ivy settings files to show how it works, and then we will use advanced features like <a href="../configuration/namespaces.html">namespaces</a> to build a real enterprise repository.<br class="xooki-br"/><br class="xooki-br"/><h1>The project used</h1>
The project that we will use is quite simple.<br class="xooki-br"/>It is composed of an ant build file, and some ivy settings files.<br class="xooki-br"/><br class="xooki-br"/>Here are the accessible target that we will use : 
<div class="shell"><pre>
Z:\ivy-repository>ant -p<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>Main targets:<br class="xooki-br"/><br class="xooki-br"/> advanced                                 --> retrieve files from public repositories (ivyrep, ibiblio, ...) using namespaces<br class="xooki-br"/> basic                                    --> retrieve files from well formatted ivy repositories<br class="xooki-br"/> basic-deps                               --> retrieve files from well formatted ivy repositories with dependencies<br class="xooki-br"/> clean-cache                              --> clean the cache<br class="xooki-br"/> clean-repo                               --> clean the destination repository<br class="xooki-br"/> commons-lang-1-0-ibiblio-no-namespace    --> retrieve commons-lang 1.0 from ibiblio maven using no namespaces<br class="xooki-br"/> commons-lang-1-0-ibiblio-with-namespace  --> retrieve commons-lang 1.0 from ibiblio maven using namespaces<br class="xooki-br"/> maven1                                   --> retrieve commons-lang 1.0 from maven1 repo using namespaces<br class="xooki-br"/> maven2                                   --> retrieve files from maven2 repo using namespaces<br class="xooki-br"/>Default target: basic</pre></div>
<br/><br/>
The project is accessible in the <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk/src/example/build-a-ivy-repository">sources</a><br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>Basic repository replication</div><br class="xooki-br"/>We will study here two cases, corresponding to the two basics targets found in the previous build.xml project file.<br class="xooki-br"/><br class="xooki-br"/><h1>Basic: ivysettings.xml file used</h1>
The ivy settings file that we will use is very simple here. It defines two resolvers, libraries and local-repository. The first one is used to retrieve the files that we want, the second is used to copy them. The second one will become our own repository.
<ul>
<li>ivyrep: nothing special on it, ivy files will be looked for on ivyrep and artifacts will be downloaded from <br class="xooki-br"/>ibilio</li>
<li>local-repository:  will store the found files</li>
</ul>

<div class="ivy-file">
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>    &lt;settings defaultCache="${ivy.cache.dir}"	<br class="xooki-br"/>              defaultResolver="local-repository" <br class="xooki-br"/>              defaultConflictManager="all" /&gt;    &lt;!-- in order to get all revisions without any eviction --&gt;<br class="xooki-br"/>    &lt;resolvers&gt;<br class="xooki-br"/>        &lt;ivyrep name="libraries" /&gt;<br class="xooki-br"/>        &lt;filesystem name="local-repository"&gt;<br class="xooki-br"/>            &lt;ivy pattern="${dest.repo.dir}/[organisation]/[module]/ivys/ivy-[revision].xml"/&gt;<br class="xooki-br"/>            &lt;artifact pattern="${dest.repo.dir}/[organisation]/[module]/[type]s/[artifact]-[revision].[type]"/&gt;<br class="xooki-br"/>        &lt;/filesystem&gt;<br class="xooki-br"/>    &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
</div>

<h1>basic, retrieve commons-lang 1.0</h1>
Let's have a look at the <em>basic</em> target.
<pre>
    &lt;ivy:settings id="basic.settings"    file="${configuration-dir}/ivysettings-basic.xml"/&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;target name="basic" description="--&gt; retrieve files from well formatted ivy repositories"&gt;<br class="xooki-br"/>        &lt;ivy:install settingsRef="basic.settings" organisation="apache" module="commons-lang" revision="1.0" from="${from-resolver}" to="${to-resolver}" /&gt;<br class="xooki-br"/>    &lt;/target&gt;
</pre>
After a declaration of the basic.settings, that make the ivy initialization with the right ivysettings file, we only call the task <a href="../../use/install.html">install</a> to retrieve apache commons-lang in it's 1.0 version.<br class="xooki-br"/>Here is the ant call output :
<div class="shell"><pre>Z:\ivy-repository>ant basic<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>init-basic:<br class="xooki-br"/>:: Ivy 20060123130642 - 20060123130642 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>:: configuring :: file = Z:\ivy-repository\ivy-conf-basic.xml<br class="xooki-br"/><br class="xooki-br"/>basic:<br class="xooki-br"/>:: installing [ apache | commons-lang | 1.0 ] ::<br class="xooki-br"/>:: resolving dependencies ::<br class="xooki-br"/>        found [ apache | commons-lang | 1.0 ] in libraries<br class="xooki-br"/>:: downloading artifacts to cache ::<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-1.0.jar">http://www.ibiblio.org/maven/commons-lang/jars/commons-lang-1.0.jar</a> ...<br class="xooki-br"/>............ (62kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ apache | commons-lang | 1.0 ]/commons-lang.jar[jar] (1203ms)<br class="xooki-br"/>:: installing in local-repository ::<br class="xooki-br"/>        published commons-lang to Z:\ivy-repository/ivy-local-repository/apache/commons-lang/jars/commons-lang-1.0.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/apache/commons-lang/ivys/ivy-1.0.xml<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 2 seconds</pre></div>
The trace tells us that the module definition was found using the "libraries" resolver and that the corresponding artifact was downloaded from ibiblio. Then both were published in the local repository.<br class="xooki-br"/><br class="xooki-br"/>If we take a look at our repository :
<div class="shell"><pre>Z:\ivy-repository>dir /s /B /A:-D ivy-local-repository<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\jars\commons-lang-1.0.jar<br class="xooki-br"/>Z:\ivy-repository></pre>
</div>
We can see that we have started our own repository by retrieving the commons-lang 1.0 ivy file descriptor and jar.<br class="xooki-br"/><h1>basic with dependencies, retrieve hibernate 2.1.8</h1>
Now let's advance a little more by trying a module that has some dependencies. Here is the target that we will call :
<pre>
    &lt;target name="basic-deps" description="--&gt; retrieve files from well formatted ivy repositories with dependencies"&gt;<br class="xooki-br"/>        &lt;ivy:install settingsRef="basic.settings" organisation="hibernate" module="hibernate" revision="2.1.8" from="${from-resolver}" to="${to-resolver}" transitive="true" /&gt;<br class="xooki-br"/>    &lt;/target&gt;
</pre>This target is very similar to the basic one, except it defines the transitivity mode to use. By writing, <em>transitive="true"</em>, we tell the task to retrieve the corresponding module and it's dependencies.<br class="xooki-br"/><br class="xooki-br"/>Ok let's call the target :
<div class="shell"><pre>Z:\ivy-repository>ant basic-deps<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>init-basic:<br class="xooki-br"/>:: Ivy 20060123130642 - 20060123130642 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>:: configuring :: file = Z:\ivy-repository\ivy-conf-basic.xml<br class="xooki-br"/><br class="xooki-br"/>basic-deps:<br class="xooki-br"/>:: installing [ hibernate | hibernate | 2.1.8 ] ::<br class="xooki-br"/>:: resolving dependencies ::<br class="xooki-br"/>        found [ hibernate | hibernate | 2.1.8 ] in libraries<br class="xooki-br"/>        found [ cglib | cglib | 2.0.2 ] in libraries<br class="xooki-br"/>        found [ apache | commons-collections | 2.1.1 ] in libraries<br class="xooki-br"/>        found [ apache | commons-logging | 1.0.4 ] in libraries<br class="xooki-br"/>        found [ dom4j | dom4j | 1.4 ] in libraries<br class="xooki-br"/>        found [ ehcache | ehcache | 0.9 ] in libraries<br class="xooki-br"/>        found [ odmg | odmg | 3.0 ] in libraries<br class="xooki-br"/>        found [ sun | jta | 1.0 ] in libraries<br class="xooki-br"/>        found [ apache | xalan | 2.4.0 ] in libraries<br class="xooki-br"/>        found [ apache | xerces | 2.4.0 ] in libraries<br class="xooki-br"/>        found [ sun | jdbc | 2.0 ] in libraries<br class="xooki-br"/>        found [ sun | jca | 1.0 ] in libraries<br class="xooki-br"/>        found [ sun | jaas | 1.0 ] in libraries<br class="xooki-br"/>        found [ c3p0 | c3p0 | 0.8.4.5 ] in libraries<br class="xooki-br"/>        found [ apache | commons-dbcp | 1.2.1 ] in libraries<br class="xooki-br"/>        found [ apache | commons-pool | 1.2 ] in libraries<br class="xooki-br"/>        found [ apache | commons-collections | 2.1 ] in libraries<br class="xooki-br"/>        found [ apache | xerces | 2.0.2 ] in libraries<br class="xooki-br"/>        found [ proxool | proxool | 0.8.3 ] in libraries<br class="xooki-br"/>        found [ jboss | jboss-cache | 1.1.1 ] in libraries<br class="xooki-br"/>        found [ opensymphony | oscache | 2.0 ] in libraries<br class="xooki-br"/>        found [ apache | commons-logging | 1.0.3 ] in libraries<br class="xooki-br"/>        found [ swarmcache | swarmcache | 1.0RC2 ] in libraries<br class="xooki-br"/>        found [ apache | commons-logging | 1.0.2 ] in libraries<br class="xooki-br"/>        found [ jgroups | jgroups | 2.2 ] in libraries<br class="xooki-br"/>:: downloading artifacts to cache ::<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/hibernate/jars/hibernate-2.1.8.jar">http://www.ibiblio.org/maven/hibernate/jars/hibernate-2.1.8.jar</a> ...<br class="xooki-br"/>...........<br class="xooki-br"/>............<br class="xooki-br"/>.. (944kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ hibernate | hibernate | 2.1.8 ]/hibernate.jar[jar] (97063ms)<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>SOME MINUTES LATER .... ;-)<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.4.jar">http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.4.jar</a> ...<br class="xooki-br"/>..<br class="xooki-br"/>......<br class="xooki-br"/>.. (37kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ apache | commons-logging | 1.0.4 ]/commons-logging.jar[jar] (24172ms)<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 14 minutes 57 seconds<br class="xooki-br"/>Z:\ivy-repository></pre>
</div>

We can see here that Ivy has resolved hibernate 2.1.8 and 24 depending modules. If we look at the ivy file for <a href="http://ivyrep.jayasoft.org/hibernate/hibernate/ivy-2.1.8.xml">hibernate 2.1.8</a>, we can see that it defines 17 dependencies. The 7 others that ivy retrieved, were transitive ones used in direct dependent modules of hibernate.<br class="xooki-br"/><br class="xooki-br"/>We can notice that we have retrieve 3 different revisions of apache commons-logging (1.0.2, 1.0.3, 1.0.4) and 2 revisions of commons-collections (1.2, 1.2.1). This is due to the fact that we use the "no conflict" <a href="../../configuration/conflict-managers.html">conflic manager</a> in the ivysettings file.<br class="xooki-br"/>We do not want to evict any modules because we are building our own repository !<br class="xooki-br"/><br class="xooki-br"/>8 modules artifacts have not been downloaded cause they have not been found on ibiblio with the ivysettings as it is.<br class="xooki-br"/>We will see how to handle this problem in the advanced tutorial.<br class="xooki-br"/><br class="xooki-br"/>If we look at our repository now, it starts to look to something good :<br class="xooki-br"/>
<div class="shell"><pre>Z:\ivy-repository>dir /s /B /A:-D ivy-local-repository<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-collections\ivys\ivy-2.1.1.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-collections\ivys\ivy-2.1.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-collections\jars\commons-collections-2.1.1.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-collections\jars\commons-collections-2.1.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-dbcp\ivys\ivy-1.2.1.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-dbcp\jars\commons-dbcp-1.2.1.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\jars\commons-lang-1.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-logging\ivys\ivy-1.0.2.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-logging\ivys\ivy-1.0.3.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-logging\ivys\ivy-1.0.4.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-logging\jars\commons-logging-1.0.2.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-logging\jars\commons-logging-1.0.3.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-logging\jars\commons-logging-1.0.4.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-pool\ivys\ivy-1.2.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-pool\jars\commons-pool-1.2.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\xalan\ivys\ivy-2.4.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\xalan\jars\xalan-2.4.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\xerces\ivys\ivy-2.0.2.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\xerces\ivys\ivy-2.4.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\xerces\jars\xerces-2.0.2.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\xerces\jars\xerces-2.4.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\xerces\jars\xmlParserAPIs-2.0.2.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\c3p0\c3p0\ivys\ivy-0.8.4.5.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\c3p0\c3p0\jars\c3p0-0.8.4.5.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\cglib\cglib\ivys\ivy-2.0.2.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\cglib\cglib\jars\cglib-full-2.0.2.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\dom4j\dom4j\ivys\ivy-1.4.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\dom4j\dom4j\jars\dom4j-1.4.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\ehcache\ehcache\ivys\ivy-0.9.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\ehcache\ehcache\jars\ehcache-0.9.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\hibernate\hibernate\ivys\ivy-2.1.8.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\hibernate\hibernate\jars\hibernate-2.1.8.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\jboss\jboss-cache\ivys\ivy-1.1.1.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\jgroups\jgroups\ivys\ivy-2.2.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\odmg\odmg\ivys\ivy-3.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\odmg\odmg\jars\odmg-3.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\opensymphony\oscache\ivys\ivy-2.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\proxool\proxool\ivys\ivy-0.8.3.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\proxool\proxool\jars\proxool-0.8.3.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\sun\jaas\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\sun\jca\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\sun\jdbc\ivys\ivy-2.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\sun\jta\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\swarmcache\swarmcache\ivys\ivy-1.0RC2.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\swarmcache\swarmcache\jars\swarmcache-1.0RC2.jar<br class="xooki-br"/><br class="xooki-br"/>Z:\ivy-repository></pre>
</div>

	<hr/><div class='toc-title toc-title-4'>Advanced repository - step 1</div><br class="xooki-br"/><h1>On the road to a professional repository</h1>
We will study in this section how to build a <strong>professionnal</strong> repository. What is a <strong>professionnal</strong> repository? Our vision is to say that a good quality repository must follow clear rules about projects naming and must offer corrects, usuables, configurables and verified project descriptors. In order to achieve those goals, we think that you have to build your own repository.<br class="xooki-br"/>We have seen in the previous example, that we could use some public repositories to begin to build our own repository. <br class="xooki-br"/>Nevertheless, the result is not at all the one that was expected. Indeed there is a problem with public repositories: their partial incompatibility.<br class="xooki-br"/>For example, in <a href="http://ivyrep.jayasoft.org">ivyrep</a> all commons-* projects belong to the apache organisation. In both ibiblio versions, it is not the case. The same problem could appear for other projects with other repositories, it is not the debate here.<br class="xooki-br"/><br class="xooki-br"/>To resolve some of the incompatibilities, we will use a feature introduced in ivy 1.3: <a href="configuration/namespaces.html">namespaces</a>.<br class="xooki-br"/><br class="xooki-br"/><h1>Using namespaces</h1>
In order to use namespaces, we first need to see what's happening when none are used on repositories that do not fit our needs.<br class="xooki-br"/>Let's take commons-lang 1.0 from ibiblio with a maven2 pom.<br class="xooki-br"/>First clean your cache and repository.
<div class="shell"><pre>Z:\ivy-repository>ant clean-cache clean-repo</pre></div>
Then call the good ant target : ant commons-lang-1-0-ibiblio-no-namespace
<div class="shell"><pre>Z:\ivy-repository>ant commons-lang-1-0-ibiblio-no-namespace<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>init-advanced:<br class="xooki-br"/>:: Ivy 20060125070719 - 20060125070719 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>:: configuring :: file = Z:\ivy-repository\ivy-conf-advanced.xml<br class="xooki-br"/><br class="xooki-br"/>commons-lang-1-0-ibiblio-no-namespace:<br class="xooki-br"/>:: installing [ commons-lang | commons-lang | 1.0 ] ::<br class="xooki-br"/>:: resolving dependencies ::<br class="xooki-br"/>        found [ commons-lang | commons-lang | 1.0 ] in ibiblio-maven2-nonamespace<br class="xooki-br"/>        found [ junit | junit | 3.7 ] in ibiblio-maven2-nonamespace<br class="xooki-br"/>:: downloading artifacts to cache ::<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar">http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar</a> ...<br class="xooki-br"/>.............. (62kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ commons-lang | commons-lang | 1.0 ]/commons-lang.jar[jar] (1313ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar">http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar</a> ...<br class="xooki-br"/>.............<br class="xooki-br"/>.............. (114kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ junit | junit | 3.7 ]/junit.jar[jar] (2360ms)<br class="xooki-br"/>:: installing in local-repository ::<br class="xooki-br"/>        published commons-lang to Z:\ivy-repository/ivy-local-repository/commons-lang/commons-lang/jars/commons-lang-1.0.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/commons-lang/commons-lang/ivys/ivy-1.0.xml<br class="xooki-br"/>        published junit to Z:\ivy-repository/ivy-local-repository/junit/junit/jars/junit-3.7.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/junit/junit/ivys/ivy-3.7.xml<br class="xooki-br"/>:: install resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   2   |   2   |   2   |   0   ||   2   |   2   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 6 seconds<br class="xooki-br"/>Z:\ivy-repository></pre></div>
If we take a look at the repository, we can see that we respect the ibiblio maven2 architecture, the organisation apache does not appear.
<div class="shell"><pre>Z:\ivy-repository>dir /s /B /A:-D ivy-local-repository<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\commons-lang\commons-lang\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\commons-lang\commons-lang\jars\commons-lang-1.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\ivys\ivy-3.7.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\jars\junit-3.7.jar</pre></div>
If you take a look at the ivy descriptor for commons-lang, you will see that the organisation is still commons-lang. It could not be another thing as we did not do anything for it.
<div><pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>	&lt;info organisation="commons-lang"<br class="xooki-br"/>		module="commons-lang"<br class="xooki-br"/>		revision="1.0"<br class="xooki-br"/>		status="integration"<br class="xooki-br"/>		publication="20051124062021"<br class="xooki-br"/>	/&gt;
</pre></div>

<h2>Introduction to namespaces</h2>
Let's see directly the result, we will have some explanations after.<br class="xooki-br"/>Clean your repo and cache, and call : ant commons-lang-1-0-ibiblio-with-namespace
<div class="shell"><pre>Z:\ivy-repository>ant commons-lang-1-0-ibiblio-with-namespace<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>init-advanced:<br class="xooki-br"/>:: Ivy non official version :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>:: configuring :: file = Z:\ivy-repository\ivy-conf-advanced.xml<br class="xooki-br"/><br class="xooki-br"/>commons-lang-1-0-ibiblio-with-namespace:<br class="xooki-br"/>:: installing [ apache | commons-lang | 1.0 ] ::<br class="xooki-br"/>:: resolving dependencies ::<br class="xooki-br"/>        found [ apache | commons-lang | 1.0 ] in ibiblio-maven2<br class="xooki-br"/>        found [ junit | junit | 3.7 ] in ibiblio-maven2<br class="xooki-br"/>:: downloading artifacts to cache ::<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar">http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar</a> ...<br class="xooki-br"/>............. (62kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ apache | commons-lang | 1.0 ]/commons-lang.jar[jar] (1094ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar">http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar</a> ...<br class="xooki-br"/>............................ (114kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ junit | junit | 3.7 ]/junit.jar[jar] (1641ms)<br class="xooki-br"/>:: installing in local-repository ::<br class="xooki-br"/>        published commons-lang to Z:\ivy-repository/ivy-local-repository/apache/commons-lang/jars/commons-lang-1.0.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/apache/commons-lang/ivys/ivy-1.0.xml<br class="xooki-br"/>        published junit to Z:\ivy-repository/ivy-local-repository/junit/junit/jars/junit-3.7.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/junit/junit/ivys/ivy-3.7.xml<br class="xooki-br"/>:: install resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   2   |   2   |   2   |   0   ||   2   |   2   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 5 seconds</pre></div>
Now if we look at our repository, it seems to look fine.
<div class="shell"><pre>Z:\ivy-repository>dir /s /B /A:-D ivy-local-repository<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\jars\commons-lang-1.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\ivys\ivy-3.7.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\jars\junit-3.7.jar</pre></div>
Have a look at the ivy file to see it it looks better than before. Ok, we have now our apache organisation.
<div><pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>	&lt;info organisation="apache"<br class="xooki-br"/>		module="commons-lang"<br class="xooki-br"/>		revision="1.0"<br class="xooki-br"/>		status="integration"<br class="xooki-br"/>		publication="20051124062021"<br class="xooki-br"/>	/&gt;
</pre></div>
<h2>How does this work ?</h2>
If we look at the ant target commons-lang-1-0-ibiblio-with-namespace, we can see that it uses a resolver called ibiblio-maven2. <br class="xooki-br"/>Let's find it... The configuration file used for this test is ivysettings-advanced.xml. This one includes ivy-maven2-ivysettings.xml where the required resolver is defined.<br class="xooki-br"/>Let's see it's definition :
<pre>&lt;ibiblio	name="ibiblio-maven2" <br class="xooki-br"/>                root="${ibiblio-maven2-root}" <br class="xooki-br"/>                pattern="${ibiblio-maven2-pattern}"<br class="xooki-br"/>                m2compatible="true"<br class="xooki-br"/>                namespace="ibiblio-maven2"<br class="xooki-br"/>/&gt;</pre>Ok, i see it, it is a ibiblio resolver for which we specify the root and the pattern. The important things here are the 2 other parameters.
<ul><li><b>m2compatible</b> is a flag telling that we allow reading POMs file and make some transformations on URLs regarding the organisation name. Indeed, maven transforms organisations like "org.apache" into "some_url/org/apache" to retrieve information on ibiblio repositories.</li>
<li><b>namespace</b> this attribute defines a domain in which same projects (meaning organsiation, module or revision) can be named whith differents kinds.</li></ul>

A namespace is defined by a set of rule, for ibiblio-maven2, we have declared some rules:<br class="xooki-br"/><h3>rule handling imported apache maven1 projects</h3>
<pre>&lt;rule&gt;	&lt;!-- imported apache maven1 projects --&gt;<br class="xooki-br"/>	&lt;fromsystem&gt;<br class="xooki-br"/>	    &lt;src org="apache" module=".+"/&gt;<br class="xooki-br"/>	    <br class="xooki-br"/>	    &lt;dest org="$m0" module="$m0"/&gt;<br class="xooki-br"/>	&lt;/fromsystem&gt;<br class="xooki-br"/>	&lt;tosystem&gt;<br class="xooki-br"/>	    &lt;src org="commons-.+" module="commons-.+" /&gt;<br class="xooki-br"/>	    &lt;src org="ant.*" module="ant.*" /&gt;<br class="xooki-br"/>	    ...<br class="xooki-br"/>	    &lt;src org="xmlrpc" module="xmlrpc" /&gt;<br class="xooki-br"/><br class="xooki-br"/>	    &lt;dest org="apache" module="$m0"/&gt;<br class="xooki-br"/>	&lt;/tosystem&gt;<br class="xooki-br"/>&lt;/rule&gt;</pre>
<div class="postit"><u>Note about regular expressions usage :</u>
In order to distinguish matching regular expressions found in organisation, module & revision the notation used prefixes the matching regular expression with the letters 'o', 'm' & 'r'.<br class="xooki-br"/>$o0 : the whole regular expression term in the organisation attribute<br class="xooki-br"/>$o1 : the first matching expression term that was marked in the organisation attribute<br class="xooki-br"/>...<br class="xooki-br"/>The same applies for modules : $m0, $m1, ...<br class="xooki-br"/>and for revisions : $r0, $r1, ...
</div>
<ul>
<li><b>fromsystem :</b> we define here that the projects defined in the system under the organisation called "apache" are transformed into the destination namespace (whose resolver it applies) into projects whose organisation is named with the module name, we don't care here about the revision. For example, the project ['apache', 'commons-lang', '1.0'] in the namespace system will be translated into ['commons-lang', 'commons-lang', '1.0'] in the ibiblio-maven2 resolver namespace.</li>
<li><b>tosystem :</b> we define here the reverse mapping, ie how to translate <em>apache</em> projects from ibiblio into real apache projects in the namespace system. The rule here, is telling that all projects matching commons-.+ (see it as java regular expression) for their organisation name and module name are transformed into projects whose organisation is apache with the module name as it was found. The same kind of rule is applied for others apache projects like ant, etc. For example, ['ant','ant','1.6.2'] in ibiblio-maven2 namespace will become ['apache','ant','1.6.2'] int the system namespace.</li>
</ul>
<h3>rule handling new apache projects</h3>
<pre>&lt;rule&gt; &lt;!-- new apache projects --&gt;<br class="xooki-br"/>    &lt;fromsystem&gt;<br class="xooki-br"/>        &lt;src org="apache" /&gt;<br class="xooki-br"/>        &lt;dest org="org.apache"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;<br class="xooki-br"/>    &lt;tosystem&gt;<br class="xooki-br"/>        &lt;src org="org.apache" /&gt;<br class="xooki-br"/>        &lt;dest org="apache" /&gt;<br class="xooki-br"/>    &lt;/tosystem&gt;<br class="xooki-br"/>&lt;/rule&gt;</pre>
The mapping adds or removes the package 'org' before the organisation name to conform to maven2 choices.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>Advanced repository - step 2</div><br class="xooki-br"/><h1>Building the professional repository</h1>
Now that we have been well prepared, let's go to a real life example of building our repository.<br class="xooki-br"/>We will now focus on a bigger example that uses different public repositories to retrieve the information.<br class="xooki-br"/>In this tutorial we will use, in order of preference :<ul><li>our home made repository</li><li>ivyrep official</li><li>ibiblio maven2</li></ul>
<h2>the resolvers used</h2>
<pre>&lt;resolvers&gt;<br class="xooki-br"/>    &lt;filesystem name="local-repository"&gt;<br class="xooki-br"/>        &lt;ivy pattern="${dest.repo.dir}/[organisation]/[module]/ivys/ivy-[revision].xml"/&gt;<br class="xooki-br"/>        &lt;artifact pattern="${dest.repo.dir}/[organisation]/[module]/[type]s/[artifact]-[revision].[type]"/&gt;<br class="xooki-br"/>    &lt;/filesystem&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;chain name="libraries" returnFirst="false"&gt;<br class="xooki-br"/>        &lt;resolver ref="local-repository" /&gt;<br class="xooki-br"/>        &lt;ivyrep name="official-ivy-rep"/&gt;<br class="xooki-br"/>        &lt;resolver ref="ibiblio-maven2" /&gt;<br class="xooki-br"/>    &lt;/chain&gt;<br class="xooki-br"/>&lt;/resolvers&gt;
</pre>
We start the chain with our home made repository because as we can expect, we consider this repository as good ivy file repository (that's why we create it). So all files that are in this repository are considered as valid and correct and usuable.<br class="xooki-br"/>The building process is then an iterative process. <br class="xooki-br"/>After each import of new projects into our repository, we check and modify the generated ivy files (or you do not as you want). The generated ivy files are those that were translated from a POM or those for which an artifact has been found without a module descriptor (ivy or pom).<br class="xooki-br"/><br class="xooki-br"/><h2>Let's go</h2>
What about to test our settings with a big project : hibernate 3.0<br class="xooki-br"/>Just run: ant advanced<br class="xooki-br"/><br class="xooki-br"/>Here we go !!!!!!!!<br class="xooki-br"/>
<div class="shell"><pre>Z:\build-a-ivy-repository>ant advanced<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>init-advanced:<br class="xooki-br"/>:: Ivy non official version :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>:: configuring :: file = Z:\build-a-ivy-repository\config\ivy-conf-advanced.xml<br class="xooki-br"/><br class="xooki-br"/>advanced:<br class="xooki-br"/>:: installing [ hibernate | hibernate | 3.0 ] ::<br class="xooki-br"/>:: resolving dependencies ::<br class="xooki-br"/>        found [ hibernate | hibernate | 3.0 ] in ibiblio-maven2<br class="xooki-br"/>        found [ apache | commons-logging | 1.0.4 ] in official-ivy-rep<br class="xooki-br"/>        found [ apache | ant | 1.6.3 ] in ibiblio-maven2<br class="xooki-br"/>        found [ c3p0 | c3p0 | 0.8.4.5 ] in official-ivy-rep<br class="xooki-br"/>        found [ proxool | proxool | 0.8.3 ] in official-ivy-rep<br class="xooki-br"/>        found [ ehcache | ehcache | 1.1 ] in official-ivy-rep<br class="xooki-br"/>        found [ apache | xerces | 2.5.0 ] in official-ivy-rep<br class="xooki-br"/>        found [ apache | commons-collections | 2.1.1 ] in official-ivy-rep<br class="xooki-br"/>        found [ opensymphony | oscache | 2.1 ] in ibiblio-maven2<br class="xooki-br"/>        found [ swarmcache | swarmcache | 1.0RC2 ] in official-ivy-rep<br class="xooki-br"/>        found [ apache | commons-collections | 2.1 ] in official-ivy-rep<br class="xooki-br"/>        found [ apache | commons-logging | 1.0.2 ] in official-ivy-rep<br class="xooki-br"/>        found [ jgroups | jgroups | 2.2 ] in official-ivy-rep<br class="xooki-br"/>        found [ jboss | jboss-cache | 1.2.2 ] in ibiblio-maven2<br class="xooki-br"/>        found [ jboss | jboss-system | 4.0.2 ] in ibiblio-maven2<br class="xooki-br"/>        found [ jboss | jboss-common | 4.0.2 ] in ibiblio-maven2<br class="xooki-br"/>        found [ jboss | jboss-minimal | 4.0.2 ] in ibiblio-maven2<br class="xooki-br"/>        found [ jboss | jboss-j2se | 200504122039 ] in ibiblio-maven2<br class="xooki-br"/>        found [ concurrent | concurrent | 1.3.4 ] in ibiblio-maven2<br class="xooki-br"/>        found [ jgroups | jgroups-all | 2.2.7 ] in ibiblio-maven2<br class="xooki-br"/>        found [ cglib | cglib | 2.0.2 ] in official-ivy-rep<br class="xooki-br"/>        found [ objectweb | asm | 1.3.4 ] in official-ivy-rep<br class="xooki-br"/>        found [ asm | asm | 1.4.3 ] in ibiblio-maven2<br class="xooki-br"/>        found [ javax.security | jacc | 1.0 ] in ibiblio-maven2<br class="xooki-br"/>        found [ dom4j | dom4j | 1.6 ] in ibiblio-maven2<br class="xooki-br"/>        found [ javax.transaction | jta | 1.0.1B ] in ibiblio-maven2<br class="xooki-br"/>        found [ hibernate | antlr | 2.7.5H3 ] in ibiblio-maven2<br class="xooki-br"/>        found [ odmg | odmg | 3.0 ] in official-ivy-rep<br class="xooki-br"/>:: downloading artifacts to cache ::<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/hibernate/hibernate/3.0/hibernate-3.0.jar">http://www.ibiblio.org/maven2/hibernate/hibernate/3.0/hibernate-3.0.jar</a> ...<br class="xooki-br"/>..................................................<br class="xooki-br"/>.. (1565kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ hibernate | hibernate | 3.0 ]/hibernate.jar[jar] (8500ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/hibernate/antlr/2.7.5H3/antlr-2.7.5H3.jar">http://www.ibiblio.org/maven2/hibernate/antlr/2.7.5H3/antlr-2.7.5H3.jar</a> ...<br class="xooki-br"/><br class="xooki-br"/>           SOME MINUTES LATER !!!!!!!!!!<br class="xooki-br"/><br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.4.jar">http://www.ibiblio.org/maven/commons-logging/jars/commons-logging-1.0.4.jar</a> ...<br class="xooki-br"/>........ (37kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ apache | commons-logging | 1.0.4 ]/commons-logging.jar[jar] (1110ms)<br class="xooki-br"/>:: installing in local-repository ::<br class="xooki-br"/>        published hibernate to Z:\build-a-ivy-repository/ivy-local-repository/hibernate/hibernate/jars/hibernate-3.0.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/hibernate/hibernate/ivys/ivy-3.0.xml<br class="xooki-br"/>        published antlr to Z:\build-a-ivy-repository/ivy-local-repository/hibernate/antlr/jars/antlr-2.7.5H3.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/hibernate/antlr/ivys/ivy-2.7.5H3.xml<br class="xooki-br"/>        published dom4j to Z:\build-a-ivy-repository/ivy-local-repository/dom4j/dom4j/jars/dom4j-1.6.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/dom4j/dom4j/ivys/ivy-1.6.xml<br class="xooki-br"/>missing artifact [ javax.security | jacc | 1.0 ]/jacc.jar[jar]: Z:\build-a-ivy-repository\cache\javax.security\jacc\jars\jacc-1.0.jar file does not exist<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/javax.security/jacc/ivys/ivy-1.0.xml<br class="xooki-br"/>        published asm to Z:\build-a-ivy-repository/ivy-local-repository/asm/asm/jars/asm-1.4.3.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/asm/asm/ivys/ivy-1.4.3.xml<br class="xooki-br"/>        published cglib-full to Z:\build-a-ivy-repository/ivy-local-repository/cglib/cglib/jars/cglib-full-2.0.2.jar<br class="xooki-br"/>        published cglib to Z:\build-a-ivy-repository/ivy-local-repository/cglib/cglib/jars/cglib-2.0.2.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/cglib/cglib/ivys/ivy-2.0.2.xml<br class="xooki-br"/>        published asm to Z:\build-a-ivy-repository/ivy-local-repository/objectweb/asm/jars/asm-1.3.4.jar<br class="xooki-br"/>        published asm-util to Z:\build-a-ivy-repository/ivy-local-repository/objectweb/asm/jars/asm-util-1.3.4.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/objectweb/asm/ivys/ivy-1.3.4.xml<br class="xooki-br"/>        published jboss-cache to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-cache/jars/jboss-cache-1.2.2.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-cache/ivys/ivy-1.2.2.xml<br class="xooki-br"/>        published jgroups-all to Z:\build-a-ivy-repository/ivy-local-repository/jgroups/jgroups-all/jars/jgroups-all-2.2.7.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/jgroups/jgroups-all/ivys/ivy-2.2.7.xml<br class="xooki-br"/>        published concurrent to Z:\build-a-ivy-repository/ivy-local-repository/concurrent/concurrent/jars/concurrent-1.3.4.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/concurrent/concurrent/ivys/ivy-1.3.4.xml<br class="xooki-br"/>        published jboss-j2se to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-j2se/jars/jboss-j2se-200504122039.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-j2se/ivys/ivy-200504122039.xml<br class="xooki-br"/>        published jboss-minimal to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-minimal/jars/jboss-minimal-4.0.2.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-minimal/ivys/ivy-4.0.2.xml<br class="xooki-br"/>        published jboss-system to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-system/jars/jboss-system-4.0.2.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-system/ivys/ivy-4.0.2.xml<br class="xooki-br"/>        published swarmcache to Z:\build-a-ivy-repository/ivy-local-repository/swarmcache/swarmcache/jars/swarmcache-1.0RC2.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/swarmcache/swarmcache/ivys/ivy-1.0RC2.xml<br class="xooki-br"/>missing artifact [ jgroups | jgroups | 2.2 ]/jgroups.jar[jar]: Z:\build-a-ivy-repository\cache\jgroups\jgroups\jars\jgroups-2.2.jar file does not exist<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/jgroups/jgroups/ivys/ivy-2.2.xml<br class="xooki-br"/>        published commons-logging to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-logging/jars/commons-logging-1.0.2.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-logging/ivys/ivy-1.0.2.xml<br class="xooki-br"/>        published oscache to Z:\build-a-ivy-repository/ivy-local-repository/opensymphony/oscache/jars/oscache-2.1.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/opensymphony/oscache/ivys/ivy-2.1.xml<br class="xooki-br"/>        published c3p0 to Z:\build-a-ivy-repository/ivy-local-repository/c3p0/c3p0/jars/c3p0-0.8.4.5.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/c3p0/c3p0/ivys/ivy-0.8.4.5.xml<br class="xooki-br"/>        published odmg to Z:\build-a-ivy-repository/ivy-local-repository/odmg/odmg/jars/odmg-3.0.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/odmg/odmg/ivys/ivy-3.0.xml<br class="xooki-br"/>        published proxool to Z:\build-a-ivy-repository/ivy-local-repository/proxool/proxool/jars/proxool-0.8.3.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/proxool/proxool/ivys/ivy-0.8.3.xml<br class="xooki-br"/>missing artifact [ javax.transaction | jta | 1.0.1B ]/jta.jar[jar]: Z:\build-a-ivy-repository\cache\javax.transaction\jta\jars\jta-1.0.1B.jar file does not exist<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/javax.transaction/jta/ivys/ivy-1.0.1B.xml<br class="xooki-br"/>        published jboss-common to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-common/jars/jboss-common-4.0.2.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/jboss/jboss-common/ivys/ivy-4.0.2.xml<br class="xooki-br"/>        published ant to Z:\build-a-ivy-repository/ivy-local-repository/apache/ant/jars/ant-1.6.3.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/apache/ant/ivys/ivy-1.6.3.xml<br class="xooki-br"/>        published commons-collections to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-collections/jars/commons-collections-2.1.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-collections/ivys/ivy-2.1.xml<br class="xooki-br"/>        published ehcache to Z:\build-a-ivy-repository/ivy-local-repository/ehcache/ehcache/jars/ehcache-1.1.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/ehcache/ehcache/ivys/ivy-1.1.xml<br class="xooki-br"/>        published commons-collections to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-collections/jars/commons-collections-2.1.1.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-collections/ivys/ivy-2.1.1.xml<br class="xooki-br"/>        published xercesImpl to Z:\build-a-ivy-repository/ivy-local-repository/apache/xerces/jars/xercesImpl-2.5.0.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/apache/xerces/ivys/ivy-2.5.0.xml<br class="xooki-br"/>        published commons-logging to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-logging/jars/commons-logging-1.0.4.jar<br class="xooki-br"/>        published ivy to Z:\build-a-ivy-repository/ivy-local-repository/apache/commons-logging/ivys/ivy-1.0.4.xml<br class="xooki-br"/>:: install resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   28  |   28  |   28  |   0   ||   30  |   27  |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 2 minutes 10 seconds<br class="xooki-br"/>Z:\build-a-ivy-repository></pre></div>

<h2>Analyzing the results</h2>
OK, it seems that we have a good start point for our repository.<br class="xooki-br"/>As you can see in the resolving part of the process :
<div class="shell"><pre>:: resolving dependencies ::<br class="xooki-br"/>        found [ hibernate | hibernate | 3.0 ] in ibiblio-maven2<br class="xooki-br"/>        found [ apache | commons-logging | 1.0.4 ] in official-ivy-rep<br class="xooki-br"/>        ...<br class="xooki-br"/>        found [ odmg | odmg | 3.0 ] in official-ivy-rep</pre></div>
some ivy files were retrieved from the <a href="http://ivyrep.jayasoft.org">ivyrep</a> the official ivy repository. That means that for these modules, you have in your home made repository good ivy files (with meaningful configurations, ...).<br class="xooki-br"/><br class="xooki-br"/><h2>And now</h2>
Now what you need to do is to download missing artifacts, those not on ibiblio (from sun, ...) and correct the generated ivy files. <br class="xooki-br"/>It is important to make a review of the generated ivy files because you could then benefit from all the power of ivy by defining for those projects good configurations and some other good things.<br class="xooki-br"/><br class="xooki-br"/>To ease finding generated files, just take a look at the generated resolve report in your cache. You will find there the projects for which a default ivy file was generated <br class="xooki-br"/><center><img src="samples/commons-lang1.0-dep-report-part.jpg" style="padding:1em;"/></center>
and you can see the resolvers that have resolved the modules. In our example, you will update the files whose project were resolved by the ibiblio-maven2 resolver.<br class="xooki-br"/><center><img src="samples/hibernate3.0-dep-report-part.jpg" style="padding:1em;"/></center>


	<hr/><div class='toc-title toc-title-3'>More examples</div><br class="xooki-br"/>If you have successfully followed and understood all the tutorials, maybe you still need to get a better picture of how to use Ivy in the real world.<br class="xooki-br"/><br class="xooki-br"/>Here are some links which can be interesting:<br class="xooki-br"/><br class="xooki-br"/><h3><a href="http://wiki.hippo.nl/display/OS/SAnt+build+system">SAnt</a></h3>
SAnt is an experimental build system based on Ant and Ivy. It can be interesting to use as is or to get insight on an interesting approach to manage your builds.<br class="xooki-br"/><br class="xooki-br"/><h3><a href="https://springmodules.dev.java.net/">Spring Modules</a></h3>
The spring modules project build system is based on Ant and Ivy, and it's really interesting to have a look at how a modularized project can take advantage of advanced ant and ivy features to make the build simpler.<br class="xooki-br"/><br class="xooki-br"/><h3><a href="http://www.opensymphony.com/webwork/">Webwork</a></h3>
The webwork project (which should become struts action framework) uses ant+ivy for their build, and thus make their framework very easy to use in an ant+ivy build system. They have a <a href="http://wiki.opensymphony.com/display/WW/Dependencies">page documenting how to use ivy with their framework</a>, which can be an interesting reading even if you don't plan to use webwork.<br class="xooki-br"/><br class="xooki-br"/><h3><a href="http://www.jayasoft.org/ivy/doc/articles/ease-multi-module.html">Easing multi module development</a></h3>
Johan stuyts, the author of SAnt, also contributed a nice article on his view of how to use Ivy on a multi module environment.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-2'>Reference</div><br class="xooki-br"/>Welcome to Ivy reference documentation!<br class="xooki-br"/><br class="xooki-br"/>If you don't know Ivy at all, give a glance at its features, the faq and the <a href="tutorial.html">tutorials</a> before digging into this reference documentation.<br class="xooki-br"/><br class="xooki-br"/><h1>Reference Overview</h1>
This documentation is decomposed in several parts:
<ul>
<li>Introduction</li>
<ul>
<li><a href="terminology.html">Terminology</a></li>
This part gives you the meaning of some words used all over ivy doc, such as organisation, module, configurations, settings, ...
<li><a href="concept.html">Main Concepts</a></li>
This part introduces the main concepts used in Ivy: dependency resolvers, variables, patterns, and also a good introduction to a central ivy concept: module configurations.
<li><a href="principle.html">How does it work ?</a></li>
As the title suggest, here you will have some explanations on how does ivy work internally, which can help to better understand and customize its use.
<li><a href="install.html">Installation</a></li>
This part describe how to install Ivy
</ul>
<li><a href="configuration.html">Settings Files</a></li>
This part is dedicated to the specification of the settings file of Ivy (usually called ivysettings.xml). It also gives the list of built-in dependency resolvers available in ivy.
<li><a href="ivyfile.html">Ivy Files</a></li>
This part is the reference of the specification of the ivy files, the files in which you describe your dependencies. If you have any question of what can be done or not in an ivy file, you will have the answer here.
<li><a href="ant.html">Using from Ant</a></li>
This part describes how to use ivy from ant. It's in this section that all ant tasks brought by ivy are specified.
<li><a href="standalone.html">Using standalone</a></li>
Even though Ivy is most often used from ant, it can also be used from the command line. This page describes how you can do it.
</ul><hr/><div class='toc-title toc-title-3'>Introduction</div><hr/><div class='toc-title toc-title-4'>Terminology</div><br class="xooki-br"/>Here are some terms used in Ivy, with their definitions in Ivy:<br/>
<h2>Ivy file</h2>
An ivy file is an xml file which is used to describe dependencies of a module (see below). It is usually named ivy.xml.<br class="xooki-br"/><h2>Settings</h2>
Ivy settings files are xml files used to configure ivy to indicate where the dependencies can be found and how. <br class="xooki-br"/><em>Prior to Ivy 2.0, these files were called configuration files and usually named ivyconf.xml. This resulted in a confusion between module configurations and configuration files, so they have been renamed in settings files. <br class="xooki-br"/>If you happen to fall on an ivyconf file or something called a configuration file, most of the time it's only a problem of update of the doc/tutorial/article. Feel free to report any problem like this if you find such inconsistencies in this documentation.</em><br class="xooki-br"/><h2>Organisation</h2>
An organisation is either a company or a simple group of person<br class="xooki-br"/>which produce software. Ivy handle only one level of organisation, so you cannot<br class="xooki-br"/>describe a company hierarchy with this concept. But it is used to group sofware<br class="xooki-br"/>produced by a same team, just to help find and classify them.<br/>
<i>Examples: apache, ibm, jayasoft</i><br class="xooki-br"/><h2>Module</h2>
A module in ivy is a piece of software that is reusable, and that <br class="xooki-br"/>follow a unique cycle of revision. <br/>
<i>Examples: hibernate, ant, ...</i><br class="xooki-br"/><h2>Artifact</h2>
An artifact is a single file produced by a company when releasing a module. In <br class="xooki-br"/>the java world, common artifacts are jars. In many cases, each revision of a <br class="xooki-br"/>module publish only one artifact (like log4j, for instance), but some of them<br class="xooki-br"/>publish many artifacts dependending on the use of the module (like ant, for instance).<br class="xooki-br"/><h2>Revision</h2>
A revision corresponds to one delivery of a module. It can either be a delivery<br class="xooki-br"/>of a release, a milestone, a beta version, a nightly build, or even a continuous<br class="xooki-br"/>build. All of them are considered revisions in ivy.<br class="xooki-br"/><h2><a name="branch">Branch</a></h2>
A branch corresponds to the standard meaning of a branch (or sometimes stream) in source control management tools.<br class="xooki-br"/>The head, or trunk, or main stream, is also considered as a branch in Ivy.<br class="xooki-br"/><h2>Configuration</h2>
A module configuration is a way to use or construct a module. Some modules may be used in different ways (think about hibernate which can be used inside or outside an application server), and this way may alter the artifacts you need (in the case of hibernate, jta.jar is needed only if it is used outside an application server).<br class="xooki-br"/>Moreover, a module may need some other modules and artifacts only at build time,<br class="xooki-br"/>and some others at runtime. All those differents ways to use or build a module<br class="xooki-br"/>are called in ivy configurations. <br class="xooki-br"/><br class="xooki-br"/>For more details on configurations and how they are used in ivy, please refer to the <a href="concept.html">main concepts page</a>.<br class="xooki-br"/><h2>Status</h2>
A module status indicates how stable a module revision can be considered. It can <br class="xooki-br"/>be used to consolidate the status of all the dependencies of a module, to prevent<br class="xooki-br"/>the use of an integration revision of a dependency in the release of your module.<br class="xooki-br"/>Three statuses are defined by default in ivy:
<ul>
<li>integration: revisions builded by a continuous build, a nightly build, and so on, fall in this category</li>
<li>milestone: revisions delivered to the public but not actually finished fall in this category</li>
<li>release: revision fully tested and labelled fall in this category</li>
</ul>
<span class="since">since 1.4</span> This list is <a href="configuration/statuses.html">configurable</a> in your configuration file.<br class="xooki-br"/><h2>Repository</h2>
What is called a repository in Ivy is a location where Ivy is able to find your modules artifacts and metadata (i.e. ivy files in most cases).<br class="xooki-br"/>Ivy can be used with complex repositories configured very finely. You can use <a href="concept.html">Dependency Resolvers</a> to do so.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>Main Concepts</div><br class="xooki-br"/><h1><a name="dependency-resolver"></a>Dependency Resolver</h1>
A dependency resolver is a pluggable class in ivy which is used to:
<ul>
<li>find dependencies ivy files</li>
<li>download dependencies artifacts</li>
</ul>
The notion of artifact "downloading" is large: artifact can be on a web site, or on the local file system of your machine. The download is thus the fact to bring a file from a repository to ivy cache.<br class="xooki-br"/><br class="xooki-br"/>Moreover, the fact that it is the responsibility of the resolver to find ivy files and download artifacts help to implement various resolving strategies.<br class="xooki-br"/><br class="xooki-br"/>As you see, a dependency resolver can be thought as a class responsible of describing a repository.<br class="xooki-br"/><br class="xooki-br"/>If you want to see which resolvers are available in ivy, you can go to the corresponding <a href="configuration/resolvers.html">configuration section</a><br class="xooki-br"/><br class="xooki-br"/><h1><a name="configurations">Module configurations explained</a></h1>
Module configurations are described in the terminology page as <em>a way to use or construct a module</em>. Configurations being a central part of Ivy, they need more explanations as a concept.<br class="xooki-br"/><br/>
When you define a way to use or construct a module, you are able to define which artifacts are published by this module in this configuration, and you are also able to define which dependencies are needed in this configuration.<br class="xooki-br"/><br class="xooki-br"/>Moreover, because dependencies in ivy are expressed on modules and not on artifacts, it is important to be able to define which configurations of the dependency are required in the configuration you define of your module. That's what is called <strong>configuration mapping</strong>.<br class="xooki-br"/><br class="xooki-br"/>If you use only simple modules and do not want to worry about configurations, you don't have to worry about them. They're still there under the hood, cause ivy can't work without configuration. But most of the time if you declare nothing, ivy assumes that the artifacts of your module are published in all configurations, and that all the dependencies configurations are required in all configurations. And it works in simple cases. But whenever you want to separate things within a module, or get more control over things published and got through dependencies resolution, configuration may answer most of your needs.<br class="xooki-br"/><br class="xooki-br"/>For details on how to declare your module configurations, how declare in which configuration your artifacts are published, and how to declare configuration mapping, please refer to <a href="ivyfile.html">ivy file documentation</a>. The <a href="tutorial/conf.html">configurations tutorial</a> is also a good place to go to learn more about this concept.<br class="xooki-br"/><br class="xooki-br"/><h1><a name="variables"></a>Variables</h1>
During configuration, ivy allows to define what are called ivy variables. Ivy variables can be seen as ant properties, and are used in a very similar way. In particular, you use a properties tag in the configuration file to load a properties file containing ivy variables and their values.<br class="xooki-br"/><br class="xooki-br"/>But the main differences between ant properties and ivy variables are that ivy variables can be overriden, whereas ant <br class="xooki-br"/>properties can't, and that they are defined in separate environment.<br class="xooki-br"/><br class="xooki-br"/>Actually all ant properties are imported into ivy variables when the configuration is done (if you call ivy from ant). <br class="xooki-br"/>This means that if you define an ant property after the call to configure, it will not be available as an ivy variable.<br class="xooki-br"/>On the other hand, ivy variables are NOT exported to ant, thus if you define ivy variables in ivy, do not try to use them as ant properties.<br class="xooki-br"/><br class="xooki-br"/>To use ivy variables, you just have to follow that same syntax as for ant properties:<br class="xooki-br"/>${<i>variablename</i>}<br class="xooki-br"/>where <i>variablename</i> is the name of the variable.<br class="xooki-br"/><br class="xooki-br"/>Finally, it's also important to be aware of the time of substitution of variables. This substitution is done as soon as possible. This means that when ivy encounter a reference to a variable, it tries to substitute it if such a variable is defined. Consequently, <strong>any later modification of the variable will not alter the value already substituted</strong>.<br class="xooki-br"/><br class="xooki-br"/>Moreover, in an ant environment, a bunch of variables are going to be set by default via the ant property file loading mechanism (actually they are first loaded as ant properties and then imported as ivy variables, see <a href="ant.html">Using from Ant</a>), and even in the ant properties themselves there is going to be eager substitution on loading, effectively making it impossible to override some variable purely via the ivysettings.properties file. Some variables will really only be able to be overriden via ant properties because of this.<br class="xooki-br"/><br class="xooki-br"/>Moreover, it's also important to understand the difference between ivy variables and ivy pattern tokens. <br class="xooki-br"/>See Patterns chapter below to see what pattern tokens are.<br class="xooki-br"/><h1><a name="patterns"></a>Patterns</h1>

Ivy patterns are used in many dependency resolvers and ivy tasks, and are a simple way to structure the way ivy works.<br class="xooki-br"/><br class="xooki-br"/>First let's give an example. You can for instance configure the file system dependency resolver by giving it<br class="xooki-br"/>a pattern to find artifacts. This pattern can be like this:<br class="xooki-br"/>myrepository/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]<br class="xooki-br"/><br class="xooki-br"/>This pattern indicates that the repository we use is in a directory called myrepository. <br class="xooki-br"/><br class="xooki-br"/>In this directory we have directories having for name the name of the organisation of the module we look for. <br class="xooki-br"/>Then we have a directory per module, each having for name the name of the module.<br class="xooki-br"/>Then in module directories we find a directory per artifact type (jars, wars, ivys, ...), in which we find artifacts named by the artifact id, followed by an hyphen, then the revision, a dot, and the artifact extension.<br class="xooki-br"/>Not too difficult to understand, isn't it ? That's it, you have understood the pattern concept !<br class="xooki-br"/><br class="xooki-br"/>To give a bit more explanation, a pattern is composed of tokens, which are replaced by actual values when evaluated for a particular artifact or module. Those tokens are different from variables because they are replaced differently for each artifact, whereas variables are usually given the same value.<br class="xooki-br"/><br class="xooki-br"/>You can mix variables and tokens in a pattern:<br class="xooki-br"/>${repository.dir}/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]<br/><br/>

The tokens available depends on where the pattern is used (will it be evaluated with artifacts or modules, for instance).<br class="xooki-br"/>But here are all the tokens currently available:
<ul>
<li>[organisation]</li> the organisation name
<li>[module]</li> the module name
<li>[branch]</li> the branch name
<li>[revision]</li> the revision name
<li>[artifact]</li> the artifact name (or id)
<li>[type]</li> the artifact type
<li>[ext]</li> the artifact file extension
<li>[conf]</li> the configuration name
<li>[originalname] <span class="since">(since 1.4)</span></li> the original artifact name (including the extension)
</ul>

Difference between type and extension are explained in ivy file documentation.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.2</span> [organization] can be used instead of [organisation].<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> Optinal parts can be used in patterns.<br class="xooki-br"/>This let the possibility to avoid some input when a token is not defined, instead of having only the token as blank. Parenthesis are used to delimit the optional part, and only one token can be found inside the parenthesis.<br class="xooki-br"/>So if you surround a token with '(' and ')', any other text which is between the parenthesis will be ignored if the token has no value.<br class="xooki-br"/><br class="xooki-br"/>For instance, suppose the pattern: "abc(def[type]ghi)"<br class="xooki-br"/>type = "jar" -> the substituted pattern: abcdefjarghi<br class="xooki-br"/>type = null or "" -> the substitued pattern: abc<br class="xooki-br"/><br class="xooki-br"/>A more real life example:<br class="xooki-br"/>The pattern <pre>[artifact](-[revision]).[ext]</pre> let you accept both myartifact-1.0.jar when a revision is set, and myartifact.jar (instead of myartifact-.jar) when no revision is set<br class="xooki-br"/>This is particularly useful when you need to keep control on artifact names.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> Extra attributes can be used as any other token in the patterns.<br class="xooki-br"/><br class="xooki-br"/><h1><a name="latest">Latest Strategy</a></h1>
Ivy often needs to know which revision between two has to be considered the "latest". For knowing that, it uses the concept of latest strategy. Indeed, there are several way to consider a revision to be the latest.<br class="xooki-br"/>You can choose an existing one or plug your own.<br class="xooki-br"/><br class="xooki-br"/>But before knowing which revision is the latest, ivy needs to be able to consider several revision of a module. Thus ivy has to get a list of files in a directory, and it uses the dependency resolver for that. So check if the dependency resolver you use is compatible with latest revisions before wondering why ivy do not manage to get your latest revision.<br class="xooki-br"/><br class="xooki-br"/>Finally, In order to get several revisions of a module, most of the time you need to use the [revision] token in your pattern, so that ivy gets all the files which match the pattern whatever the revision is. It's only then that the latest strategy is used to determine which of this revisions is the latest one.<br class="xooki-br"/><br class="xooki-br"/>Ivy has three built-in latest strategies:
<ul>
<li>latest-time</li> it compares the revisions date to know which is the latest. While this is often a good strategy in terms of pertinence, it has the drawback to be costful to compute with distant repositories. If you use ivyrep, for example, ivy has to ask the http server what is the date of each ivy file before knowing which is the latest.
<li>latest-revision</li> it compares the revisions as string, using an algorithm close to the one used in the php version_compare function.<br class="xooki-br"/>This algorithm takes into account special meaning of some text. For instance, with this strategy, 1.0-dev1 is considered before 1.0-alpha1, which in turn is before 1.0-rc1, which is before 1.0, which is before 1.0.1.
<li>latest-lexico</li>: it compares the revisions as string, using lexicographic order (the one used by java string comparison).
</ul>

See also how to configure new latest strategies <a href="configuration/latest-strategies.html">here</a>.<br class="xooki-br"/><br class="xooki-br"/><h1><a name="conflict">Conflict Manager</a></h1>
A conflict manager is able to select, among a list of module revisions in conflict, a list of revisions to keep.<br class="xooki-br"/>Yes, it can selects a list of revision, even if most conflicts manager select only one revision.<br class="xooki-br"/>But in some cases you will need to keep several revisions, and load in separate class loaders, for example.<br class="xooki-br"/><br class="xooki-br"/>A list of revisions is said to be in conflict if they correspond to the same module, i.e. the same organisation/module name couple.<br class="xooki-br"/><br class="xooki-br"/>The list of available conflict managers is available on the <a href="configuration/conflict-managers.html">conflict manager configuration page</a>.<br class="xooki-br"/><br class="xooki-br"/>To have more details on how to setup your conflict managers by module, see <a href="ivyfile/conflicts.html">conflicts</a> section in ivy file reference.<br class="xooki-br"/><br class="xooki-br"/><h1><a name="matcher">Pattern matcher</a></h1>
<span class="since">since 1.3</span>
At several places Ivy let uses pattern to match a set of objects. For instance, you can exclude several modules at once when declaring a dependency by using a pattern matching all the modules to exclude.<br class="xooki-br"/><br class="xooki-br"/>Ivy uses pluggable pattern matcher to match those object names. 3 are defined by default:
<ul>
<li>exact</li>This matcher matches only string when they are equal to the pattern one
<li>regexp</li>This matcher let you use regular expression as supported by the Pattern class of java 1.4 or greater
<li>glob</li>This matcher let you use unix like glob matcher, i.e. where the only meta characters are * which matches any sequence of characters and ? which matches exactly one character. Note that this matcher is available only with jakarta oro 2.0.8 in your classpath.
</ul>
Note also that with any matcher the character '*' has the special meaning of matching anything. This is particularly useful with default values which do not depend on the matcher.<br class="xooki-br"/><br class="xooki-br"/><h1><a name="extra">Extra attributes</a></h1>
<span class="since">since 1.4</span>
Several tags in ivy xml files are extensible with what is called extra attributes. <br class="xooki-br"/>The idea is very simple: if you need some more information to define your modules, you can add the attribute you want and you will then be able to access it as any other attribute in your patterns for example.<br class="xooki-br"/><br class="xooki-br"/>Example:<br class="xooki-br"/>Here is an ivy file with the attribute 'color' set to blue:
<pre>
&lt;ivy-module version="1.4"&gt;<br class="xooki-br"/>	&lt;info organisation="apache"<br class="xooki-br"/>	       module="foo"<br class="xooki-br"/>	       color="blue"<br class="xooki-br"/>	       status="integration"<br class="xooki-br"/>	       revision="1.59"<br class="xooki-br"/>	/&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>
Then you can use the extra attribute when you declare a dependency on foo:
<pre>
&lt;dependency org="apache" name="foo" color="blue" rev="1.5+" /&gt;
</pre>
And you can define your repository pattern as:
<pre>
${repository.dir}/[organisation]/[module]/[color]/[revision]/[artifact].[ext]
</pre>

Note that in order to use extra attributes, you will need to disable ivy file validation, since your files won't fulffill anymore the official ivy xsd. See the <a href="configuration/conf.html">configuration doc page</a> to see how to disable validation.<br class="xooki-br"/><h1><a name="checksum">Checksums</a></h1>
<span class="since">since 1.4</span>
Ivy allow to use checksums, also known as digester, to verify the correctness of a downloaded file.<br class="xooki-br"/><br class="xooki-br"/>For the moment Ivy supports md5 and sha1 algorithm.<br class="xooki-br"/><br class="xooki-br"/>The configuration of using md5 and/or sha1 can be done globally or by dependency resolver.<br class="xooki-br"/>Globally, use the ivy.checksums variable to list the check to be done (only md5 and sha1 are supported).<br class="xooki-br"/>On each resolver you can use the checksums attribute to override the global setting.<br class="xooki-br"/><br class="xooki-br"/>The setting is a comma separated list of checksum algorithm to use.<br class="xooki-br"/>During checking (at download time), the first checksum found is checked, and that's all. This means that if you have a "sha1, md5" setting, then if ivy finds a sha1 file, it will compare the downloaded file sha1 against this sha1, and if the comparison is ok, it will assume the file is ok. If no sha1 file is found, it will look for a md5 file. If none is found no checking is done.<br class="xooki-br"/>During publish, all listed checksum algorithms are computed and uploaded.<br class="xooki-br"/><br class="xooki-br"/>By default checksum algorithms are "sha1, md5".<br class="xooki-br"/><br class="xooki-br"/>If you want to change this default, you can set the variable ivy.checksums. Hence to disable checksum validation you just have to set ivy.checksums to "".<br class="xooki-br"/><br class="xooki-br"/><h1><a name="event">Events and Triggers</a></h1>
<span class="since">since 1.4</span>
When Ivy performs the dependency resolution and some other tasks, it fires events before and after the most important steps. You can listen to these events using Ivy API, or you can even register a trigger to perform a particular action when a particular event occur.<br class="xooki-br"/><br class="xooki-br"/>This is a particularly powerful and flexible feature which allow for example to perform a build of a dependency just before it is resolved, or follow what's happening during the dependency resolution process accuratly, and so on.<br class="xooki-br"/><br class="xooki-br"/>For more details about event and triggers, see the <a href="configuration/triggers.html">triggers</a> documentation page in the configuration section of this documentation.<br class="xooki-br"/><br class="xooki-br"/><h1><a name="circular">Circular Dependencies</a></h1>
<span class="since">since 1.4</span>
Circular dependencies can be either direct or indirect. For instance, if A depends on A it's a circular dependency, and if A depends on B which itself depends on A, this is also a circular dependency.<br class="xooki-br"/><br class="xooki-br"/>Prior to Ivy 1.4 circular dependencies where causing a failure in Ivy. As of Ivy 1.4, the behaviour of Ivy when it finds a circular dependency is configurable through a circular dependency strategy.<br class="xooki-br"/><br class="xooki-br"/>3 built-in strategies are available:
<ul>
<li>ignore</li> circular dependencies are only signaled in verbose messages
<li>warn</li> same as ignore, except that they are signaled as warning (default)
<li>error</li> halt the dependency resolution when a circular dependency is found. 
</ul>

See the <a href="configuration/conf.html">configuration page</a> to see how to configure the circular dependency strategy you want to use.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>How does it work ?</div><br class="xooki-br"/>Now that you have been introduced to main ivy terminology and concepts, it is time to give some explanations about how ivy works.<br class="xooki-br"/><br class="xooki-br"/><h1>Usual cycle of modules between different locations</h1>
<center><img src="images/main-tasks.png" /></center>
More details on ant tasks <a href="ant.html">here</a>.<br class="xooki-br"/><br class="xooki-br"/><h1>Configure</h1>
Ivy needs to be configured to be able to resolve your dependencies. This configuration is usually done with a configuration file, which defines a set of dependency resolvers. Each resolver is able to find ivy files and / or artifacts, given simple information such as organition, module, revision, artifact name, artifact type and artifact extension. <br class="xooki-br"/><br class="xooki-br"/>The configuration is also responsible for indicating which resolver should be used to resolve which module. This configuration is dependent only on your environment, i.e. where the modules and artifacts can be found. <br class="xooki-br"/><br class="xooki-br"/>A default configuration is used by ivy when none is given. This configuration uses ivyrep to resolve all modules.<br class="xooki-br"/><h1>Resolve</h1>
The resolve time is the moment when ivy actually resolve the dependencies of one module. It first needs to access the ivy file of the module for which it resolves the dependencies. <br class="xooki-br"/><br class="xooki-br"/>Then, for each dependency declared in this file, it asks the appropriate resolver (according to configuration) to find the module (i.e. either an ivy file for it, or its artifacts if no ivy file can be found). It also uses a filesystem based cache to avoid asking for a dependency if it is already in cache (at least if possible, which is not the case with latest revisions).<br class="xooki-br"/><br class="xooki-br"/>If the resolver is a composite one (i.e. a chain or a dual resolver), several resolvers may actually be called to find the module.<br class="xooki-br"/><br class="xooki-br"/>When the dependency module has been found, its ivy file is downloaded to ivy cache. Then ivy checks if it has itself dependencies, in which case it recursilvely traverse the graph of dependencies. <br class="xooki-br"/><br class="xooki-br"/>All over this traversal, conflict management are done to prevent the access to a module as soon as possible.<br class="xooki-br"/><br class="xooki-br"/>When ivy has traversed the whole graph, it asks to the resolvers to download the artifacts corresponding to each dependencies which are not already in cache and which have not been evicted by conflict managers. All downloads are made to ivy cache.<br class="xooki-br"/><br class="xooki-br"/>Finally, an xml report is generated in cache, which allows ivy to easily know what are all the dependencies of the module, without traversing the graph again.<br class="xooki-br"/><br class="xooki-br"/>After this resolve step, two main steps are possible: either build a path with artifacts in cache, or copy them to another directory structure.<br class="xooki-br"/><br class="xooki-br"/><h1>Retrieve</h1>
What is called retrieve in ivy is the fact to copy artifacts from the cache to another directory structure. This is done using a pattern, which indicates to ivy where the files should be copied.<br class="xooki-br"/><br class="xooki-br"/>For this, ivy uses the xml report in cache corresponding to the module it should retrieve to know which artifacts should be copied.<br class="xooki-br"/><br class="xooki-br"/>It also checks if the files are not already copied to maximize performances.<br class="xooki-br"/><h1>Building a path from cache</h1>
In some cases, it is preferable to use artifacts directly from the cache. Ivy is able to use the xml report generated at resolve time to build a path of all artifacts required.<br class="xooki-br"/><br class="xooki-br"/>This can be particularly useful especially when building plug-ins for IDE.<br class="xooki-br"/><br class="xooki-br"/><h1>Reports</h1>
Ivy is also able to generate readable reports describing the dependencies resolution.<br class="xooki-br"/><br class="xooki-br"/>This is done with a simple xsl transformation of the xml report generated at resolve time.<br class="xooki-br"/><br class="xooki-br"/><h1>Publish</h1>
Finally, Ivy can be used to publish a particular version of a module in your repository, so that it becomes available for futher resolve. This task is usually called either manually or from a continuous integration server for example.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>Best practices</div><br class="xooki-br"/>Here are some recommendations and best practices we have gathered throughout our experience and consultancies with our customers.<br class="xooki-br"/><br class="xooki-br"/><h1>Add module descriptors for all your modules</h1>
In Ivy world, module descriptors are ivy files, which are basically simple xml files describing both what the module produce as artifact and its dependencies.<br class="xooki-br"/><br class="xooki-br"/>It is a good practice to write or download module descriptors for all the modules involved in your development, even for your third party dependencies, and even if they don't provide themselves such module descriptors.<br class="xooki-br"/><br class="xooki-br"/>First it will seem like an extra work, and require time. But when you will have several modules using the same third party library, and than you will only need to add one line to your ivy file to get this library and all its own dependencies that you really need (if you have good module descriptors in your repository, especially with the use of module <a href="concept.html#configurations">configurations</a>). It will also be very helpful when you want to upgrade a dependency. One single change in your module ivy file and you will get the updated version with its updated (or not) dependencies.<br class="xooki-br"/><br class="xooki-br"/>Therefore we recommend to add ivy files for all the modules in your repository, you can even enforce this rule by setting the allownomd attribute to false on your <a href="configuration/resolvers.html">resolvers</a>. Hence you shouldn't need to use the dependency artifact inclusion/exclusion/specification feature of Ivy, which should only be used in very specific cases.<br class="xooki-br"/><br class="xooki-br"/><h1>Use your own enterprise repository</h1>
This is usually not a valid recommendation for open source projects, but for the enterprise world we strongly suggest to avoid relying on a public repository like maven ibiblio or ivyrep. Why? Well, there are a couple of reasons:
<ul>
<li>control</li> The main problem with this kind of public repositories is that you don't have control over the repository. This means that if a module descriptor is broken you cannot easily fixed it. Sure you can use a chain between a shared repository and the public one and put your fixed module descriptor in the shared repository so that it hide the one on the public repository, but this makes repository browsing and maintenance cumbersome. <br class="xooki-br"/>Even more problematic is the possible updates of the repository. We know that versions published in such repositories should be stable and not be updated, but we also frequently see that a module descriptor is buggy, or an artifact corrupted. We even see sometimes a new version published with the same name as the preceding one because the previous one was simply badly packaged. This can occur even to the best, it occured to us with Ivy 1.2 :-) But then we decided to publish the new version with a different name, 1.2a. But if the repository manager allow such updates, this means that what worked before can break. It can thus break your build reproducibility.
<li>reliability</li> Ibiblio maven repository is not particularly well known for its reliability (we often experience major slow down or even complete break of the site), and ivyrep is only supported by a small company (yes we are only a small company!). So slow down and site hang occurs also. And if the repository you rely on is down, this can cause major slow down in your development or release process.
<li>accuracy</li> a public repository usually contains much more than what you actually need (except maybe ivyrep which certainly features much less than what you need :-)). Is it a problem? We think so. We think that in an enterprise environment the libraries you use should step through some kind of validation process before being used in every projects of your company. And what better way to do so? Setup an enterprise repository with only the libraries you actually want to use. This will not only ensure a better quality of your application dependencies, but help to have the same versions everywhere, and even help when declaring your module dependencies, if you use a tool like IvyDE, the code completion will only show relevant information about your repository, with only the libraries you actually want to see.
</ul>
Note that it's not because you use an enterprise repository that you have to build it entirely by hand. Ivy features an <a href="use/install.html">install</a> task which can be used to install modules from a repository to another one, so it can be used to selectively install modules from a public repository to your enterprise repository, where you will then be able to ensure control, reliability and accuracy.<br class="xooki-br"/><br class="xooki-br"/><h1>Always use patterns with at least organisation and module</h1>
Ivy is very flexible and can accomodate a lot of existing repositories, using the concept of <a href="concept.html#pattern">patterns</a>. But if your repository doesn't exist yet, we strongly recommend to always use the organisation and the module name in your pattern, even for private repository where you put only your own modules (which all the same organisation). Why? Because Ivy listing feature rely on the token it can find in the pattern. If you have no organisation token in your pattern, Ivy won't be able to list the (only?) organisation in your repository. And this can be a problem for code completion in IvyDE, for example, but also for repository wide tasks like <a href="use/install.html">install</a> or <a href="use/repreport.html">repreport</a>.<br class="xooki-br"/><br class="xooki-br"/><h1>Public ivysettings.xml with public repositories</h1>
If you create a public repository, provide an url to corresponding <a href="configuration.html">ivysettings.xml</a>. It's pretty easy to do, and if someone want to leverage your repository, he will just have to call <a href="use/configure.html">configure</a> with the url of your ivysettings.xml, or <a href="configuration/include.html">include</a> it in its own configuration file, which makes it really easy to combine several public repositories.<br class="xooki-br"/><br class="xooki-br"/><h1>Dealing with integration versions</h1>
Very often especially when working in a team or with several modules, you will need to rely on intermediate, non finalized versions of your modules. These versions are what we call integration versions, because their main objective is to be integrated with other modules to make and test an application or a framework. <br class="xooki-br"/><br class="xooki-br"/>If you follow the continuous integration paradigm across modules, these integration versions can be produced by a continuous integration server, very frequently.<br class="xooki-br"/><br class="xooki-br"/>So, how can you deal with these, possibly numerous, integration versions?<br class="xooki-br"/><br class="xooki-br"/>There are basically two ways to deal with them, both ways being supported by Ivy:
<ul>
<li>use a naming convention like a special suffix</li> the idea is pretty simple, each time you publish a new integration of your module you give the same name to the version (in maven world this is for example 1.0-SNAPSHOT). The dependency manager should then be aware that this version is special because it changes over time, so that it does not trust its local cache if it already has the version, but check the date of the version on the repository and see if it hass changed. In Ivy this is supported using the <a href="ivyfile/dependency.html">changing attribute</a> on a dependency or by configuring the <a href="configuration/resolvers.html">changing pattern</a> to use for all your modules.
<li>create automatically a new version for each</li> in this case you use either a build number or a timestamp to publish each new integration version with a new version name. Then you can use one of the numerous ways in Ivy to <a href="ivyfile/dependency.html">express a version constraint</a>. Usually selecting the very latest one (using 'latest.integration' as version constraint) is enough.
</ul>

So, which way is the best? As often, it depends on your context, and if one of the two was really bad it wouldn't be supported in Ivy :-)<br class="xooki-br"/><br class="xooki-br"/>But usually we recommend to use the second one, because using a new version each time you publish a new version better fits the version identity paradigm, and can make <b>all</b> your builds reproducible, even integration one. And this is interesting because it enables, with some work in your build system, to introduce a mechanism to promote an integration build to a more stable status, like a milestone or a release. <br class="xooki-br"/><br class="xooki-br"/>Imagine you have a customer which comes on a monday morning and asks your latest version of your software, for testing or demonstration purpose. Obviously he needs it for the afternoon :-) Now if you have a continuous integration process and a good tracking of your changes and your artifacts, it may occur that you are actually able to fulfill his request without needing the use of a dolorean to give you some more time :-) But it may occur also that your latest version stable enough to be used for the purpose of the customer was actually built a few days ago, because the very latest just break a feature or introduce a new one you don't want to deliver. In this case, you can deliver this 'stable' integration build if you want, but be sure that a few days, or weeks, or even months later, the customer will ask for a bug fix on this demo only version. Why? Because it's a customer, and we all know how they are :-)<br class="xooki-br"/><br class="xooki-br"/>So, with a build promotion feature of any build in your repository, the solution would be pretty easy: when the customer ask for the version, you not only deliver the integration build, but you also promote it to a milestone status, for example. this promotion indicates that you should keep track of this version in a long period, to be able to come back to it and create a branch if needed.<br class="xooki-br"/><br class="xooki-br"/>Unfortunately Ivy does not by its own allow to have such reproducible builds out of the box, simply because Ivy is a dependency manager, not a build tool. But if you publish only versions with a distinct name and use Ivy features like versions constraint replacement during the publication or recursive delivery of modules, it can really help.<br class="xooki-br"/><br class="xooki-br"/>On the other hand, the main drawback of this solution is that it can produce a lot of intermediate versions, and  you will have to run some cleaning scripts in your repository unless your company name starts with a G and ends with oogle :-)<br class="xooki-br"/><br class="xooki-br"/><h1>Inlining dependencies or not?</h1>
With Ivy 1.4 you can resolve a dependency without even writing an ivy file. This pratice is called inlining. But what is it good for, and when should it be avoided?<br class="xooki-br"/><br class="xooki-br"/>Putting ivy dependencies in a separate file has the following advantages:
<ul>
<li>separate revision cycle</li> if your dependencies may change more often than your build, it's a good idea to separate the two, to isolate the two concepts: describing how to build / describing your project dependencies
<li>possibility to publish</li> if you describe dependencies of a module which can itself be reused, you will ant to publish it to a repository. In this case the publication is only possible if you have a separate ivy file
<li>more flexible</li> inline dependencies can only be used to express one dependency and only one. An ivy file can be used to express much more complex dependencies
</ul>
On the other hand, using inline dependencies is very useful when:
<ul>
<li>you want to use a custom task in your ant build</li> Without ivy you usually either copy the custom task jar in ant lib, which requires maintenance of your workstation installation, or use a manual copy or download and a taskdef with the appropriate classpath, which is better. But if you have several custom tasks, or if they have themselves dependencies, it can become cumbersome. Using Ivy with an inline dependency is an elegant way to solve this problem.
<li>you want to easily deploy an application</li> If you already build your application and its modules using Ivy, it is really easy to leverage your ivy repository to download your application and all its dependencies on the local filesystem, ready to be executed. If you also put your configuration files as artifacts in your repository (maybee packaged as a zip), the whole installation process can rely on ivy, easing the automatic installation of <b>any</b> version of your application available in your repository!
</ul>
<h1>Hire an expert</h1>
Build and dependency management is often considered with a too low level priority in the software development world. We often see build management implemented by developers when they have time. Even if this may seem like a time and money saving in the short term, it often turns out to be a very bad choice in the long term. Building software is not a simple task, when you want to ensure automatic, tested, fully reproducible builds, releases and installations. On the other hand, once a good build system fitting your very specific needs is setup, it can then only rely on a few people with a good understanding of what is going on, with a constant quality ensured. <br class="xooki-br"/><br class="xooki-br"/>Therefore hiring a build and dependency expert to analyse and improve your build and release system is most of the time a very good choice.<br class="xooki-br"/><br class="xooki-br"/><h1>Feedback</h1>
These best practices are the reflect of our own experience, but we do not pretend to own the unique truth about dependency management or even Ivy use.<br class="xooki-br"/><br class="xooki-br"/>So feel free to comment on this page to add your own experience feedback, suggestions or opinion.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>Installation</div><br class="xooki-br"/>There are basically two way to install Ivy. Either manually or automatically.<br class="xooki-br"/><h1>Manually</h1>
Download the version you want here, unpack the downloaded zip file wherever you want, and copy the ivy jar file in your ant lib directory (ANT_HOME/lib).<br class="xooki-br"/><br class="xooki-br"/>If you use ant 1.6.0 or superior, you can then simply go to the src/example/hello-ivy dir and run ant: if the build is successful, you have successfully installed Ivy !<br class="xooki-br"/><br class="xooki-br"/>If you use ant 1.5.1 or superior, you have to modify the build files in the examples:<br class="xooki-br"/>- remove the namespace section at their head: xmlns:ivy="antlib:org.apache.ivy.ant" <br class="xooki-br"/>- add taskdefs for ivy tasks:
<pre>
  &lt;taskdef name="ivy-configure" classname="org.apache.ivy.ant.IvyConfigure"/&gt;<br class="xooki-br"/>  &lt;taskdef name="ivy-resolve" classname="org.apache.ivy.ant.IvyResolve"/&gt;<br class="xooki-br"/>  &lt;taskdef name="ivy-retrieve" classname="org.apache.ivy.ant.IvyRetrieve"/&gt;<br class="xooki-br"/>  &lt;taskdef name="ivy-publish" classname="org.apache.ivy.ant.IvyPublish"/&gt; 
</pre>
- replace ivy:xxx tasks by ivy-xxx<br class="xooki-br"/>You can now run the build, if it is successful, you have successfully installed Ivy !<br class="xooki-br"/><br class="xooki-br"/>If the build is not successful, check the FAQ to see what can be the problem with the ivyrep resolver.<br class="xooki-br"/><br class="xooki-br"/><h2>Ivy dependendencies</h2>

The latest binary version of Ivy, 2.0.0-alpha-1, doesn't include the optional dependencies. To download them using Ivy, all you need is to have Ant installed and follow these instructions:<br class="xooki-br"/>1. open a shell or command line in the directory where you unzipped your binary distribution, where you can find the ivy-2.0.0-alpha-1-incubating.jar<br class="xooki-br"/>2. copy <a href="samples/build-install.xml">this build</a> script to the directory<br class="xooki-br"/>3. run the following command:
<pre>
ant -f build-install.xml
</pre>
4. That's all, you should now see the Ivy optional dependencies in the lib directory, organized per configuration (see the ivy.xml for details about the configurations and their use)<br class="xooki-br"/><br class="xooki-br"/><h1>Automatically</h1>
If you want to use Ivy only in your ant build scripts, and have an internet connection when you build, you can download Ivy from this site and use the downloaded version automatically, using this simple build snippet:
<pre>
    &lt;property name="ivy.install.version" value="1.4-RC1" /&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;condition property="ivy.home" value="${env.IVY_HOME}"&gt;<br class="xooki-br"/>        &lt;isset property="env.IVY_HOME" /&gt;<br class="xooki-br"/>    &lt;/condition&gt;<br class="xooki-br"/>    &lt;property name="ivy.home" value="${user.home}/.ivy" /&gt;<br class="xooki-br"/>    &lt;property name="ivy.jar.dir" value="${ivy.home}/jars" /&gt;<br class="xooki-br"/>    &lt;property name="ivy.jar.file" value="${ivy.jar.dir}/ivy.jar" /&gt;<br class="xooki-br"/>	<br class="xooki-br"/>    &lt;target name="download-ivy" unless="offline"&gt;<br class="xooki-br"/>        &lt;mkdir dir="${ivy.jar.dir}"/&gt;<br class="xooki-br"/>        &lt;!-- download Ivy from web site so that it can be used even without any special installation --&gt;<br class="xooki-br"/>        &lt;get src="http://www.jayasoft.org/downloads/ivy/${ivy.install.version}/ivy-${ivy.install.version}.jar"<br class="xooki-br"/>            dest="${ivy.jar.file}" usetimestamp="true"/&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/>	<br class="xooki-br"/>    &lt;target name="init-ivy" depends="download-ivy"&gt;<br class="xooki-br"/>    	&lt;!-- try to load ivy here from ivy home, in case the user has not already dropped<br class="xooki-br"/>              it into ant's lib dir (note that the latter copy will always take precedence).<br class="xooki-br"/>              We will not fail as long as local lib dir exists (it may be empty) and<br class="xooki-br"/>              ivy is in at least one of ant's lib dir or the local lib dir. --&gt;<br class="xooki-br"/>        &lt;path id="ivy.lib.path"&gt;<br class="xooki-br"/>            &lt;fileset dir="${ivy.jar.dir}" includes="*.jar"/&gt;<br class="xooki-br"/>        &lt;/path&gt;<br class="xooki-br"/>        &lt;taskdef resource="org/apache/ivy/ant/antlib.xml"<br class="xooki-br"/>                 uri="antlib:org.apache.ivy.ant" classpathref="ivy.lib.path"/&gt;<br class="xooki-br"/>    &lt;/target&gt;
</pre>

Then the only thing to do is to add the init-ivy target in the depends attribute of your targets using Ivy, and add ivy namespace to your build script. See the self contained <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk/src/example/go-ivy/build.xml">go-ivy</a> example for details about this.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-3'>Settings Files</div><br class="xooki-br"/>In order to work as you want, ivy sometimes need some settings. Actually, ivy can work with no specific settings at all, see the <a href="tutorial/defaultconf.html">default settings documentation</a> for details about that. But ivy is able <br class="xooki-br"/>to work in very different contexts. You just have to configure it properly.<br class="xooki-br"/><br class="xooki-br"/>Settings are specified through an xml file, usually called ivysettings.xml. To configure ivy from ant, you just have to call the configure task and pass it the path to your settings file (see <a href="use/configure.html">configure</a> task documentation for details).<br class="xooki-br"/><br class="xooki-br"/>Here is an example of settings file :
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>        &lt;properties file="${ivy.settings.dir}/ivysettings-file.properties" /&gt;<br class="xooki-br"/>        &lt;settings defaultCache="${cache.dir}" defaultResolver="ibiblio" checkUpToDate="false" /&gt;<br class="xooki-br"/>        &lt;resolvers&gt;<br class="xooki-br"/>                &lt;ibiblio name="ibiblio" /&gt;<br class="xooki-br"/>                &lt;filesystem name="internal"&gt;<br class="xooki-br"/>                        &lt;ivy pattern="${repository.dir}/[module]/ivy-[revision].xml" /&gt;<br class="xooki-br"/>                        &lt;artifact pattern="${repository.dir}/[module]/[artifact]-[revision].[ext]" /&gt;<br class="xooki-br"/>                &lt;/filesystem&gt;<br class="xooki-br"/>        &lt;/resolvers&gt;<br class="xooki-br"/>        &lt;modules&gt;<br class="xooki-br"/>                &lt;module organisation="jayasoft" name=".*" resolver="internal" /&gt;<br class="xooki-br"/>        &lt;/modules&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>

<br/>
Mainly, the settings enable to configure the default cache directory used by ivy and the dependency resolvers that it will use to resolve dependencies.<br class="xooki-br"/><i>Note: To work, this settings file needs a property file named ivysettings-file.properties in the same directory as the settings file, with ivy variables you want in it.</i><br class="xooki-br"/><br class="xooki-br"/>Some useful variables are available in settings files:
<ul>
<li>ivy.settings.dir</li> this variable references the directory in which the ivysettings itself is. This is available if the settings has been loaded as a file. In case of an url, it takes the part before the last slash of the url, if any. If the url has no slash, then this variable is not set.
<li>ivy.settings.file</li>the path of the settings file itself, it has been loaded as a file only. If it has been loaded as an url, this variable is not set
<li>ivy.settings.url</li>the url pointing to the settings file. This is set both when it has been loaded as a file or an url
</ul>

<span class="since">since 1.4</span> Note that all <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/lang/System.html#getProperties()">java system properties</a> are available as ivy variables in your settings file.<br class="xooki-br"/><br class="xooki-br"/><h1>Settings file structure</h1>

The settings file is structured in some parts and left other open. Indeed each resolver has its own structure, thus it's not the settings file itself which define the structure for the resolvers.<br class="xooki-br"/>
<pre>
ivysettings<br class="xooki-br"/>    <a href="configuration/property.html">property</a><br class="xooki-br"/>    <a href="configuration/properties.html">properties</a><br class="xooki-br"/>    <a href="configuration/conf.html">settings</a><br class="xooki-br"/>    <a href="configuration/include.html">include</a><br class="xooki-br"/>    <a href="configuration/classpath.html">classpath</a><br class="xooki-br"/>    <a href="configuration/typedef.html">typedef</a><br class="xooki-br"/>    <a href="configuration/latest-strategies.html">latest-strategies</a><br class="xooki-br"/>    <a href="configuration/version-matchers.html">version-matchers</a><br class="xooki-br"/>    <a href="configuration/triggers.html">triggers</a><br class="xooki-br"/>    <a href="configuration/parsers.html">parsers</a><br class="xooki-br"/>    <a href="configuration/conflict-managers.html">conflict-managers</a><br class="xooki-br"/>    <a href="configuration/outputters.html">outputters</a><br class="xooki-br"/>    <a href="configuration/namespaces.html">namespaces</a><br class="xooki-br"/>        <a href="configuration/namespace.html">namespace</a><br class="xooki-br"/>            <a href="configuration/namespace/rule.html">rule</a><br class="xooki-br"/>                <a href="configuration/namespace/fromtosystem.html">fromsystem</a><br class="xooki-br"/>                    <a href="configuration/namespace/src.html">src</a><br class="xooki-br"/>                    <a href="configuration/namespace/dest.html">dest</a><br class="xooki-br"/>                <a href="configuration/namespace/fromtosystem.html">tosystem</a><br class="xooki-br"/>                    <a href="configuration/namespace/src.html">src</a><br class="xooki-br"/>                    <a href="configuration/namespace/dest.html">dest</a><br class="xooki-br"/>    <a href="configuration/macrodef.html">macrodef</a><br class="xooki-br"/>        <a href="configuration/macrodef/attribute.html">attribute</a><br class="xooki-br"/>        any resolver<br class="xooki-br"/>    <a href="configuration/resolvers.html">resolvers</a><br class="xooki-br"/>        any resolver<br class="xooki-br"/>    <a href="configuration/modules.html">modules</a><br class="xooki-br"/>        <a href="configuration/module.html">module</a><br class="xooki-br"/>    <a href="configuration/statuses.html">statuses</a><br class="xooki-br"/>        <a href="configuration/status.html">status</a>
</pre>

<h1>ivysettings</h1>
<b>Tag:</b> ivysettings<br class="xooki-br"/><br class="xooki-br"/>Root tag of any ivysettings file.<br class="xooki-br"/><h2>Child elements</h2>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="configuration/property.html">property</a></td><td>set an ivy variable</td>
        <td>0..n</td></tr>
    <tr><td><a href="configuration/properties.html">properties</a></td><td>loads a properties file as ivy variables</td>
        <td>0..n</td></tr>
    <tr><td><a href="configuration/conf.html">settings</a></td><td>configures ivy with some defaults</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/include.html">include</a></td><td>includes another settings file</td>
        <td>0..n</td></tr>
    <tr><td><a href="configuration/classpath.html">classpath</a></td><td>add a location in the classpath used to load plugins</td>
        <td>0..n</td></tr>
    <tr><td><a href="configuration/typedef.html">typedef</a></td><td>defines new types in ivy</td>
        <td>0..n</td></tr>
    <tr><td><a href="configuration/latest-strategies.html">latest-strategies</a></td><td>defines latest strategies</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/parsers.html">parsers</a></td><td>defines module descriptor parsers</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/version-matchers.html">version-matchers</a></td><td>defines new version matchers</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/triggers.html">triggers</a></td><td>register triggers on ivy events</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/namespaces.html">namespaces</a></td><td>defines new namespaces</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/macrodef.html">macrodef</a></td><td>defines a new macro resolver</td>
        <td>0..n</td></tr>
    <tr><td><a href="configuration/resolvers.html">resolvers</a></td><td>defines dependency resolvers</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/conflict-managers.html">conflict-managers</a></td><td>defines conflicts managers</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/modules.html">modules</a></td><td>defines rules between modules and dependency resolvers</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/outputters.html">outputters</a></td><td>defines the list of available report outputters</td>
        <td>0..1</td></tr>
    <tr><td><a href="configuration/statuses.html">statuses</a></td><td>defines the list of available statuses</td>
        <td>0..1</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>property</div><br class="xooki-br"/><b>Tag:</b> property<br class="xooki-br"/><br class="xooki-br"/>Defines an ivy variable. <span class="since">since 1.3</span>

The optional override attribute enables to avoid overriding the previous value of the varable, which makes the definition behave like ant properties, which is particularly useful to define default values (values which are used only if they haven't been defined yet).<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the variable to define</td>
        <td>Yes</td></tr>
    <tr><td>value</td><td>the new value the variable must take</td>
        <td>Yes</td></tr>
    <tr><td>override</td><td>true if the previous value (if any) of the variable should overriden, false otherwise</td>
        <td>No, defaults to true</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;property name="myvar" value="myvalue"/&gt;
</pre>
Sets the variable myvar to the value myvalue.<br class="xooki-br"/><hr/>
<pre>
&lt;property name="myvar" value="myvalue" override="false"/&gt;
</pre>
Sets the variable myvar to the value myvalue only if myvar has not been set yet.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>properties</div><br class="xooki-br"/><b>Tag:</b> properties<br/>
<br/>
Loads a properties file into ivy variables. See variables chapter above for details about ivy variables.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>file</td><td>a path to a properties file to load</td>
        <td>Yes</td></tr>
    <tr><td>override</td><td>indicates if the variable found in the properties file should override their previous value, if any <span class="since">since 1.3</span></td>
        <td>No, defaults to true</td></tr>
</tbody>
</table>


	<hr/><div class='toc-title toc-title-4'>settings</div><br class="xooki-br"/><b>Tag:</b> settings<br class="xooki-br"/><br class="xooki-br"/>Configures some important ivy info: default cache, default resolver, ...<br class="xooki-br"/><br class="xooki-br"/>Default cache is used whenever a cache is not provided. It usually points to a directory in your filesystem. <strong>This should not point to a directory used as a repository!</strong><br class="xooki-br"/><span class="since">Since 2.0</span> Once the settings are loaded, the value of the defaultCache (either configured or the default value) is stored in an Ivy variable: ivy.cache.dir.<br class="xooki-br"/><br class="xooki-br"/>Default resolver is used whenever nothing else is configured in the modules section of the configuration file. It should give the name of a dependency resolver defined in the resolvers section of the configuration file.<br class="xooki-br"/><br class="xooki-br"/>Default latest strategy and conflict manager can also be configured here.<br class="xooki-br"/><br class="xooki-br"/>validate indicates if ivy files should generally be validate against xsd or not. This setting is only a default value, and can be overriden :<br class="xooki-br"/>1) in ant tasks<br class="xooki-br"/>2) in resolvers<br class="xooki-br"/>So if there is a setting in the resolver, it always win against all other settings.<br class="xooki-br"/><br class="xooki-br"/>checkUpToDate indicates to ivy if it must check date of artifacts before retrieving them (i.e. copying them from<br class="xooki-br"/>cache to another place in your filesystem). Usually it is a good thing to check date to avoid unnecessary copy, even if it's most of the time a local copy.<br class="xooki-br"/><br class="xooki-br"/>cacheIvyPattern and cacheArtifactPattern are used to configure the way ivy stores ivy files and artifacts in the cache. Usually you do not have to change this, unless you want to use the cache directly from another tool, which is not recommended.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>defaultCache</td><td>a path to a directory to use as default cache</td>
        <td>No, defaults to .ivy2/cache in user home</td></tr>
    <tr><td>defaultResolver</td><td>the name of the default resolver to use</td>
        <td>No, but all modules should be configured in the modules section if not provided</td></tr>
    <tr><td>defaultLatestStrategy</td><td>the name of the default latest strategy to use</td>
        <td>No, defaults to latest-revision</td></tr>
    <tr><td>defaultConflictManager</td><td>the name of the default conflict manager to use</td>
        <td>No, defaults to latest-revision</td></tr>
    <tr><td>defaultBranch</td><td>the default branch to use for all modules, except if they have a <a href="../configuration/module.html"> module specific branch setting</a>. <span class="since">since 1.4</span></td>
        <td>No, defaults to no default branch</td></tr>
    <tr><td><a name="circularDependencyStrategy"></a>circularDependencyStrategy</td><td>the name of the <a href="../concept.html#circular">circular dependency strategy</a> to use <span class="since">since 1.4</span></td>
        <td>No, defaults to warn</td></tr>
    <tr><td>validate</td><td>Indicates if ivy files should be validated against ivy.xsd or not.</td>
        <td>No, defaults to true</td></tr>
    <tr><td>checkUpToDate</td><td>Indicates if date should be checked before retrieving artifacts from cache</td>
        <td>No, defaults to true</td></tr>
    <tr><td>cacheIvyPattern</td><td>a pattern to indicate where ivy files should be put in cache</td>
        <td>No, defaults to [organisation]/[module]/ivy-[revision].xml</td></tr>
    <tr><td>cacheArtifactPattern</td><td>a pattern to indicate where artifact files should be put in cache</td>
        <td>No, defaults to [organisation]/[module]/[type]s/[artifact]-[revision].[ext]</td></tr>
    <tr><td>useRemoteConfig</td><td>true to configure ivyrep and ibiblio resolver from a remote configuration file (updated with changes in those repository structure if any) (<span class="since">since 1.2</span>)</td>
        <td>No, defaults to false</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>include</div><br class="xooki-br"/><b>Tag:</b> include<br class="xooki-br"/><br class="xooki-br"/>Includes another ivysettings file as if it were part of this one. <span class="since">since 1.3</span>

The included ivysettings file has to be a complete well formed ivysettings file, i.e. it does have to include the <pre>&lt;ivysettings&gt;</pre> tag.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>file</td><td>a path to the ivysettings file to include</td>
        <td>Yes</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;property name="myrepository" value="path/to/my/real/rep"/&gt;<br class="xooki-br"/>  &lt;conf defaultResolver="default"/&gt;<br class="xooki-br"/>  &lt;include file="path/to/ivysettings-default.xml"/&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
with ivysettings-default.xml:
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;property name="myrepository" value="path/to/rep" overwrite="false"/&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;ivyrep name="default" ivyroot="${myrepository}"/&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>

The included ivysettings defines a resolver named default, which is an ivyrep resolver, with its root configured as being the value of myrepository variable. This variable is given the value path/to/rep in the included file, but because the attribute overwrite is set to false, it will not overide the value given in the main ivysettings including this one, so the value used for myrepository will be path/to/my/real/rep.<br class="xooki-br"/><hr/>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;include file="ivysettings-macro.xml"/&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;mymacro name="includeworks" mymainrep="included/myrep" mysecondrep="included/secondrep"/&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt; 
</pre>
with ivysettings-macro.xml being the ivysettings example given on the <a href="../configuration/macrodef.html">macrodef documentation page</a>.<br class="xooki-br"/>This let reusing macro resolver easy.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>classpath</div><br class="xooki-br"/><b>Tag:</b> classpath<br class="xooki-br"/><br class="xooki-br"/>Includes a jar in the classpath used to load plugins. <span class="since">since 1.4</span>

This let you add ivy plugins without relying on ant classpath for instance, easing therefore the use of ivy in multiple execution environment (ant, standalone, IDE plugins, ...).<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>url</td><td>the url of a jar to add to the classpath</td>
        <td>Yes, unless file is specified</td></tr>
    <tr><td>file</td><td>a jar to add to the classpath</td>
        <td>Yes, unless url is specified</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;classpath file="${ivy.settings.dir}/custom-resolver.jar"/&gt;<br class="xooki-br"/>  &lt;typedef name="custom" classname="org.apache.ivy.resolver.CustomResolver"/&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;custom name="custom"/&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
Adds custom-resolver.jar found in the same directory as the ivysettings.xml file itself to the classpath, then define a custom resolver and use it.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;classpath url="<a href="http://www.myserver.com/ivy/custom-resolver.jar">http://www.myserver.com/ivy/custom-resolver.jar</a>"/&gt;<br class="xooki-br"/>  &lt;typedef name="custom" classname="org.apache.ivy.resolver.CustomResolver"/&gt;<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;custom name="custom"/&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>
Same as above, but find the jar on a web server.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>typedef</div><br class="xooki-br"/><b>Tag:</b> typedef<br/>
<br/>
Defines a new type in ivy. Useful to define new dependency resolvers, in particular, but also latest strategies.<br class="xooki-br"/>See <a href="../extend.html">how to write and plug your own dependency resolver</a> for details.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the type to define. This name is then used as an xml tag.</td>
        <td>Yes</td></tr>
    <tr><td>classname</td><td>the fully qualified class name of the type to define.</td>
        <td>Yes</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>latest-strategies</div><br class="xooki-br"/><b>Tag:</b> latest-strategies<br class="xooki-br"/><br class="xooki-br"/>Defines a list of <a href="../concept.html#latest">latest strategies</a> usable in ivy. Each latest strategy is identified by its name, given as an attribute.<br class="xooki-br"/>The child tag used for the latest strategy must be equal to a name of a latest strategy type (usually added with the typedef tag).<br class="xooki-br"/><br class="xooki-br"/>The latest strategies which are always included in ivy (and do not require anything in the configuration file) are:
<ul>
<li>latest-time</li> compares the revisions date to know which is the latest. While this is often a good <br class="xooki-br"/>strategy in terms of pertinence, it has the drawback to be costful to compute with distant repositories. If you use ivyrep, <br class="xooki-br"/>for example, ivy has to ask the http server what is the date of each ivy file before knowing which is the latest.
<li>latest-revision</li> compares the revisions as string, using an algorithm close to the one used in the php version_compare function.<br class="xooki-br"/>This algorithm takes into account special meaning of some text. For instance, with this strategy, 1.0-dev1 is considered<br class="xooki-br"/>before 1.0-alpha1, which in turn is before 1.0-rc1, which is before 1.0, which is before 1.0.1.
<li>latest-lexico</li> compares the revisions as string, using lexicographic order (the one used by java string comparison).
</ul>

<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any latest strategy</td><td>adds a latest strategy to the list of available strategies</td>
        <td>0..n</td></tr>
</tbody>
</table>

<h1>latest-revision</h1>
<span class="since">since 1.4</span> The latest-revision can now be configured to handle more words with special meanings than the one defined in php version_compare function.<br class="xooki-br"/><br class="xooki-br"/>Here is an example of how you can do so:
<pre>
&lt;latest-strategies&gt;<br class="xooki-br"/>  &lt;latest-revision name="mylatest-revision"&gt;<br class="xooki-br"/>    &lt;specialMeaning name="PRE" value="-2"/&gt;<br class="xooki-br"/>    &lt;specialMeaning name="QA" value="4"/&gt;<br class="xooki-br"/>    &lt;specialMeaning name="PROD" value="5"/&gt;<br class="xooki-br"/>  &lt;/latest-revision&gt;<br class="xooki-br"/>&lt;/latest-strategies&gt; 
</pre>
Knowing that the default special meaning words are the following:
<pre>
    &lt;specialMeaning name="dev" value="-1"/&gt;<br class="xooki-br"/>    &lt;specialMeaning name="rc" value="1"/&gt;<br class="xooki-br"/>    &lt;specialMeaning name="final" value="2"/&gt;
</pre>
You can even get rid or redefine the default special meanings by setting usedefaultspecialmeanings="false" on the latest-revision tag.<br class="xooki-br"/>Example:
<pre>
&lt;latest-strategies&gt;<br class="xooki-br"/>  &lt;latest-revision name="mylatest-revision" usedefaultspecialmeanings="false"&gt;<br class="xooki-br"/>    &lt;specialMeaning name="pre" value="-2"/&gt;<br class="xooki-br"/>    &lt;specialMeaning name="m" value="1"/&gt;<br class="xooki-br"/>    &lt;specialMeaning name="rc" value="2"/&gt;<br class="xooki-br"/>    &lt;specialMeaning name="prod" value="3"/&gt;<br class="xooki-br"/>  &lt;/latest-revision&gt;<br class="xooki-br"/>&lt;/latest-strategies&gt; 
</pre>


	<hr/><div class='toc-title toc-title-4'>parsers</div><br class="xooki-br"/><b>Tag:</b> parsers<br class="xooki-br"/><br class="xooki-br"/>Defines a list of module descriptor parsers usable in ivy. Each parser defines which resources (which descriptor file) it accepts.<br class="xooki-br"/>The child tag used for the parser must be equal to a name of a parser type (added with the typedef tag).<br class="xooki-br"/><br class="xooki-br"/>Note that when looking for a parser, ivy queries the parsers list in the reverse order. So the last parser in the list will be queried first. Consequently, if the last parser accepts all resources, the other parsers will never have a chance to parse the resource.<br class="xooki-br"/><br class="xooki-br"/>Two parsers are available by default and thus do not need to be declared in this section:
<ul>
<li>ivy file parser</li> this is the parser used for ivy xml files. This parser is used for resources that aren't accepted by any other parser.
<li>pom parser</li>this parser is able to parse maven2 pom files
</ul>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any module descriptor parser</td><td>adds a module descriptor parser to the list of available parsers</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>namespaces</div><br class="xooki-br"/><b>Tag:</b> namespaces<br class="xooki-br"/><br class="xooki-br"/>Namespaces are an advanced feature of Ivy which let you use resolvers in which module names and organisations are not consistent between each other.<br class="xooki-br"/><br class="xooki-br"/>For instance, if you want to use maven2 repository and ivyrep collectively, you will face some naming issues. For example all apache commons projects are declared to be part of the organisation apache in ivyrep whereas in maven2 ibiblio repository, they are declared to be part of the organisation of the same name of the module.<br class="xooki-br"/><br class="xooki-br"/>So if you try to use both maven2 and ivyrep repositories, you will face some issues like:<br class="xooki-br"/><quote>
How do I declare a dependency on commons-lang ?<br class="xooki-br"/>I have an error while trying to resolve module xxx. It says that it depends on [commons-httpclient commons-httpclient] ant that it isn't available.<br class="xooki-br"/>...<br class="xooki-br"/></quote>

Ivy has an answer to give to this kind of troubles, and this answer is called namespaces. In short, you can affect a namespace to each dependency resolver in Ivy, and each namespace defines rules to convert names from the system namespace to the defined namespace itself, and vice versa.<br class="xooki-br"/><br class="xooki-br"/>This very powerful feature is thoroughly used in the <a href="../tutorial/build-repository/advanced1.html">build your own repository tutorial</a>, and this is a good place to have examples of what can be done with namespaces.<br class="xooki-br"/><br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../configuration/namespace.html">namespace</a></td><td>defines a new namespace</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>namespace</div><br class="xooki-br"/><b>Tag:</b> namespace<br class="xooki-br"/><br class="xooki-br"/>Defines a new namespace. A namespace is identified by a name, which is used to reference the namespace in the resolvers using the namespace.<br class="xooki-br"/><br class="xooki-br"/>Namespaces overview is given in the <a href="../configuration/namespaces.html">namespaces</a> documentation.<br class="xooki-br"/><br class="xooki-br"/>A namespace mainly consists of a list of rules, each rule defining a translation between system namespace and the defined namespace, and vice versa.<br class="xooki-br"/><br class="xooki-br"/>There are two main possibilities for using these rules. By default, a namespace iterate through the rules, and when it finds one that translate the given name, it returns the translated name. But the namespace can be configured to do use the list as a translator chain: in this case, all rules are applied in order, the result of the first rule translation being passed to the second, and so on.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the namespace name</td>
        <td>Yes</td></tr>
    <tr><td>chainrules</td><td>true to indicate that namespaces rules should be chained, false otherwise</td>
        <td>No, defaults to false</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../configuration/namespace/rule.html">rule</a></td><td>defines a new namespace rule</td>
        <td>0..n</td></tr>
</tbody>
</table>
<h1>Example</h1>
<pre>
&lt;namespace name="test"&gt;<br class="xooki-br"/>  &lt;rule&gt;<br class="xooki-br"/>    &lt;fromsystem&gt;<br class="xooki-br"/>      &lt;src org="systemorg"/&gt;<br class="xooki-br"/>      &lt;dest org="A"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;<br class="xooki-br"/>    &lt;tosystem&gt;<br class="xooki-br"/>      &lt;src org="A"/&gt;<br class="xooki-br"/>      &lt;dest org="systemorg"/&gt;<br class="xooki-br"/>    &lt;/tosystem&gt;<br class="xooki-br"/>  &lt;/rule&gt;<br class="xooki-br"/>&lt;/namespace&gt;
</pre>

<pre>
&lt;namespace name="test"&gt;<br class="xooki-br"/>  &lt;rule&gt;<br class="xooki-br"/>    &lt;fromsystem&gt;<br class="xooki-br"/>      &lt;src org="systemorg2" module="system\-(.+)"/&gt;<br class="xooki-br"/>      &lt;dest org="B" module="$m1"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;<br class="xooki-br"/>    &lt;tosystem&gt;<br class="xooki-br"/>      &lt;src org="B" module=".+"/&gt;<br class="xooki-br"/>      &lt;dest org="systemorg2" module="system-$m0"/&gt;<br class="xooki-br"/>    &lt;/tosystem&gt;<br class="xooki-br"/>  &lt;/rule&gt;<br class="xooki-br"/>&lt;/namespace&gt;
</pre>

<pre>
&lt;namespace name="test" chainrules="true"&gt;<br class="xooki-br"/>  &lt;rule&gt;<br class="xooki-br"/>    &lt;fromsystem&gt;<br class="xooki-br"/>      &lt;src org="systemorg"/&gt;<br class="xooki-br"/>      &lt;dest org="A"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;<br class="xooki-br"/>    &lt;tosystem&gt;<br class="xooki-br"/>      &lt;src org="A"/&gt;<br class="xooki-br"/>      &lt;dest org="systemorg"/&gt;<br class="xooki-br"/>    &lt;/tosystem&gt;<br class="xooki-br"/>  &lt;/rule&gt;<br class="xooki-br"/>  &lt;rule&gt;<br class="xooki-br"/>    &lt;fromsystem&gt;<br class="xooki-br"/>      &lt;src module="systemmod"/&gt;<br class="xooki-br"/>      &lt;dest module="A"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;<br class="xooki-br"/>    &lt;tosystem&gt;<br class="xooki-br"/>      &lt;src module="A"/&gt;<br class="xooki-br"/>      &lt;dest module="systemmod"/&gt;<br class="xooki-br"/>    &lt;/tosystem&gt;<br class="xooki-br"/>  &lt;/rule&gt;<br class="xooki-br"/>  &lt;rule&gt;<br class="xooki-br"/>    &lt;fromsystem&gt;<br class="xooki-br"/>      &lt;src module="systemmod2"/&gt;<br class="xooki-br"/>      &lt;dest module="B"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;<br class="xooki-br"/>    &lt;tosystem&gt;<br class="xooki-br"/>      &lt;src module="B"/&gt;<br class="xooki-br"/>      &lt;dest module="systemmod2"/&gt;<br class="xooki-br"/>    &lt;/tosystem&gt;<br class="xooki-br"/>  &lt;/rule&gt;<br class="xooki-br"/>&lt;/namespace&gt;
</pre>

	<hr/><div class='toc-title toc-title-6'>rule</div><br class="xooki-br"/><b>Tag:</b> rule<br class="xooki-br"/><br class="xooki-br"/>Defines a new namespace rule. A rule defines a translation between system namespace and the defined namespace, and vice versa.<br class="xooki-br"/><br class="xooki-br"/>See <a href="../../configuration/namespace.html">namespace</a> doc for details.<br class="xooki-br"/><br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../../configuration/namespace/fromtosystem.html">fromsystem</a></td><td>defines the translation to apply from system namespace to the defined namespace</td>
        <td>1</td></tr>
    <tr><td><a href="../../configuration/namespace/fromtosystem.html">tosystem</a></td><td>defines the translation to apply from the defined namespace to system namespace</td>
        <td>1</td></tr>
</tbody>
</table>
	<hr/><div class='toc-title toc-title-7'>fromsystem / tosystem</div><br class="xooki-br"/><b>Tag:</b> fromsystem / tosystem<br class="xooki-br"/><br class="xooki-br"/>Defines a one way translation rule, i.e. a translation from system namespace to the defined namespace or vice versa.<br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../../configuration/namespace/src.html">src</a></td><td>defines a source name which can be accepted</td>
        <td>1..n</td></tr>
    <tr><td><a href="../../configuration/namespace/dest.html">dest</a></td><td>defines the translation to apply when a name is accepted by an src pattern</td>
        <td>1</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-8'>src</div><br class="xooki-br"/><b>Tag:</b> src<br class="xooki-br"/><br class="xooki-br"/>Defines the acceptation part of a translation rule. If a name matches this src, it will be translated using the dest part.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>org</td><td>the organisation to match as a regexp</td>
        <td>No, defaults to .*</td></tr>
    <tr><td>module</td><td>the module name to match as a regexp</td>
        <td>No, defaults to .*</td></tr>
    <tr><td>rev</td><td>the revision to match as a regexp</td>
        <td>No, defaults to .*</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-8'>dest</div><br class="xooki-br"/><b>Tag:</b> dest<br class="xooki-br"/><br class="xooki-br"/>Defines the translation part of a translation rule. If a name has matched a corresponding src, it will be translated using this dest part.<br class="xooki-br"/><br class="xooki-br"/>The new names can contain references to groups of the matched name, using a slightly modified regexp syntax. Indeed, referenced groups can be part of either the organisation, module or revision part of the original name. So, to reference the groups, you just have to add a letter identifying the part in which the group should be selected: o for organisation, m for module, and r for revision.<br class="xooki-br"/><br class="xooki-br"/>For instance, $o0 matches the whole matched organisation, and $m0 the whole matched module name. $o1 matches the first group of the matched organisation.<br class="xooki-br"/><br class="xooki-br"/>For details about regexp and groups, see the <a href="http://java.sun.com/j2se/1.4.2/docs/api/java/util/regex/Pattern.html">Pattern class documentation</a> in the jdk.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>org</td><td>the new organisation name</td>
        <td>No, defaults to $o0</td></tr>
    <tr><td>module</td><td>the new module name</td>
        <td>No, defaults to $m0</td></tr>
    <tr><td>rev</td><td>the new revision</td>
        <td>No, defaults to $r0</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
    &lt;fromsystem&gt;<br class="xooki-br"/>      &lt;src org="systemorg2" module="system\-(.+)"/&gt;<br class="xooki-br"/>      &lt;dest org="B" module="$m1"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;
</pre>
Matches modules from systemorg2 which have a name beginning with system followed by a minus and anything else, and translate it to organisation B and module the part following <pre>system-</pre> of the original name.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>macrodef</div><br class="xooki-br"/><b>Tag:</b> macrodef<br class="xooki-br"/><br class="xooki-br"/>Defines a new dependency resolver type based upon an other one. This definition is very similar to the macrodef feature of ant for defining macro tasks. <span class="since">since 1.3</span>

This task eases the lot the process of creating new dependency resolver, because it avoid writing java code.<br class="xooki-br"/><br class="xooki-br"/>It is generally used in combination with the <a href="../configuration/include.html">include</a> feature to help reusing macro at several places.<br class="xooki-br"/><br class="xooki-br"/>A macro is defined by writing the resolver it is equivalent to as if it were written in the resolver place, except that you can use attributes to pass parameters to the newly defined resolver type. Attributes are defined with a name and sometimes a default value, and are used using the following syntax: <pre>@{attributename}</pre>.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>name of the resover type created</td>
        <td>Yes</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../configuration/macrodef/attribute.html">attribute</a></td><td>defines an attribute for the macro resolver</td>
        <td>0..n</td></tr>
    <tr><td>any resolver</td><td>defines the base resolver upon which this macro is defined</td>
        <td>1</td></tr>
</tbody>
</table>
<h1>Examples</h1>
Defining a simple macro:
<pre>
  &lt;macrodef name="mymacro"&gt;<br class="xooki-br"/>    &lt;attribute name="mymainrep"/&gt;<br class="xooki-br"/>      &lt;filesystem name="fs1"&gt;<br class="xooki-br"/>        &lt;ivy pattern="@{mymainrep}/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>        &lt;artifact pattern="@{mymainrep}/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>      &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;/macrodef&gt;
</pre>
Using it:
<pre>
  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;mymacro name="default" mymainrep="path/to/myrep"/&gt;<br class="xooki-br"/>  &lt;/resolvers&gt;
</pre>
<hr/>
A complete example:
<pre>
&lt;ivysettings&gt;<br class="xooki-br"/>  &lt;macrodef name="mymacro"&gt;<br class="xooki-br"/>    &lt;attribute name="mymainrep"/&gt;<br class="xooki-br"/>    &lt;attribute name="mysecondrep"/&gt;<br class="xooki-br"/>    &lt;attribute name="myseconddirlayout" default="[organisation]/[module]/[type]s"/&gt;<br class="xooki-br"/>    &lt;chain&gt;<br class="xooki-br"/>      &lt;filesystem name="fs1"&gt;<br class="xooki-br"/>        &lt;ivy pattern="@{mymainrep}/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>        &lt;artifact pattern="@{mymainrep}/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>      &lt;/filesystem&gt;<br class="xooki-br"/>      &lt;filesystem name="fs2" latest="latest-time"&gt;<br class="xooki-br"/>        &lt;ivy pattern="@{mysecondrep}/@{myseconddirlayout}/ivy-[revision].xml"/&gt;<br class="xooki-br"/>        &lt;artifact pattern="@{mysecondrep}/@{myseconddirlayout}/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>      &lt;/filesystem&gt;<br class="xooki-br"/>    &lt;/chain&gt;<br class="xooki-br"/>  &lt;/macrodef&gt;<br class="xooki-br"/>	<br class="xooki-br"/>  &lt;resolvers&gt;<br class="xooki-br"/>    &lt;mymacro name="default" mymainrep="path/to/myrep" mysecondrep="path/to/secondrep"/&gt;<br class="xooki-br"/>    &lt;mymacro name="other" <br class="xooki-br"/>       mymainrep="path/to/myrep" <br class="xooki-br"/>       mysecondrep="path/to/secondrep" <br class="xooki-br"/>       myseconddirlayout="[module]/[type]s"/&gt;<br class="xooki-br"/>   &lt;/resolvers&gt;<br class="xooki-br"/>&lt;/ivysettings&gt;
</pre>

	<hr/><div class='toc-title toc-title-5'>attribute</div><br class="xooki-br"/><b>Tag:</b> attribute<br class="xooki-br"/><br class="xooki-br"/>Defines a macrodef attribute. See macrodef for details.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the attribute</td>
        <td>Yes</td></tr>
    <tr><td>default</td><td>the default value of the attribute if none is specified</td>
        <td>No, by default attribute are required</td></tr>
</tbody>
</table>


	<hr/><div class='toc-title toc-title-4'>resolvers</div><br class="xooki-br"/><b>Tag:</b> resolvers<br class="xooki-br"/><br class="xooki-br"/>Defines a list of dependency resolvers usable in ivy. Each dependency resolver is identified by its name, given as an attribute.<br class="xooki-br"/><br class="xooki-br"/>The child tag used for the dependency resolver must be equal to a name of a dependency resolver type (either built-in or added with the typedef tag).<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> Once defined, resolvers can be referenced by their name, using the following syntax:
<pre>
&lt;resolver ref="alreadydefinedresolver"/&gt;
</pre>
Note that this works only if the resolver has been already defined, and not if it is defined later in the ivysettings file.<br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any resolver</td><td>adds a resolver to the list of available resolvers</td>
        <td>1..n</td></tr>
</tbody>
</table>

<h1>Built-in Resolvers</h1>
Ivy comes with a set of built-in dependency resolvers able to answer to the most common needs. <br class="xooki-br"/><br class="xooki-br"/>If you don't find the one you want here, you can also check if some one has not contributed it in the links page, or even <a href="../extend.html">write your own</a>.<br class="xooki-br"/><br class="xooki-br"/>There are basically two types of resolver in Ivy: composite and standard resolvers. A composite resolver is a resolver which delegates the work to other resolvers. The other resolvers are standard resolvers.<br class="xooki-br"/><br class="xooki-br"/>Here is the list of built-in resolvers:<br class="xooki-br"/>
<table class="ivy-attributes">
<thead>
    <tr><th>Name</th><th>Type</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td><a href="../resolver/ivyrep.html">IvyRep</a></td><td>Standard</td><td>Finds ivy files on ivyrep and artifacts on ibiblio.</td></tr>
<tr><td><a href="../resolver/ibiblio.html">IBiblio</a></td><td>Standard</td><td>Finds artifacts on ibiblio.</td></tr>
<tr><td><a href="../resolver/filesystem.html">FileSystem</a></td><td>Standard</td><td>This very performant resolver finds ivy files and artifacts in your file system.</td></tr>
<tr><td><a href="../resolver/url.html">Url</a></td><td>Standard</td><td>Finds ivy files and artifacts in any repository accessible with urls.</td></tr>
<tr><td><a href="../resolver/vfs.html">Vfs</a></td><td>Standard</td><td>Finds ivy files and artifacts in any repository accessible with <a href="http://jakarta.apache.org/commons/vfs/">apache commons vfs</a>.</td></tr>
<tr><td><a href="../resolver/ssh.html">ssh</a></td><td>Standard</td><td>Finds ivy files and artifacts in any repository accessible with ssh.</td></tr>
<tr><td><a href="../resolver/sftp.html">sftp</a></td><td>Standard</td><td>Finds ivy files and artifacts in any repository accessible with sftp.</td></tr>
<tr><td><a href="../resolver/chain.html">Chain</a></td><td>Composite</td><td>Delegates the finding to a chain of sub resolvers.</td></tr>
<tr><td><a href="../resolver/dual.html">Dual</a></td><td>Composite</td><td>Delegates the finding of ivy files to one resolver and of artifacts to another.</td></tr>
</tbody>
</table>

<h1><a name="common">Common attributes</a></h1>
All resolvers of the same type share some common attributes detailed here:
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th><th>Composite</th><th>Standard</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name which identify the resolver</td>
        <td>Yes</td>
        <td>Yes</td>
        <td>Yes</td>
    </tr>
    <tr><td>validate</td><td>indicates if resolved ivy files should be validated against ivy xsd</td>
        <td>No, defaults to call setting</td>
        <td>Yes</td>
        <td>Yes</td>
    </tr>
    <tr><td>checkmodified</td><td>Indicates if this resolver should check lastmodified date to know if an ivy file is up to date.</td>
        <td>No, defaults to ${ivy.resolver.default.check.modified}</td>
        <td>No</td>
        <td>Yes</td>
    </tr>
    <tr><td>changingPattern</td><td>Indicates for which revision pattern this resolver should check lastmodified date to know if an artifact file is up to date. <span class="since">since 1.4</span></td>
        <td>No, defaults to none</td>
        <td>Yes</td>
        <td>Yes</td>
    </tr>
    <tr><td>changingMatcher</td><td>The name of the <a href="../concept.html#matcher">pattern matcher</a> to use to match a revision against the configured changingPattern. <span class="since">since 1.4</span></td>
        <td>No, defaults to exactOrRegexp</td>
        <td>Yes</td>
        <td>Yes</td>
    </tr>
    <tr><td>alwaysCheckExactRevision</td><td>Indicates if this resolver should check the given revision even if it's a special one (like latest.integration). <span class="since">since 1.3</span></td>
        <td>No, defaults to ${ivy.default.always.check.exact.revision}</td>
        <td>No</td>
        <td>Yes</td>
    </tr>
    <tr><td>namespace</td><td>The name of the namespace to which this resolver belong <span class="since">since 1.3</span></td>
        <td>No, defaults to 'system'</td>
        <td>Yes</td>
        <td>Yes</td>
    </tr>
    <tr><td>checkconsistency</td><td>true to check consistency of module descriptors found by this resolver, false to avoid consistency check <span class="since">since 1.3</span></td>
        <td>No, defaults to true</td>
        <td>No</td>
        <td>Yes</td>
    </tr>
    <tr><td>allownomd</td><td>true if the absence of module descriptor (usually an ivy file) is authorised for this resolver, false to refuse modules without module descriptor <span class="since">since 1.4</span></td>
        <td>No, defaults to true</td>
        <td>No (except dual)</td>
        <td>Yes</td>
    </tr>
    <tr><td>checksums</td><td>a comma separated list of <a href="../concept.html#checksum">checksum algorithms</a> to use both for publication and checking <span class="since">since 1.4</span></td>
        <td>No, defaults to ${ivy.checksums}</td>
        <td>No</td>
        <td>Yes</td>
    </tr>
    <tr><td>latest</td><td>The name of the latest strategy to use.</td>
        <td>No, defaults to 'default'</td>
        <td>Yes</td>
        <td>Yes</td>
    </tr>
</tbody>
</table>

<h1>Examples</h1>
<pre>
&lt;resolvers&gt;<br class="xooki-br"/>  &lt;filesystem name="1"&gt;<br class="xooki-br"/>    &lt;ivy pattern="${ivy.settings.dir}/1/[organisation]/[module]/ivys/ivy-[revision].xml"/&gt;<br class="xooki-br"/>    &lt;artifact pattern="${ivy.settings.dir}/1/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>  &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;chain name="chain1"&gt;<br class="xooki-br"/>    &lt;resolver ref="1"/&gt;<br class="xooki-br"/>    &lt;ivyrep name="ivyrep"/&gt;<br class="xooki-br"/>  &lt;/chain&gt;<br class="xooki-br"/>  &lt;chain name="chain2" returnFirst="true" dual="true"&gt;<br class="xooki-br"/>    &lt;resolver ref="1"/&gt;<br class="xooki-br"/>    &lt;ibiblio name="ibiblio"/&gt;<br class="xooki-br"/>  &lt;/chain&gt;<br class="xooki-br"/>&lt;/resolvers&gt;
</pre>
Defines a filesystem resolver, named '1', which is then used in two chains, the first which seconds the filesystem resolver with an ivyrep resolver, and second which seconds the filesystem resolver with an ibiblio resolver, and which returns the first module found, and uses the whole chain to download artifacts (see corresponding resolvers documentation for details about them).<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>IvyRep Resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">ivyrep</td></tr>
<tr><td class="title">Handle latest</td><td class="value">yes, at least if the repository server is apache based</td></tr>
<tr><td class="title">Handle publish</td><td class="value">no</td></tr>
</table>
This resolver usually uses <a href="http://ivyrep.jayasoft.org/">ivyrep</a> to find ivy files and ibiblio to find artifacts.<br class="xooki-br"/>However it can be configured to use other similar repositories.<br class="xooki-br"/><br class="xooki-br"/><i>Note that if no ivy file is found on ivyrep, then this resolver behaves like ibiblio resolver. Thus it's usually better to use this resolver instead of ibiblio one, which is provided mainly for compatibility reasons.</i><br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of standard resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>ivyroot</td><td>the root of the ivy repository.</td>
        <td>No, defaults to ${ivy.ivyrep.default.ivy.root}</td></tr>
    <tr><td>ivypattern</td><td>a pattern describing the layout of the ivy repository.</td>
        <td>No, defaults to ${ivy.ivyrep.default.ivy.pattern}</td></tr>
    <tr><td>artroot</td><td>the root of the artifacts repository.</td>
        <td>No, defaults to ${ivy.ivyrep.default.artifact.root}</td></tr>
    <tr><td>artpattern</td><td>a pattern describing the layout of the artifacts repository.</td>
        <td>No, defaults to ${ivy.ivyrep.default.artifact pattern}</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivyrep name="ivyrep" /&gt;
</pre>
A default ivyrep resolver, looking for ivy files on ivyrep and artifacts on ibiblio.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivyrep name="ivyrep" ivyroot="<a href="http://ivyrep.mycompany.com">http://ivyrep.mycompany.com</a>"/&gt;
</pre>
Looks for ivy files on and ivyrep like web site located at <a href="http://ivyrep.mycompany.com">http://ivyrep.mycompany.com</a>.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>IBiblio Resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">ibiblio</td></tr>
<tr><td class="title">Handle latest</td><td class="value">yes, at least if the repository server is apache based</td></tr>
<tr><td class="title">Handle publish</td><td class="value">no</td></tr>
</table>

This resolver usually uses ibiblio to find artifacts. <br class="xooki-br"/><br class="xooki-br"/>Prefer the use of ivyrep resolver which adds ivy file handling to this resolver.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> Using the m2compatible attribute, you can benefit from maven 2 repository compatibility (convert dots in organisation in slashes, search for poms, use transitive dependencies of poms). This setting also affects the default place where the resolver look for its artifacts to point to the maven2 repository. So setting this attribute to true is sufficient to use maven 2 ibiblio repository.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> When using the m2compatible flag, you can disable the use of poms by setting the usepoms flag to false. It is then roughly equivalent to an url resolver configured like this:
<pre>
&lt;url name="test" m2compatible="true"&gt;<br class="xooki-br"/>  &lt;artifact pattern="<a href="http://www.ibiblio.org/maven2/[organisation]/[module]/[revision]/[artifact]-[revision].[ext">http://www.ibiblio.org/maven2/[organisation]/[module]/[revision]/[artifact]-[revision].[ext</a>]"/&gt;<br class="xooki-br"/>&lt;/url&gt;
</pre>

<h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of standard resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>root</td><td>the root of the artifacts repository.</td>
        <td>No, defaults to ${ivy.ibiblio.default.artifact.root}</td></tr>
    <tr><td>pattern</td><td>a pattern describing the layout of the artifacts repository.</td>
        <td>No, defaults to ${ivy.ibiblio.default.artifact.pattern}</td></tr>
    <tr><td>m2compatible</td><td>True if this resolver should be maven2 compatible, false otherwise <span class="since">since 1.3</span></td>
        <td>No, defaults to false</td></tr>
    <tr><td>usepoms</td><td>True if this resolver should use maven poms when it is already in m2compatible mode, false otherwise <span class="since">since 1.4</span></td>
        <td>No, defaults to true</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>File System resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">filesystem</td></tr>
<tr><td class="title">Handle latest</td><td class="value">yes</td></tr>
<tr><td class="title">Handle publish</td><td class="value">yes</td></tr>
</table><br/>

This resolver uses the file system to resolve ivy files and artifacts. It presents the advantage to usually have very good performances. Moreover, it is easy to setup using basic OS file sharing mechanism.<br class="xooki-br"/><br class="xooki-br"/>The configuration of such a resolver is mainly done through ivy and artifact patterns, indicating where ivy files and artifacts can be found in the file system. You can indicate a list of pattern which will be checked one after the other.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> Using the m2compatible attribute, this resolver will convert dots found in organisation in slashes like maven2 does for groupId. For instance, it will transform the organisation from 'com.company' into 'com/company' when replacing the token [organisation] in your pattern.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of standard resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>m2compatible</td><td>True if this resolver should be maven2 compatible, false otherwise <span class="since">since 1.3</span></td>
        <td>No, defaults to false</td></tr>
    <tr><td>local</td><td>True if this resolver should be considered local, false otherwise <span class="since">since 1.4</span>. See useOrigin attribute on the <a href="use/resolve.html">resolve</a> task for details.</td>
        <td>No, defaults to true</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>ivy</td><td>defines a pattern for ivy files, using the pattern attribute</td>
        <td>0..n</td></tr>
    <tr><td>artifact</td><td>defines a pattern for artifacts, using the pattern attribute</td>
        <td>1..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>Url Resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">url</td></tr>
<tr><td class="title">Handle latest</td><td class="value">yes with http urls (and apache server) and with file urls, no with other urls</td></tr>
<tr><td class="title">Handle publish</td><td class="value">no</td></tr>
</table>

<br/>
This resolver is one of the most generic, in fact most of the previous resolvers can be obtained by a particular configuration of this one. Indeed it uses urls to find ivy files and artifacts. The urls it uses are defined through ivy and artifact children, each giving a pattern to find ivy files or artifacts.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of standard resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>m2compatible</td><td>True if this resolver should be maven2 compatible, false otherwise <span class="since">since 1.3</span></td>
        <td>No, defaults to false</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>ivy</td><td>defines a pattern for ivy files, using the pattern attribute</td>
        <td>0..n</td></tr>
    <tr><td>artifact</td><td>defines a pattern for artifacts, using the pattern attribute</td>
        <td>1..n</td></tr>
</tbody>
</table>

<h1>Example</h1>
<pre>
&lt;url name="two-patterns-example"&gt;<br class="xooki-br"/>  &lt;ivy pattern="<a href="http://ivyrep.mycompany.com/[module]/[revision]/ivy-[revision].xml">http://ivyrep.mycompany.com/[module]/[revision]/ivy-[revision].xml</a>" /&gt;<br class="xooki-br"/>  &lt;artifact pattern="<a href="http://ivyrep.mycompany.com/[module]/[revision]/[artifact]-[revision].[ext">http://ivyrep.mycompany.com/[module]/[revision]/[artifact]-[revision].[ext</a>]" /&gt;<br class="xooki-br"/>  &lt;artifact pattern="<a href="http://ivyrep.mycompany.com/[module]/[revision]/[artifact].[ext">http://ivyrep.mycompany.com/[module]/[revision]/[artifact].[ext</a>]" /&gt;<br class="xooki-br"/>&lt;/url&gt;
</pre>
Looks for ivy files in one place and for artifacts in two places: with or without revision in name (revision being already in the directory structure).<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>Chain Resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">chain</td></tr>
<tr><td class="title">Handle latest</td><td class="value">depends on sub resolvers</td></tr>
<tr><td class="title">Handle publish</td><td class="value">delegates to first sub resolver in chain</td></tr>
</table>

This resolver is only a container of a chain of other resolvers. The sub resolvers can be any resolver, including a chain. An attribute enable to indicate if the chain must be iterated after the first found or not (at least when asking for a latest revision). If the chain is iterated, then it's the latest among the ones found that is returned. If the chain is not iterated, then it's the first found which is returned.<br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of composite resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>returnFirst</td><td>true if the first found should be returned.</td>
        <td>No, defaults to false</td></tr>
    <tr><td>dual</td><td>true if the chain should behave like a dual chain. <span class="since">since 1.3</span></td>
        <td>No, defaults to false</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any resolver</td><td>a sub resolver to use</td>
        <td>1..n</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;chain name="test"&gt;<br class="xooki-br"/>  &lt;filesystem name="1"&gt;<br class="xooki-br"/>    &lt;ivy pattern="${ivy.settings.dir}/1/[organisation]/[module]/ivys/ivy-[revision].xml"/&gt;<br class="xooki-br"/>    &lt;artifact pattern="${ivy.settings.dir}/1/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>  &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;ivyrep name="2"/&gt;<br class="xooki-br"/>&lt;/chain&gt;
</pre>
Both a filesystem and ivyrep will be used to look for ivy files. If a dynamic revision is required, then both the filesystem and ivyrep will be queried to find the most recent revision among the two resolvers. Once the most recent revision is found in one resolver, it's the same resolver which will be used to download artifacts.<br class="xooki-br"/><hr/>
<pre>
&lt;chain name="test" returnFirst="true"&gt;<br class="xooki-br"/>  &lt;filesystem name="1"&gt;<br class="xooki-br"/>    &lt;ivy pattern="${ivy.settings.dir}/1/[organisation]/[module]/ivys/ivy-[revision].xml"/&gt;<br class="xooki-br"/>    &lt;artifact pattern="${ivy.settings.dir}/1/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>  &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;ivyrep name="2"/&gt;<br class="xooki-br"/>&lt;/chain&gt;
</pre>
Same as before, except that if a revision is found in the filesystem then ivyrep will not be queried: its the filesystem which will be used for both the ivy file and the artifacts.<br class="xooki-br"/><hr/>
<pre>
&lt;chain name="test" dual="true"&gt;<br class="xooki-br"/>  &lt;filesystem name="1"&gt;<br class="xooki-br"/>    &lt;ivy pattern="${ivy.settings.dir}/1/[organisation]/[module]/ivys/ivy-[revision].xml"/&gt;<br class="xooki-br"/>    &lt;artifact pattern="${ivy.settings.dir}/1/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/&gt;<br class="xooki-br"/>  &lt;/filesystem&gt;<br class="xooki-br"/>  &lt;ivyrep name="2"/&gt;<br class="xooki-br"/>&lt;/chain&gt;
</pre>
Same as first example, except that once a module is found by either filesystem or ivyrep, then it's the whole chain which will be queried to download the artifacts. So in this case ivy file and artifacts may be split across the two resolvers for the same module.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>Dual resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">dual</td></tr>
<tr><td class="title">Handle latest</td><td class="value">depends on sub resolvers</td></tr>
<tr><td class="title">Handle publish</td><td class="value">delegates to ivy sub resolver if artifact to publish is of "ivy" type, to artifact sub resolver otherwise</td></tr>
</table>

This resolver delegates its job to one resolver for ivy files and another for artifacts.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of composite resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>allownomd</td><td>true if the absence of module descriptor (usually an ivy file) is authorised for this resolver, false to refuse modules without module descriptor <span class="since">since 1.4</span></td>
        <td>No, defaults to true</td>
    </tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any resolver</td><td>two resolvers, the first being the ivy resolver, the second the artifact resolver</td>
        <td>2</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>sftp resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">sftp</td></tr>
<tr><td class="title">Handle latest</td><td class="value">yes</td></tr>
<tr><td class="title">Handle publish</td><td class="value">yes</td></tr>
</table>

<br/>
This resolver can be used when your ivy repository is located on a server accessible via sftp. The secured nature of sftp and its wide spread implementation on most *nix servers makes this resolver a very good candidate in an enterprise environment. <span class="since">since 1.4</span>

If your server supports ssh but not sftp, there is also an <a href="../resolver/ssh.html">ssh resolver</a>.<br class="xooki-br"/><br class="xooki-br"/>Note that sftp is also supported by vfs, so you can use a vfs resolver instead. The advantage of this resolver is that you have a better control over authentication, it can prompt for username/password credentials, or you can use private/public key authentication, which is not possible with the vfs resolver. When it prompts for username/password, it uses a Swing dialog, which is not possible in a headless environment. If you want to prompt for the credentials on the command line, use ant input task for example before calling ivy.<br class="xooki-br"/><br class="xooki-br"/>All necessary connection parameters can be set here via attributes.<br class="xooki-br"/>However all attributes defined in the pattern url of the resolver will have higher priority and will overwrite the values given here. To specify connection parameters in the pattern, you have to specify a full url and not just a path as pattern.<br class="xooki-br"/>e.g. pattern="/path/to/my/repos/[artifact].[ext]" will use all connection parameters from this class<br class="xooki-br"/>e.g. pattern="s<a href="ftp://myserver.com/path/to/my/repos/[artifact].[ext">ftp://myserver.com/path/to/my/repos/[artifact].[ext</a>]" will use all parameters from the attributes with the exception of the host, which will be "myserver.com"<br class="xooki-br"/>e.g. pattern="s<a href="ftp://user:geheim@myserver.com:8022/path/to/my/repos/[artifact].[ext">ftp://user:geheim@myserver.com:8022/path/to/my/repos/[artifact].[ext</a>]" will use only the keyFile and keyFilePassword from the attributes (if needed). Rest will come from the url.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>Note that the authentication features of this resolver are exactly the same as the ssh resolver. Choosing between the two is often a matter of server implementation. If your server supports sftp, usually it's preferrable.<br class="xooki-br"/><br class="xooki-br"/>Internally this resolver relies on <a href="http://www.jcraft.com/jsch/">jsch</a> as ssh client, which is a popular java ssh client, used for example in eclipse.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of standard resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>user</td><td>The username to provide as credential</td>
        <td>No, defaults to username given on the patterns, or prompt if none is set</td></tr>
    <tr><td>userPassword</td><td>The password to provide as credential</td>
        <td>No, defaults to password given on the patterns, or prompt if none is set</td></tr>
    <tr><td>keyFile</td><td>Path to the keyfile to use for authentication</td>
        <td>No, defaults to username/password authentication</td></tr>
    <tr><td>keyFilePassword</td><td>the password used to protect the key file</td>
        <td>No, will prompt for password if keyFile authentication is used and if it is password encrypted</td></tr>
    <tr><td>host</td><td>The host to connect to</td>
        <td>No, defaults to host given on the patterns, fail if none is set</td></tr>
    <tr><td>port</td><td>The port to connect to</td>
        <td>No, defaults to 22</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>ivy</td><td>defines a pattern for ivy files, using the pattern attribute</td>
        <td>0..n</td></tr>
    <tr><td>artifact</td><td>defines a pattern for artifacts, using the pattern attribute</td>
        <td>1..n</td></tr>
</tbody>
</table>

<h1>Example</h1>
<pre>
&lt;sftp user="myuser" host="myhost.com"&gt;<br class="xooki-br"/>  &lt;ivy pattern="/path/to/ivy/[module]/ivy.xml"/&gt;<br class="xooki-br"/>  &lt;artifact pattern="/path/to/[organisation]/[module]/[artifact].[ext]"/&gt;<br class="xooki-br"/>&lt;/sftp&gt; 
</pre>
Will connect to myhost.com using myuser and prompt for the password.<br class="xooki-br"/><hr/>
<pre>
&lt;sftp user="${myuser}" userPassword="${my.password}" host="myhost.com"&gt;<br class="xooki-br"/>  &lt;ivy pattern="path/to/ivy/[module]/ivy.xml"/&gt;<br class="xooki-br"/>  &lt;artifact pattern="path/to/[organisation]/[module]/[artifact].[ext]"/&gt;<br class="xooki-br"/>&lt;/sftp&gt;
</pre>
Will connect to myhost.com using user and password provided with ivy variables.<br class="xooki-br"/><hr/>
<pre>
&lt;sftp&gt;<br class="xooki-br"/>  &lt;ivy pattern="s<a href="ftp://user:geheim@yourserver.com:8022/path/to/repos/[module]/[revision]/ivy.xml">ftp://user:geheim@yourserver.com:8022/path/to/repos/[module]/[revision]/ivy.xml</a>"/&gt;<br class="xooki-br"/>  &lt;artifact pattern="s<a href="ftp://user:secret@myserver.com:8022/path/to/my/repos/[artifact].[ext">ftp://user:secret@myserver.com:8022/path/to/my/repos/[artifact].[ext</a>]"/&gt;<br class="xooki-br"/>&lt;/sftp&gt;
</pre>
Will connect to yourserver.com on port 8022 with user 'user' and password 'geheim' for authentication for ivy files, and to myserver.com on port 8022 using user 'user' and password 'secret' for the artifacts.<br class="xooki-br"/><hr/>
<pre>
&lt;sftp keyFile="path/to/key/file" keyFilePassword="${password}"&gt;<br class="xooki-br"/>  &lt;ivy pattern="s<a href="ftp://user@yourserver.com:8022/path/to/repos/[module]/[revision]/ivy.xml">ftp://user@yourserver.com:8022/path/to/repos/[module]/[revision]/ivy.xml</a>"/&gt;<br class="xooki-br"/>  &lt;artifact pattern="s<a href="ftp://user@myserver.com:8022/path/to/my/repos/[artifact].[ext">ftp://user@myserver.com:8022/path/to/my/repos/[artifact].[ext</a>]"/&gt;<br class="xooki-br"/>&lt;/sftp&gt;
</pre>
Will connect to yourserver.com on port 8022 with user 'user' and use keyFile path/to/key/file for keyFile and the value of password variable for keyFilePassword authentication for ivy files, and to myserver.com on port 8022 using user 'user' with the same keyFile/keyFilePassword pair for the artifacts.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>ssh resolver</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">ssh</td></tr>
<tr><td class="title">Handle latest</td><td class="value">yes</td></tr>
<tr><td class="title">Handle publish</td><td class="value">yes</td></tr>
</table>

<br/>
This resolver can be used when your ivy repository is located on a server accessible via ssh. The secured nature of ssh and its wide spread implementation on most *nix servers makes this resolver a very good candidate in an enterprise environment. <span class="since">since 1.4</span>

If your server supports sftp, you can consider using the <a href="../resolver/sftp.html">sftp resolver</a>.<br class="xooki-br"/><br class="xooki-br"/>Internally this resolver shares most of its behaviour with the <a href="../resolver/sftp.html">sftp resolver</a>, so refer to its documentation for details.<br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of standard resolvers.
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>user</td><td>The username to provide as credential</td>
        <td>No, defaults to username given on the patterns, or prompt if none is set</td></tr>
    <tr><td>userPassword</td><td>The password to provide as credential</td>
        <td>No, defaults to password given on the patterns, or prompt if none is set</td></tr>
    <tr><td>keyFile</td><td>Path to the keyfile to use for authentication</td>
        <td>No, defaults to username/password authentication</td></tr>
    <tr><td>keyFilePassword</td><td>the password used to protect the key file</td>
        <td>No, will prompt for password if keyFile authentication is used and if it is password encrypted</td></tr>
    <tr><td>host</td><td>The host to connect to</td>
        <td>No, defaults to host given on the patterns, fail if none is set</td></tr>
    <tr><td>port</td><td>The port to connect to</td>
        <td>No, defaults to 22</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>ivy</td><td>defines a pattern for ivy files, using the pattern attribute</td>
        <td>0..n</td></tr>
    <tr><td>artifact</td><td>defines a pattern for artifacts, using the pattern attribute</td>
        <td>1..n</td></tr>
</tbody>
</table>

<h1>Example</h1>
<pre>
&lt;ssh user="myuser" host="myhost.com"&gt;<br class="xooki-br"/>  &lt;ivy pattern="/path/to/ivy/[module]/ivy.xml"/&gt;<br class="xooki-br"/>  &lt;artifact pattern="/path/to/[organisation]/[module]/[artifact].[ext]"/&gt;<br class="xooki-br"/>&lt;/ssh&gt; 
</pre>
Will connect to myhost.com using myuser and prompt for the password.<br class="xooki-br"/><hr/>
<pre>
&lt;ssh keyFile="path/to/key/file" keyFilePassword="${password}"&gt;<br class="xooki-br"/>  &lt;ivy pattern="ssh://user:geheim@yourserver.com:8022/path/to/repos/[module]/[revision]/ivy.xml"/&gt;<br class="xooki-br"/>  &lt;artifact pattern="ssh://user:geheim@myserver.com:8022/path/to/my/repos/[artifact].[ext]"/&gt;<br class="xooki-br"/>&lt;/ssh&gt;
</pre>
Will connect to yourserver.com on port 8022 with user geheim and use keyFile path/to/key/file for keyFile and the value of password variable for keyFilePassword authentication for ivy files, and to myserver.com on port 8022 using user geheim with the same keyFile/keyFilePassword pair for the artifacts.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>vfs</div>
<table class="resolver">
<tr><td class="title">Tag</td><td class="value">vfs</td></tr>
<tr><td class="title">Handle latest</td><td class="value">depend on vfs capacity, usually yes</td></tr>
<tr><td class="title">Handle publish</td><td class="value">depend on vfs capacity, usually yes</td></tr>
</table>
<br/>
This resolver is certainly the most capable, since it relies on <a href="http://jakarta.apache.org/commons/vfs/">Apache commons VFS</a>, which gives an uniform access to <a href="http://jakarta.apache.org/commons/vfs/filesystems.html">a good number of file systems</a>, including ftp, webdav, zip, ... <span class="since">since 1.4</span>

<i>Note: commons vfs has not released a stable version yet, hence Ivy relies on a nightly build. Stability should thus be considered carefully before using this resolver in a production environment</i><br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
This resolver shares the <a href="../configuration/resolvers.html#common">common attributes</a> of standard resolvers.<br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>ivy</td><td>defines a pattern for ivy files, using the pattern attribute</td>
        <td>0..n</td></tr>
    <tr><td>artifact</td><td>defines a pattern for artifacts, using the pattern attribute</td>
        <td>1..n</td></tr>
</tbody>
</table>

<h1>Example</h1>
<pre>
&lt;vfs name="vfs-resolver"&gt;<br class="xooki-br"/>  &lt;ivy pattern="s<a href="ftp://username:password@host/[organisation]/[module]/[revision]/ivy.xml">ftp://username:password@host/[organisation]/[module]/[revision]/ivy.xml</a>" /&gt;<br class="xooki-br"/>  &lt;artifact pattern="s<a href="ftp://username:password@host/[organisation]/[module]/[revision]/[artifact].[ext">ftp://username:password@host/[organisation]/[module]/[revision]/[artifact].[ext</a>]" /&gt;<br class="xooki-br"/>&lt;/vfs&gt; 
</pre>
Access ivy and artifacts files using sftp.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>conflict-managers</div><br class="xooki-br"/><b>Tag:</b> conflict-managers<br class="xooki-br"/><br class="xooki-br"/>Defines a list of <a href="../concept.html#conflict">conflicts managers</a> usable in ivy. Each conflict manager is identified by its name, given as an attribute.<br class="xooki-br"/>The child tag used for the conflict manager must be equal to a name of a conflict manager type (either built-in<br class="xooki-br"/>or added with the typedef tag).<br class="xooki-br"/><br class="xooki-br"/>Here is a list of predefined conflicts managers (which do not require anything in the configuration file):
<ul>
<li>all</li> this conflicts manager resolve conflicts by selecting all revisions. Also called NoConflictManager, it does evict any module.
<li>latest-time</li> this conflict manager selects only the 'latest' revision, latest being defined as the latest in time. Note that latest in time is costly to compute, so prefer latest-revision if you can.
<li>latest-revision</li> this conflict manager selects only the 'latest' revision, latest being defined by a string comparison of revisions.
<li>strict</li> this conflict manager throws an exception (i.e. causes a build failure) whenever a conflict is found.
</ul>
The two "latest" conflict managers also take into account the force attribute of the dependencies.<br class="xooki-br"/>Indeed direct dependencies can declare a force attribute (see <a href="../ivyfile/dependency.html">dependency</a>), which indicates the the revision given in the direct dependency should be prefered over indirect dependencies.<br class="xooki-br"/><br class="xooki-br"/>Here is a list of conflict manager types available, which can be used to define your own custom conflict managers:
<ul>
<li>latest-cm</li>The latest conflict manager uses a latest strategy to select the latest revision among several ones. Both latest-time and latest-revision conflict managers are based on this conflict manager type. It takes 'latest' as attribute to define which latest strategy should be used. Example:
<pre>&lt;latest-cm name="mylatest-conflict-manager" latest="my-latest-strategy"/&gt;</pre>
<li>regexp-cm</li>This conflict manager is based on a regular expression and throw an exception (i.e. causes a build failure) when a conflict is found with versions with different matching group. For instance if a conflict is found between 1.2.x and 1.3.y it will throw an exception if the regular exception is (.*)\.\d, because the matching group will match different string (1.2 and 1.3). 1.2.1 and 1.2.2 won't throw an exception with the same regular expression. The regular expression is set using the 'regexp' attribute. A 'ignoreNonMatching' attribute can also be set to simply warrn when a version is found which does not match the regular expression, instead of throwing an exception.
</ul>

<h3>Child elements</h3>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any conflict manager</td><td>adds a conflict manager to the list of available conflict managers</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>modules</div><br class="xooki-br"/><b>Tag:</b> modules<br class="xooki-br"/><br class="xooki-br"/>Defines per module or module set settings.<br class="xooki-br"/><br class="xooki-br"/>The rules are given by defining a module set, using pattern for module organisation and name, and giving some settings for the set, like the name of the corresponding resolver to use.<br class="xooki-br"/><br class="xooki-br"/>If no rule match a given module, the default setting will be used.<br class="xooki-br"/><br class="xooki-br"/>Even if not required, because the use of a default big resolver (chain, for instance) able to resolve all dependencies can answer all the needs, the configuration of smaller resolvers used for different cases can improve performances a lot. For instance, if you have a local repository for your modules and a distant repository for third party libraries, it is a good idea to have two separate resolvers, and configure ivy to use one for all your modules and another for the rest (the default one).<br class="xooki-br"/><br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../configuration/module.html">module</a></td><td>defines a module set rule</td>
        <td>1..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>module</div><br class="xooki-br"/><b>Tag:</b> module<br class="xooki-br"/><br class="xooki-br"/>Define a module set rule. The tag defines a module set, by giving an expression and the matcher to use for organisation and name (for instance, you can use * to specify all). <br class="xooki-br"/><br class="xooki-br"/>It also gives the specific setting to use for this module set.<br class="xooki-br"/><br class="xooki-br"/>For each module set, you can configure:
<ul>
<li>the <a href="../configuration/resolvers.html">resolver</a> to use</li>
<li>the <a href="../configuration/conflict-managers.html">conflict manager</a> to use</li>
<li>the default <a href="../terminology.html#branch">branch</a> to use</li>
</ul>

<h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>organisation</td><td>the name of the organisation to which apply the resolver. May be an expression depending on the matcher used (see matcher attribute below).</td>
        <td>Yes</td></tr>
    <tr><td>name</td><td>the name of the module to which apply the resolver. May be an expression depending on the matcher used (see matcher attribute below).</td>
        <td>Yes</td></tr>
    <tr><td>matcher</td><td>the <a href="../concept.html#matcher">matcher</a> to use to match the modules to which the resolver should be applied <span class="since">since 1.3</span></td>
        <td>No, defaults to exactOrRegexp</td></tr>
    <tr><td>resolver</td><td>the name of the resolver to apply. The resolver must have been defined in the resolvers section of the configuration file.</td>
        <td>No</td></tr>
    <tr><td>conflict-manager</td><td>the name of the conflict manager to apply. <span class="since">since 1.4</span></td>
        <td>No</td></tr>
    <tr><td>branch</td><td>the default branch to apply. <span class="since">since 1.4</span></td>
        <td>No</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;modules&gt;<br class="xooki-br"/>  &lt;module organisation="apache" name="*" resolver="myprojectsresolver"/&gt;<br class="xooki-br"/>&lt;/modules&gt;
</pre>
Uses myprojectresolver for all modules from Apache.<br class="xooki-br"/><hr/>
<pre>
&lt;modules&gt;<br class="xooki-br"/>  &lt;module organisation="apache" name="commons-*" matcher="glob" resolver="myapachecommonsresolver"/&gt;<br class="xooki-br"/>&lt;/modules&gt;
</pre>
Uses myapachecommonsresolver for all modules beginning by commons- from apache.<br class="xooki-br"/><hr/>
<pre>
&lt;modules&gt;<br class="xooki-br"/>  &lt;module organisation="apache" name="commons-[a-z]+" matcher="regexp" resolver="myapachecommonsresolver"/&gt;<br class="xooki-br"/>&lt;/modules&gt;
</pre>
Uses myapachecommonsresolver for all modules from apache beginning by commons- followed by any number of alphabetic lowercase characters.<br class="xooki-br"/><hr/>
<pre>
&lt;modules&gt;<br class="xooki-br"/>  &lt;module organisation="apache" name="ivy*" matcher="glob" conflict-manager="latest-time"/&gt; <br class="xooki-br"/>&lt;/modules&gt;
</pre>
Uses latest-time conflict manager for all modules from apache which name begins with ivy.<br class="xooki-br"/><hr/>
<pre>
&lt;modules&gt;<br class="xooki-br"/>  &lt;module organisation="apache" name="ivy*" matcher="glob" branch="fix-103"/&gt; <br class="xooki-br"/>&lt;/modules&gt;
</pre>
Uses 'fix-103' as default branch for all modules from apache which name begins with ivy.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>outputters</div><br class="xooki-br"/><b>Tag:</b> outputters<br class="xooki-br"/><br class="xooki-br"/>Defines a list of report outputters usable in ivy. <br class="xooki-br"/><br class="xooki-br"/>A report outputter is used at the end of the resolve process to generate a report of how the resolve has been performed.<br class="xooki-br"/><br class="xooki-br"/>Two report outputters are registered by default:
<ul>
<li>a log report outputter (<a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk/src/java/org/apache/ivy/plugins/report/LogReportOutputter.java">LogReportOutputter</a>)</li>which produces the output on the console at the end of the resolve, which looks like this:
<pre>
        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   1   |   1   |   0   |   0   ||   1   |   1   |<br class="xooki-br"/>        ---------------------------------------------------------------------
</pre>
<li>an xml report outputter (<a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk/src/java/org/apache/ivy/plugins/report/XmlReportOutputter.java">XmlReportOutputter</a>)</li>which produces an xml report in the cache, which is mandatory for correct Ivy behaviour, since it's that report which is used when you do a post resolve step in a separate buid from the resolve itself. It's also this xml report which is processed to generate all the different reports available in the <a href="use/report.html">report</a> task.
</ul>

The child tag used for the parser must be equal to a name of a report outputter type (added with the typedef tag).<br class="xooki-br"/><br class="xooki-br"/>To see how to define your own report outputter see <a href="../extend.html">Extending Ivy documentation</a><br class="xooki-br"/><br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any report outputter</td><td>adds a report outputter to the list of available ones</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>statuses</div><br class="xooki-br"/><b>Tag:</b> statuses<br class="xooki-br"/><br class="xooki-br"/>Defines the list of available statuses. <span class="since">since 1.4</span>

By default, ivy has 3 statuses: release, milestone and integration. By adding a statuses section to your ivysettings file, you define the statuses you want to use. Note that in this case if you still want to have ivy default statuses you will have to declare them.<br class="xooki-br"/><br class="xooki-br"/>The integration property on each status is only used for recursive delivery, an integration dependency being delivered if the caller is not in integration state itself.<br class="xooki-br"/><br class="xooki-br"/>The default status is the one used when none is defined in a module descriptor. If not specified, it defaults to the last defined status.<br class="xooki-br"/><br class="xooki-br"/>The statuses order is important, the first is considered the more mature, the last the less mature. This is used to know if a status is compatible with a latest.<status> version matcher.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>default</td><td>the name of the status to use when none is declared in an ivy file</td>
        <td>No, defaults to the last status declared</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../configuration/status.html">status</a></td><td>defines a new status</td>
        <td>0..n</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;statuses default="bronze"&gt;<br class="xooki-br"/>  &lt;status name="gold" integration="false"/&gt;<br class="xooki-br"/>  &lt;status name="silver" integration="false"/&gt;<br class="xooki-br"/>  &lt;status name="bronze" integration="true"/&gt;<br class="xooki-br"/>&lt;/statuses&gt; 
</pre>
Defines 3 statuses, gold, silver and bronze. The default status used when none is declared in an ivy file will be bronze. <br class="xooki-br"/>It is also considered as an integration status, and thus doesn't trigger any recrusive delivery.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>status</div><br class="xooki-br"/><b>Tag:</b> status<br class="xooki-br"/><br class="xooki-br"/>Define one available module status.<br class="xooki-br"/><br class="xooki-br"/>See <a href="../configuration/statuses.html">statuses</a> page for details about how statuses are defined.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>name of status defined</td>
        <td>Yes</td></tr>
    <tr><td>integration</td><td>true if this is an integration status, false otherwise</td>
        <td>No, defaults to false</td></tr>
</tbody>
</table>
	<hr/><div class='toc-title toc-title-4'>triggers</div><br class="xooki-br"/><b>Tag:</b> triggers<br class="xooki-br"/><span class="since">since 1.4</span>

Defines a list of triggers to activate on some Ivy events.<br class="xooki-br"/><br class="xooki-br"/>A trigger is an action which is performed whenever a particular event occurs.<br class="xooki-br"/>Ivy supports two type of triggers out of the box: ant-call and ant-build. The first calls a target in the same build as the original one whenever a particular event occurs, the second call an ant build which may be in another ant build script.<br class="xooki-br"/><br class="xooki-br"/>If you want to use a different trigger, you can <a href="../extend.html">implement your own</a>.<br class="xooki-br"/><br class="xooki-br"/>The event available in Ivy are the following ones:
<table class="ivy-children">
<thead>
    <tr><th>Name</th><th>Attributes</th><th>Description</th></tr>
</thead>
<tbody>
    <tr><td>pre-resolve</td>
        <td>
          <ul>
            <li>organisation</li>the organisation of the module for which the dependencies will be resolved<br class="xooki-br"/>            <li>module</li>the name of the module for which the dependencies will be resolved<br class="xooki-br"/>            <li>revision</li>the revision of the module for which the dependencies will be resolved<br class="xooki-br"/>            <li>conf</li>comma separated list of configurations which will be resolved<br class="xooki-br"/>          </ul>
        </td>
        <td>Fired before a module dependencies will be resolved</td>
    </tr>
    <tr><td>pre-resolve-dependency</td>
        <td>
          <ul>
            <li>organisation</li>the organisation of the dependency resolved<br class="xooki-br"/>            <li>module</li>the name of the dependency resolved<br class="xooki-br"/>            <li>revision</li>the revision asked for the dependency<br class="xooki-br"/>            <li>resolver</li>the name of the resolver used to resolve the dependency<br class="xooki-br"/>          </ul>
        </td>
        <td>Fired before each dependency is resolved in a single resolve call</td>
    </tr>
    <tr><td>post-resolve-dependency</td>
        <td>
          <ul>
            <li>organisation</li>the organisation of the dependency resolved<br class="xooki-br"/>            <li>module</li>the name of the dependency resolved<br class="xooki-br"/>            <li>revision</li>the revision of the dependency resolved, or the revision asked if the resolution was not successful<br class="xooki-br"/>            <li>resolved</li>true if the resolution was successful, false otherwise<br class="xooki-br"/>            <li>resolver</li>the name of the resolver used to resolve the dependency<br class="xooki-br"/>          </ul>
        </td>
        <td>Fired after each dependency resolved in a single resolve call</td>
    </tr>
    <tr><td>post-resolve</td>
        <td>
          <ul>
            <li>organisation</li>the organisation of the module for which the dependencies have been resolved<br class="xooki-br"/>            <li>module</li>the name of the module for which the dependencies have been resolved<br class="xooki-br"/>            <li>revision</li>the revision of the module for which the dependencies have been resolved<br class="xooki-br"/>            <li>conf</li>comma separated list of configurations resolved<br class="xooki-br"/>          </ul>
        </td>
        <td>Fired after a module dependencies has been resolved</td>
    </tr>
    <tr><td>pre-download-artifact</td>
        <td>
          <ul>
            <li>organisation</li>the organisation of the artifact which is about to be downloaded<br class="xooki-br"/>            <li>module</li>the name of the module of the artifact which is about to be downloaded<br class="xooki-br"/>            <li>revision</li>the revision of the the artifact which is about to be downloaded<br class="xooki-br"/>            <li>artifact</li>the name of the the artifact which is about to be downloaded<br class="xooki-br"/>            <li>type</li>the type of the the artifact which is about to be downloaded<br class="xooki-br"/>            <li>ext</li>the extension of the the artifact which is about to be downloaded<br class="xooki-br"/>            <li>resolver</li>the name of the resolver used to download the artifact<br class="xooki-br"/>            <li>origin</li>the origin location from which it will be downloaded<br class="xooki-br"/>            <li>local</li>true if it's a local artifact, false otherwise<br class="xooki-br"/>          </ul>
        </td>
        <td>Fired before an artifact is downloaded from a repository to the cache</td>
    </tr>
    <tr><td>post-download-artifact</td>
        <td>
          <ul>
            <li>organisation</li>the organisation of the artifact which was just downloaded<br class="xooki-br"/>            <li>module</li>the name of the module of the artifact which was just downloaded<br class="xooki-br"/>            <li>revision</li>the revision of the the artifact which was just downloaded<br class="xooki-br"/>            <li>artifact</li>the name of the the artifact which was just downloaded<br class="xooki-br"/>            <li>type</li>the type of the the artifact which was just downloaded<br class="xooki-br"/>            <li>ext</li>the extension of the the artifact which was just downloaded<br class="xooki-br"/>            <li>resolver</li>the name of the resolver used to download the artifact<br class="xooki-br"/>            <li>origin</li>the origin location from which it was downloaded<br class="xooki-br"/>            <li>local</li>true if it's a local artifact, false otherwise<br class="xooki-br"/>            <li>size</li>the size in bytes of the downloaded artifact<br class="xooki-br"/>            <li>file</li>the file to which it has been downloaded<br class="xooki-br"/>          </ul>
        </td>
        <td>Fired after an artifact has been downloaded from a repository to the cache</td>
    </tr>
</tbody>
</table>


The child tag used for the dependency resolver must be equal to a name of a trigger type (either built-in or added with the typedef tag).<br class="xooki-br"/><br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any trigger</td><td>adds a trigger to the list of registered triggers</td>
        <td>1..n</td></tr>
</tbody>
</table>

<h1>Built-in Triggers</h1>
Ivy comes with two built-in triggers: <br class="xooki-br"/>
<table class="ivy-attributes">
<thead>
    <tr><th>Name</th><th>Description</th></tr>
</thead>
<tbody>
<tr><td>ant-build</td><td>Triggers an ant build.</td></tr>
<tr><td>ant-call</td><td>Calls a target in the current ant build.</td></tr>
</tbody>
</table>


<h1><a name="common">Common attributes</a></h1>
All triggers share some common attributes detailed here.<br class="xooki-br"/><br class="xooki-br"/>Among these attributes, you will find how to select when the trigger should be performed. You have to provide an event name, which is simple, but you can also use a filter expression. The syntax for this expression is very simple and limited: <br class="xooki-br"/>you can use the = operator to compare an attribute (left operande) with a value (right operande).<br class="xooki-br"/>you can use AND OR NOT as boolean operators<br class="xooki-br"/>you cannot use parenthesis to change the precedence<br class="xooki-br"/>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the trigger for identification purpose only</td>
        <td>Yes</td>
    </tr>
    <tr><td>event</td><td>the name of the event on which the trigger should be performed</td>
        <td>Yes</td>
    </tr>
    <tr><td>filter</td><td>a filter expression used to restrict when the trigger should be performed</td>
        <td>No, defaults to no filter</td>
    </tr>
</tbody>
</table>

<h1>Examples</h1>
<pre>
&lt;triggers&gt;<br class="xooki-br"/>    &lt;ant-build antfile="${ivy.settings.dir}/[module]/build.xml" target="publish"<br class="xooki-br"/>           event="pre-resolve-dependency" filter="revision=latest.integration"/&gt;<br class="xooki-br"/>&lt;/triggers&gt;
</pre>
Triggers an ant build of the ant file ${ivy.settings.dir}/[module]/build.xml (where [module] is replaced by the name of the dependency resolved) with the target "publish", just before resolving a dependency with a latest.integration revision.<br class="xooki-br"/><hr/>
<pre>
&lt;triggers&gt;<br class="xooki-br"/>    &lt;ant-call target="unzip" prefix="dep"<br class="xooki-br"/>          event="post-download-artifact" filter="type=zip AND status=successful"/&gt;<br class="xooki-br"/>&lt;/triggers&gt;
</pre>
Triggers an ant call of the target unzip just after downloading a zip artifact, prefixing all parameters to the target with 'dep'.<br class="xooki-br"/>Here is how the target can look like:
<pre>
&lt;target name="unzip"&gt;<br class="xooki-br"/>     &lt;echo&gt;<br class="xooki-br"/>        unzipping artifact: <br class="xooki-br"/>        organisation=${dep.organisation} <br class="xooki-br"/>        module=${dep.module} <br class="xooki-br"/>        revision=${dep.revision}<br class="xooki-br"/>        artifact=${dep.artifact}<br class="xooki-br"/>        type=${dep.type}<br class="xooki-br"/>        ext=${dep.ext}<br class="xooki-br"/>        origin=${dep.origin}<br class="xooki-br"/>        local=${dep.local}<br class="xooki-br"/>        size=${dep.size}<br class="xooki-br"/>        file=${dep.file}<br class="xooki-br"/>     &lt;/echo&gt;<br class="xooki-br"/>     &lt;mkdir dir="${basedir}/out"/&gt;<br class="xooki-br"/>     &lt;unzip src="${dep.file}" dest="${basedir}/out"/&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>
	<hr/><div class='toc-title toc-title-4'>version-matchers</div><br class="xooki-br"/><b>Tag:</b> version-matchers<br class="xooki-br"/><br class="xooki-br"/>Defines a list of version matchers. <span class="since">since 1.4</span> 

The child tag used for the version matcher must be equal to a name of a report outputter type (added with the typedef tag).<br class="xooki-br"/><br class="xooki-br"/>A version matcher is used to evaluate if a a dependency version contraint matches a dependency version.<br class="xooki-br"/><br class="xooki-br"/>See <a href="../ivyfile/dependency.html">dependency</a> doc for details about built-in version matchers.<br class="xooki-br"/><br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>any version matcher</td><td>adds a version matcher to the list of available ones</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-3'>Ivy Files</div><br class="xooki-br"/>Ivy use is entirely based on what is called ivy files. Ivy files are xml files, usually called ivy.xml, containing the description of the dependencies of a module, its published artifacts and its configurations.<br class="xooki-br"/><br class="xooki-br"/>Here is the simplest ivy file you can write:
<pre>
&lt;ivy-module version="1.3"&gt;<br class="xooki-br"/>  &lt;info organisation="myorg"<br class="xooki-br"/>        module="mymodule"<br class="xooki-br"/>        /&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>

Since version 0.8, ivy publishes an xslt which help make ivy files more readable. You just have to add<br class="xooki-br"/>a line like this one in your ivy file:
<pre>
&lt;?xml-stylesheet type="text/xsl" href="http://ivyrep.jayasoft.org/ivy-doc.xsl"?&gt;
</pre>
However, all information is not presented with the xslt (dependency configurations, in particular).<br class="xooki-br"/>And due to security issues, it only works if the ivy file is in the same domain as the xsl... But they are particularly useful to browse the <a href="http://ivyrep.jayasoft.org/">ivy repository</a>.<br class="xooki-br"/><br class="xooki-br"/>If you want to see a sample file using almost all possibilities of ivy files, check this one, <a href="samples/ivy-sample-xslt.xml">with</a> or <a href="samples/ivy-sample.xml">without</a> xslt.<br class="xooki-br"/><br class="xooki-br"/>Before beginning the reference itself, it is required to have in mind the terminology defined in the <a href="reference.html">main page</a> of this reference documentation.<br class="xooki-br"/><br class="xooki-br"/>For those familiar with xml schema, the schema used to validate ivy files can be found <a href="http://incubator.apache.org/schemas/ivy.xsd">here</a>. For those using xsd aware IDE, you can declare the xsd in your ivy files to benefit from code completion / validation:
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br class="xooki-br"/>&lt;ivy-module version="1.3" <br class="xooki-br"/>            xmlns:xsi="<a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"<br class="xooki-br"/>            xsi:noNamespaceSchemaLocation=<br class="xooki-br"/>                   "<a href="http://incubator.apache.org/ivy/schemas/ivy.xsd">http://incubator.apache.org/ivy/schemas/ivy.xsd</a>"&gt;<br class="xooki-br"/>  &lt;info organisation="myorg"<br class="xooki-br"/>        module="mymodule"<br class="xooki-br"/>        /&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>

<h1>Hierarchical Index</h1>
<pre>
ivy-module<br class="xooki-br"/>    <a href="ivyfile/info.html">info</a><br class="xooki-br"/>        <a href="ivyfile/license.html">license</a><br class="xooki-br"/>        <a href="ivyfile/ivyauthor.html">ivyauthor</a><br class="xooki-br"/>        <a href="ivyfile/repository.html">repository</a><br class="xooki-br"/>        <a href="ivyfile/description.html">description</a><br class="xooki-br"/>    <a href="ivyfile/configurations.html">configurations</a><br class="xooki-br"/>        <a href="ivyfile/conf.html">conf</a><br class="xooki-br"/>    <a href="ivyfile/publications.html">publications</a><br class="xooki-br"/>        <a href="ivyfile/artifact.html">artifact</a><br class="xooki-br"/>            <a href="ivyfile/artifact-conf.html">conf</a><br class="xooki-br"/>    <a href="ivyfile/dependencies.html">dependencies</a><br class="xooki-br"/>        <a href="ivyfile/dependency.html">dependency</a><br class="xooki-br"/>            <a href="ivyfile/dependency-conf.html">conf</a><br class="xooki-br"/>                <a href="ivyfile/mapped.html">mapped</a><br class="xooki-br"/>            <a href="ivyfile/dependency-artifact.html">artifact</a><br class="xooki-br"/>                <a href="ivyfile/dependency-artifact-conf.html">conf</a><br class="xooki-br"/>            <a href="ivyfile/dependency-artifact.html">include</a><br class="xooki-br"/>                <a href="ivyfile/dependency-artifact-conf.html">conf</a><br class="xooki-br"/>            <a href="ivyfile/artifact-exclude.html">exclude</a><br class="xooki-br"/>                <a href="ivyfile/artifact-exclude-conf.html">conf</a><br class="xooki-br"/>    <a href="ivyfile/conflicts.html">conflicts</a><br class="xooki-br"/>        <a href="ivyfile/manager.html">manager</a>
</pre>

<h1>ivy-module</h1>
<b>Tag:</b> ivy-module<br class="xooki-br"/><br class="xooki-br"/>Root tag of any ivy-file.<br class="xooki-br"/><h2>Attributes</h2>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>version</td><td>the version of the ivy file specification - should be '1.3' with current version of ivy</td>
        <td>Yes</td></tr>
</tbody>
</table>
<h2>Child elements</h2>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>info</td><td>contains information about the described module</td>
        <td>1</td></tr>
    <tr><td>configurations</td><td>container for configuration elements</td>
        <td>0..1</td></tr>
    <tr><td>publications</td><td>container for published artifact elements</td>
        <td>0..1</td></tr>
    <tr><td>dependencies</td><td>container for dependency elements</td>
        <td>0..1</td></tr>
    <tr><td>conflicts</td><td>section to configure the conflict managers to use</td>
        <td>0..1</td></tr>
</tbody>
</table>
	<hr/><div class='toc-title toc-title-4'>info</div><br class="xooki-br"/><b>Tag:</b> info <b>Parent:</b> <a href="../ivyfile.html">ivy-module</a><br class="xooki-br"/><br class="xooki-br"/>Gives information about the module this ivy file describe.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> This tag supports <a href="../concept.html#extra">extra attributes</a>.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>organisation</td><td>the name of the organisation that is the owner of this module.</td>
        <td>Yes</td></tr>
    <tr><td>module</td><td>the name of the module described by this ivy file.</td>
        <td>Yes</td></tr>
    <tr><td>branch</td><td>the branch of this module. <span class="since">since 1.4</span></td>
        <td>No, defaults to the default branch <a href="../configuration/conf.html">configured</a>, or nothing if no default branch is configured</td></tr>
    <tr><td>revision</td><td>the revision of this module.</td>
        <td>Yes in repository ivy files, no in ivy files to resolve</td></tr>
    <tr><td>status</td><td>the status of this module. See <a href="../reference.html">terminology</a> section for details</td>
        <td>No, default to 'integration'</td></tr>
    <tr><td>publication</td><td>the date of publication of this module. It should be given in this format: yyyyMMddHHmmss</td>
        <td>No, but it's a good practice to set it with delivered ivy files</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/license.html">license</a></td><td>contains information about the licenses of the described module</td>
        <td>0..n</td></tr>
    <tr><td><a href="../ivyfile/ivyauthor.html">ivyauthor</a></td><td>describes who has contributed to write the ivy file</td>
        <td>0..n</td></tr>
    <tr><td><a href="../ivyfile/repository.html">repository</a></td><td>describes on which public repositories this module can be found</td>
        <td>0..n</td></tr>
    <tr><td><a href="../ivyfile.html">description</a></td><td>describes how to use the module</td>
        <td>0..1</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>license</div><br class="xooki-br"/><b>Tag:</b> license <b>Parent:</b> <a href="../ivyfile/info.html">info</a><br/>
<br/>
Gives information about a license of the described module.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the license. Try to respect spelling when using a classical license.</td>
        <td>Yes</td></tr>
    <tr><td>url</td><td>an url pointing to the license text.</td>
        <td>No, but it's a good practice to indicate it</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>ivyauthor</div><br class="xooki-br"/><b>Tag:</b> ivyauthor <b>Parent:</b> <a href="../ivyfile/info.html">info</a><br/>
<br/>
Gives information about who has contributed to write this ivy file. It does NOT indicate who <br class="xooki-br"/>is the author of the module itself.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the author, as a person or a company.</td>
        <td>Yes</td></tr>
    <tr><td>url</td><td>an url pointing to where the author can bea reached.</td>
        <td>No, but it's a good practice to indicate it</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>repository</div><br class="xooki-br"/><b>Tag:</b> repository <b>Parent:</b> <a href="../ivyfile/info.html">info</a><br/>
<br/>
Gives information about a public repository where the module can be found. This information<br class="xooki-br"/>is given as an indication, repositories being able to be down over time.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the repository. Try to respect spelling for common repositories (ibiblio, ivyrep, ...)</td>
        <td>Yes</td></tr>
    <tr><td>url</td><td>an url pointing to the repository.</td>
        <td>Yes</td></tr>
    <tr><td>pattern</td><td>an ivy pattern to find modules on this repository</td>
        <td>No, but it's recommended to indicate it.</td></tr>
    <tr><td>ivys</td><td>true if ivy file can be found on this repository</td>
        <td>No, defaults to false.</td></tr>
    <tr><td>artifacts</td><td>true if module artifacts can be found on this repository</td>
        <td>No, defaults to false.</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>description</div><br class="xooki-br"/><b>Tag:</b> description <b>Parent:</b> <a href="../ivyfile/info.html">info</a><br/>
<br/>
Describes the current module. This tag is the only one which can contain free text,<br class="xooki-br"/>including html. It is used to describe the module itself, usually in a single short phrase<br class="xooki-br"/>(it is not meant to replace the module description on the corresponding web site), and then<br class="xooki-br"/>gives all information necessary to use the module, especially information about<br class="xooki-br"/>public configurations, how and when to use them.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>homepage</td><td>the url of the homepage of the module</td>
        <td>No, but it's recommended to indicate it.</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>configurations</div><br class="xooki-br"/><b>Tag:</b> configurations <b>Parent:</b> <a href="../ivyfile.html">ivy-module</a><br class="xooki-br"/><br class="xooki-br"/>Container for configuration element. If this container is not present, it is assumed that the module has one public configuration called 'default'.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> You can define a new default conf mapping on this container by specifying the defaultconfmapping attribute.<br class="xooki-br"/><br class="xooki-br"/>A default conf mapping is very similar to the defaultconf which can be set on the dependencies tag, but it has a slightly different behaviour. <br class="xooki-br"/>The default conf mapping not only defines the conf mapping to use when no conf mapping is specified for a dependency in this ivy file, but it also modify the way ivy interprets conf mapping with no mapped conf. In this case, Ivy will look in the default conf mapping and use the conf mapping defined in the default conf mapping for the conf for which there is no mapped conf.<br class="xooki-br"/><br class="xooki-br"/>See <a href="../ivyfile/dependency.html#defaultconfmapping">examples on the dependency</a> page.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> You can activate a confmappingoverride mode for all configurations, in which case the extending configurations will override the mappings of the configurations they extend from.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>defaultconfmapping</td><td>the default conf mapping to use in this ivy file <span class="since">since 1.3</span></td>
        <td>No, defaults to no default conf mapping</td></tr>
    <tr><td>confmappingoverride</td><td>true to activate configuration mapping override, false otherwise <span class="since">since 1.4</span></td>
        <td>No, defaults to false</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/conf.html">conf</a></td><td>declares a configuration of this module</td>
        <td>0..n</td></tr>
    <tr><td><a href="../ivyfile/include.html">include</a></td><td>include configurations from another file</td>
        <td>0..n</td></tr>
</tbody>
</table>

<h1>Configuration mappings details</h1>
When Ivy parses your Ivy file, it will create (internally) modify the configuration mapping of your dependencies.<br class="xooki-br"/>For instance, say you have:
<pre>
&lt;configurations defaultconfmapping="conf1-&gt;other1;conf2-&gt;other2"&gt;<br class="xooki-br"/>   &lt;conf name="conf1" /&gt;<br class="xooki-br"/>   &lt;conf name="conf2" extends="conf1" /&gt;<br class="xooki-br"/>&lt;/configurations&gt;<br class="xooki-br"/>&lt;dependencies&gt;<br class="xooki-br"/>   &lt;dependency name="other-module" conf="conf1" /&gt;<br class="xooki-br"/>&lt;/dependencies&gt;
</pre>
When Ivy parses this file, it will construct the following dependency (in-memory only):
<pre>&lt;dependency name="other-module" conf="conf1-&gt;other1" /&gt;</pre>

So, if you now resolve the conf2 configuration, you will only get the other1 dependencies of your other-module.<br class="xooki-br"/><br class="xooki-br"/>But when you set confmappingoverride to true, Ivy will construct the following dependency in memory:
<pre>&lt;dependency name="other-module" conf="conf1-&gt;other1;conf2-&gt;other2" /&gt;</pre>
As you can see, the defaultmappings of the extending configurations are also added (although you didn't explicitly defined them)<br class="xooki-br"/><br class="xooki-br"/>When you now resolve the conf2 configuration, you'll get the other2 dependencies of your other-module. <br class="xooki-br"/><hr/><div class='toc-title toc-title-5'>conf</div><br class="xooki-br"/><b>Tag:</b> conf <b>Parent:</b> <a href="../ivyfile/configurations.html">configurations</a><br class="xooki-br"/><br class="xooki-br"/>Declares a configuration of this module. As described in the reference page, a configuration is a way to use or construct a module. Some modules may be used in different ways (think about hibernate which can be used inside or outside an application server), and this way may alter the artifacts you need (in the case of hibernate, jta.jar is needed only if it is used outside an application server). Moreover, a module may need some other modules and artifacts only at build time, and some others at runtime. All those differents ways to use or build a module are called in ivy configurations.<br class="xooki-br"/><br class="xooki-br"/>The conf element in the configurations section declares one configuration. This declaration gives the name of the configuration declared, its visibility and the other configurations of the module it extends.<br class="xooki-br"/><br class="xooki-br"/>Visibility is used to indicate whether or not a configuration can be used from other modules depending on this one. Thus a private configuration is only used for internal purpose (maybe at build time), and other modules cannot declare to depend on it. <br class="xooki-br"/><br class="xooki-br"/>A configuration can also extend one or several other ones of the same module. When a configuration extends another one, then all artifacts required in the extended configuration will also be required in the configuration that extends the other one. For instance, if configuration B extends configuration A, and if artifacts art1 and art2 are required in configuration A, then they will be automatically required in configuration B. On the other hand, artifacts required in configuration B are not necessarily required in configuration A.<br class="xooki-br"/><br class="xooki-br"/>This notion is very helpful to define configurations which are similar with some differences.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> The extends attribute can use the following wildcards:<table class="ivy-attributes">
<tr><td>*</td><td>all other configurations</td></tr>
<tr><td>*(public)</td><td>all other public configurations</td></tr>
<tr><td>*(private)</td><td>all other private configurations</td></tr>
</table>
<br/>

<span class="since">since 1.4</span> A whole configuration can be declared as non transitive, so that all dependencies resolved in this configuration will be resolved with transitivity disabled. Note that the transitivity is disabled for all the configuration dependencies (including those obtained because this conf extends other ones), and only for this configuration (which means that a conf extending this one with transitivityy enabled will get transitive dependencies even for dependencies being part of the non transitive configuration).<br class="xooki-br"/>This is very useful to build a compile configuration, for instance, forcing the dependency declaration on each direct dependency, with no risk to forget some because of transitivity.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> This tag supports <a href="../concept.html#extra">extra attributes</a>.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the declared configuration</td>
        <td>Yes</td></tr>
    <tr><td>description</td><td>a description for the declared configuration</td>
        <td>No</td></tr>
    <tr><td>visibility</td><td>the visibility of the declared configuration. <br class="xooki-br"/>    'public' means that this configuration can be used by other modules, while 'private' means that this configuration is used only in the module itself, and is not exposed to other modules</td>
        <td>No, defaults to public</td></tr>
    <tr><td>extends</td><td>a comma separated list of configurations of this module that the <br class="xooki-br"/>    current configuration extends</td>
        <td>No, defaults to none</td></tr>
    <tr><td>transitive</td><td>a boolean to indicate if this conf is transitive or not <span class="since">since 1.4</span></td>
        <td>No, defaults to true</td></tr>
    <tr><td>deprecated</td><td>indicates that this conf has been deprecated by giving the date of the deprecation. <br class="xooki-br"/>    	It should be given in this format: yyyyMMddHHmmss</td>
        <td>No, by default the conf is not deprecated</td></tr>
</tbody>
</table>

<h1>Examples</h1>
<pre>
&lt;conf name="core" visibility="private" /&gt;<br class="xooki-br"/>&lt;conf name="compile" extends="core" transitive="false" visibility="private" /&gt;<br class="xooki-br"/>&lt;conf name="runtime" extends="compile" description="everything needed to run this module" /&gt;
</pre>
Declares three configurations, core compile and runtime, with only the runtime one accessible from other modules, and with the compile one being non transitive.<br class="xooki-br"/>Therefore the core configuration will only be composed of dependencies declared in the core configuration itself, the compile configuration will be composed of all dependencies required in either core or compile configuration, but without transivity (neither for core nor compile dependencies), and runtime will be composed of all dependencies, all transitively, including the dependencies declared only in compile.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-5'>include</div><br class="xooki-br"/><b>Tag:</b> include <b>Parent:</b> <a href="../ivyfile/configurations.html">configurations</a><br class="xooki-br"/><br class="xooki-br"/>Include configurations specified in another file. <span class="since">since 1.3</span>

The included file should have a configurations tag as root tag, which follow the same specification as the <a href="../ivyfile/configurations.html">configurations</a> tag of the ivy file. <br class="xooki-br"/><br class="xooki-br"/>This means that it can contain conf declarations, other file inclusion, and also a defaultconfmapping.<br class="xooki-br"/><br class="xooki-br"/>When delivering an ivy file with such an inclusion, the included configuration file is inlined, i.e. ivy remove the dependency on the external file.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>file</td><td>the file to include</td>
        <td>Yes</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>  &lt;info organisation="myorg"<br class="xooki-br"/>         module="mymodule"<br class="xooki-br"/>  /&gt;<br class="xooki-br"/>  &lt;configurations&gt;<br class="xooki-br"/>    &lt;include file="path/to/included-configurations.xml"/&gt;<br class="xooki-br"/>    &lt;conf name="conf3"/&gt;<br class="xooki-br"/>  &lt;/configurations&gt;<br class="xooki-br"/>  &lt;dependencies&gt;<br class="xooki-br"/>    &lt;dependency name="mymodule1" rev="1.0"/&gt;<br class="xooki-br"/>    &lt;dependency name="mymodule2" rev="2.0" conf="conf2,conf3-&gt;*"/&gt;<br class="xooki-br"/>  &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>
with included-configurations.xml like this:
<pre>
&lt;configurations defaultconfmapping="*-&gt;@"&gt;<br class="xooki-br"/>  &lt;conf name="conf1" visibility="public"/&gt;<br class="xooki-br"/>  &lt;conf name="conf2" visibility="private"/&gt;<br class="xooki-br"/>&lt;/configurations&gt;
</pre>
Defines 3 configurations, conf1, conf2 and conf3. mymodule1 is required in each configuration, with for each the same configuration (conf1 is needed in conf1, conf2 in conf2, and conf3 in conf3) due to the defaultconfmapping defined in the included file.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>publications</div><br class="xooki-br"/><b>Tag:</b> publications <b>Parent:</b> <a href="../ivyfile.html">ivy-module</a><br/><br/>

Container for artifact elements, used to describe the artifacts published by this module. <br class="xooki-br"/>If this container is not present, it is assumed that the module has one artifact, with the same name<br class="xooki-br"/>as the module, and published in all module configurations.<br/>
Thus if you have a module which publishes no artifacts (a sort of virtual module, <br class="xooki-br"/>made only to integrate several other modules as a whole), you have to include<br class="xooki-br"/>a publications element with no artifact sub element.<br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td>artifact</td><td>declares a published artifact for this module</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>artifact</div><br class="xooki-br"/><b>Tag:</b> artifact <b>Parent:</b> <a href="../ivyfile/publications.html">publications</a><br class="xooki-br"/><br class="xooki-br"/>Declares an artifact published by this module. This is especially useful for other modules dependending on this one. They thus get all published artifacts belonging to the configurations asked. Indeed, each published artifact declares in which public configuration it is published. Thus a module depending on this module only get artifacts marked with the asked configurations, taking into account configurations extension (see <a href="../ivyfile/conf.html">configuration declaration</a>).<br class="xooki-br"/><br class="xooki-br"/>The configurations in which an artifact is published can be configured in two ways:
<ul>
<li>conf attribute on artifact element</li>
<li>conf subelement</li>
</ul>
The twos are equivalent, it is only a matter of preference. However, do not mix both for one artifact.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> The artifact element as default values for all its attributes, so if you want to declare a default artifact you can just declare it like that:<pre>
&lt;artifact /&gt;
</pre>If this is the only artifact declared, then it's equivalent to having no publication section at all.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> It is possible to give a url at which artifacts can be found. This is not mandatory, and even not recommended. This is only a convenient way to deal with an existing repository with a bad layout, but should not be avoided in an enterprise repository.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the published artifact. This name must not include revision.</td>
        <td>No, defaults to the name of the module</td></tr>
    <tr><td>type</td><td>the type of the published artifact. It's usually its extension, but not necessarily. For instance, ivy files are of type 'ivy' but have 'xml' extension</td>
        <td>No, defaults to jar</td></tr>
    <tr><td>ext</td><td>the extension of the published artifact</td>
        <td>No, defaults to type</td></tr>
    <tr><td>conf</td><td>comma separated list of public configurations in which this artifact is published.<br class="xooki-br"/>    	'*' wildcard can be used to designate all public configurations of this module</td>
        <td>No, defaults to '*' if neither conf attribute nor conf children element is given</td></tr>
    <tr><td>url</td><td>a url at which this artifact can be found if it isn't located at the standard location in the repository <span class="since">since 1.4</span></td>
        <td>No, defaults to no url</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/artifact-conf.html">conf</a></td><td>indicates a public configuration in which this artifact is published</td>
        <td>0..n</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;artifact /&gt;
</pre>
Declares an artifact with the name of the module as name, type and ext jar, and published in all configurations.<br class="xooki-br"/><br class="xooki-br"/><hr />
<pre>
&lt;artifact name="foo-src" type="source" ext="zip" conf="src" /&gt;
</pre>
Declares an artifact foo-src, of type 'source' with extension 'zip', and published in the src configuration.<br class="xooki-br"/><br class="xooki-br"/><hr />
<pre>
&lt;artifact name="foo" url="<a href="http://www.acme.com/repository/barbaz/foo-1.2-bar.jar">http://www.acme.com/repository/barbaz/foo-1.2-bar.jar</a>" /&gt;
</pre>
Declares an artifact foo, of type and extension 'jar' located at the url <a href="http://www.acme.com/repository/barbaz/foo-1.2-bar.jar">http://www.acme.com/repository/barbaz/foo-1.2-bar.jar</a>. This url will only be used if the artifact cannot be found at its standard location.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-6'>conf</div><br class="xooki-br"/><b>Tag:</b> conf <b>Parent:</b> <a href="../ivyfile/artifact.html">artifact</a><br/>
<br/>
Indicates a public configuration in which enclosing artifact is published.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the module public configuration in which this artifact is published. <br class="xooki-br"/>    	'*' wildcard can be used to designate all public configurations of this module</td>
        <td>Yes</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>dependencies</div><br class="xooki-br"/><b>Tag:</b> dependencies <b>Parent:</b> <a href="../ivyfile.html">ivy-module</a><br class="xooki-br"/><br class="xooki-br"/>Container for dependency elements, used to describe the dependencies of this module. <br class="xooki-br"/>If this container is not present, it is assumed that the module has no dependency at all.<br class="xooki-br"/><br class="xooki-br"/>This container let the possibility to define two very similar things: defaultconf and defaultconfmapping.<br class="xooki-br"/>
<pre>defaultconf</pre> exists since Ivy 1.1 and enables to define the default conf attribute to use when no conf is defined for a dependency in this ivy file. It is only used when no conf mapping is defined, and has no influence in other cases.<br class="xooki-br"/>
<pre>defaultconfmapping</pre> exists since Ivy 1.3 and enables not only to define the default conf mapping when no conf is specified for a dependency in this ivy file, but it also influence the way conf mapping with no mapped conf are interpreted (see <a href="../ivyfile/configurations.html">configurations doc page</a> for details about this).<br class="xooki-br"/><br class="xooki-br"/>Note that if both defaultconf and defaultconfmapping are defined, it's the defaultconfmapping that is used. Note also that if several defaultconfmapping are defined (one in the configurations tag, one or several in included configurations file, and/or one in the dependency tag, then it's only the last which is taken into account, the others will have no effect at all.<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>defaultconf</td><td>the default configuration to use when none is specified in a dependency. <span class="since">since 1.1</span></em></td>
        <td>No, defaults to *->*</td></tr>
    <tr><td>defaultconfmapping</td><td>the default configuration mapping to use in this ivy file. <span class="since">since 1.3</span></em></td>
        <td>No, defaults to no default conf mapping</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/dependency.html">dependency</a></td><td>declares a dependency for this module</td>
        <td>0..n</td></tr>
    <tr><td><a href="../ivyfile/exclude.html">exclude</a></td><td>excludes artifacts, modules or whole organizations from the set of dependencies of this module <span class="since">since 2.0</span></td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>dependency</div><br class="xooki-br"/><b>Tag:</b> dependency <b>Parent:</b> <a href="dependencies.html">dependencies</a><br class="xooki-br"/><br class="xooki-br"/>Declares a dependency for this module. A dependency is described by the module on which the current module depends (identified by its name, organisation and revision), and a mapping of configurations.<br class="xooki-br"/><br class="xooki-br"/><h2><a name="revision">Fixed and dynamic revisions</a></h2>
The revision can be given as a fixed one (1.5.2, for instance) or as a latest (or dynamic) one. Several possibilities for dynamic revisions are implemented in Ivy:
<ul>
<li>latest.integration</li> selects the latest revision of the dependency module.
<li>latest.[any status]</li> selects the latest revision of the dependency module with at least the specified status. <span class="since">since 1.4</span>
For instance latest.milestone will select the latest version being either a milestone or a release, and latest.release will only selects the latest release. Note that in order to find the latest revision with the appropriate status Ivy has to parse all the ivy files in your repository from the last one until it finds such a revision. Hence don't be surprised if the resolution slow down.<br class="xooki-br"/>See also <a href="configuration/statuses.html">statuses</a> to see how to configure module statuses.
<li>end the revision with a +</li> selects the latest sub-revision of the dependency module. For instance, <br class="xooki-br"/>if the dependency module exists in revision 1.0.3, 1.0.7 and 1.1.2, "1.0.+" will select 1.0.7.
<li>version ranges</li> mathematical notation for ranges can be used to match a range of version. <span class="since">since 1.4</span>  
Examples:<br class="xooki-br"/>[1.0,2.0] matches all versions greater or equal to 1.0 and lower or equal to 2.0<br class="xooki-br"/>[1.0,2.0[ matches all versions greater or equal to 1.0 and lower than 2.0<br class="xooki-br"/>]1.0,2.0] matches all versions greater than 1.0 and lower or equal to 2.0<br class="xooki-br"/>]1.0,2.0[ matches all versions greater than 1.0 and lower than 2.0<br class="xooki-br"/>[1.0,) matches all versions greater or equal to 1.0<br class="xooki-br"/>]1.0,) matches all versions greater than 1.0<br class="xooki-br"/>(,2.0] matches all versions lower or equal to 2.0<br class="xooki-br"/>(,2.0[ matches all versions lower than 2.0 
</ul>
<span class="since">since 1.4</span> If you don't find a way to expression your dependency version constraint among these, you can <a href="../configuration/version-matchers.html">plug your own</a>.<br class="xooki-br"/>The way to determine which revision is the "latest" between two is configurable through the use of pluggable LatestStrategy. See <a href="../reference.html">ivy main concepts</a> for details about this.<br class="xooki-br"/><br class="xooki-br"/><h2>Configurations mapping</h2>
This mapping indicates which configurations of the dependency are required in which configurations of the current module, also called master configurations.<br class="xooki-br"/><br class="xooki-br"/>There are several ways to declare this mapping of configurations, choose depending more on preference than on possibilities. Try to avoid mixing usage in a single dependency element: do not use both nested and inline mapping declaration.<br class="xooki-br"/><br class="xooki-br"/>The first way to declare this mapping is called the inline mapping. It is maybe the less natural at first, but it's powerful and concise. Inline mapping can take several forms.<br class="xooki-br"/>
<ul>
<li>Specify one configuration name</li> This means that in this master configuration the same dependency configuration is needed (except if a defaultconfmapping has been specified in this ivy file, see <a href="../ivyfile/configurations.html">configurations</a> for details, or table below for examples).<br class="xooki-br"/>For instance, if the current module has defined a configuration named 'runtime', and the dependency too, then having an inline mapping configuration set to 'runtime' means that in the runtime master configuration the runtime dependency configuration is required.<br class="xooki-br"/><br class="xooki-br"/><a name="defaultconfmapping"/>More examples:<br class="xooki-br"/>The table below indicates how ivy interpret the conf attribute according to how <a href="../ivyfile/configurations.html">defaultconfmapping</a> is set:<table class="ivy-attributes"><thead><tr><th>defaultconfmapping</th><th>conf</th><th>ivy interpretation</th></tr>
</thead>
<tbody>
<tr><td></td><td></td><td><pre>*-&gt;*</pre></td></tr>
<tr><td></td><td>runtime</td><td><pre>runtime-&gt;runtime</pre></td></tr>
<tr><td></td><td>test</td><td><pre>test-&gt;test</pre></td></tr>
<tr><td><pre>runtime-&gt;*;test-&gt;default</pre></td><td></td><td><pre>runtime-&gt;*;test-&gt;default</pre></td></tr>
<tr><td><pre>runtime-&gt;*;test-&gt;default</pre></td><td>runtime</td><td><pre>runtime-&gt;*</pre></td></tr>
<tr><td><pre>runtime-&gt;*;test-&gt;default</pre></td><td>test</td><td><pre>test-&gt;default</pre></td></tr>
</tbody>
</table>
<br/>
<li>Specify a configuration mapping using the '->' operator separating a comma separated list of master configurations (left operand) of a comma separated list of dependency configurations (right operand).</li>
A good way to remember which side is for the master configuration (i.e. the configuration of the module defining the dependency) and which side is for the dependency configuration is to read the '->' as 'depends on'.<br class="xooki-br"/><br class="xooki-br"/>In this case, all specified dependency configurations are required in all specified master configurations.<br class="xooki-br"/>For instance, 'A, B, C -> E, F' means that dependency configurations E & F are required in master configurations A, B and C.<br class="xooki-br"/><br class="xooki-br"/>Note that you can use the wildcard '*' as a configuration name, meaning that all configurations (either master or dependency public ones depending on the side) are wanted. For instance, '* -> B, C' means that B & C dependency configurations are required in all master configurations.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> you can use * wildcard followed by negated configurations to mean all but xxx. For instance, '*, !A, !B -> X' means that X dependency configuration is required in all master configurations except A and B.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.2</span> '@' also has a special meaning as a right operand of the dependency mapping, it means map to self. This is particularly useful with '*', '*->@' meaning that all configurations of the module maps to their equivalent (same name) in the dependency.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> '#' can be used as right side operand to mean 'this' configuration, and thus refers to the configuration being resolved. It is slightly similar to @, except that it takes into account the configuration being actually resolved in case of a configuration extending another one.<br class="xooki-br"/><br class="xooki-br"/>Example:<br class="xooki-br"/>Let's foo be a module with two configurations, A and B, B extending A.<br class="xooki-br"/>Then a dependency declaring conf A-># will get A dep conf in its confs A (when resolving A, ivy will find interpret the # symbol as A) and B dep conf in its conf B (when resolving B, ivy will interpret the # symbol as B, even if this dependency is only required because of the A dependency).<br class="xooki-br"/><br class="xooki-br"/>If you don't understand really how this works, do not use it :-)<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> '%' can be used as left side operand to mean 'all the other configurations'. This can be usefull when you only have a specific mapping for some configurations and a default mapping for all the others.<br class="xooki-br"/><br class="xooki-br"/>Example:
<pre>test-&gt;runtime;%-&gt;default</pre> means that the <pre>test</pre> configuration is mapped to the <pre>runtime</pre> configuration, but all the other configurations are mapped to the <pre>default</pre> configuration.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> a fallback mechanism can be used when you are not sure that the dependency will have the required conf. You can indicate to ivy that you want one configuration, but if it isn't present, use another one. <br class="xooki-br"/>The syntax for specifying this adds the fallback conf between parenthesis right after the required conf. <br class="xooki-br"/>For instance, <pre>test-&gt;runtime(default)</pre> means that in the test configuration of the module the <pre>runtime</pre> conf of the dependency is required, but if doesn't exist, it will use the <pre>default</pre> conf instead. If <pre>default</pre> conf doesn't exist then it will be considered as an error. Note that the <pre>*</pre> wildcard can be used as fallback conf.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> you can add simple conditions in the dependency mapping. This is done by adding a condition between '[' and ']'. If the condition evaluates to <pre>true</pre>, the mapping is performed. If the condition evaluates to <pre>false</pre>, the mapping will be ignored. For instance, <pre>test-&gt;[org=A]runtime,[org=B]default</pre> means that the <pre>test</pre> configuration will be mapped to the <pre>runtime</pre> conf for the dependencies of organisation 'A' and to the <pre>default</pre> conf for dependencies of organisation 'B'.<br class="xooki-br"/>
<li>Specify a semi-column separated list of any of the previous specs.</li> In this case, it is the union of the mapping which is kept. For instance, 'A -> B; * -> C' means that B conf is needed in A conf and C conf is need in all master conf... so both B & C dep conf are required in A master conf
</ul>

If you prefer more verbose mapping declaration, everything is also possible with sub elements mapping declaration. <br class="xooki-br"/><br class="xooki-br"/><h2>Artifact restriction</h2>
Moreover, the dependency element also supports an artifact restriction feature (since 0.6).<br class="xooki-br"/>See <a href="#dependency-artifact">dependency artifact restriction</a> for details. <br/><br/>

<h2>Forcing revision</h2>
Finally, the dependency element also supports an a force attribute (since 0.8), which gives an indication<br class="xooki-br"/>to conflicts manager to force the revision of a dependency to the one given here.<br/>
See <a href="../ivyfile/conflicts.html">conflicts manager</a> for details. <br/><br/>

<span class="since">since 1.4</span> this tag supports <a href="../concept.html#extra">extra attributes</a><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>org</td><td>the name of the organisation of the dependency.</td>
        <td>No, defaults to the master module organisation</td></tr>
    <tr><td>name</td><td>the module name of the dependency</td>
        <td>Yes</td></tr>
    <tr><td>branch</td><td>the branch of the dependency. <span class="since">since 1.4</span></td>
        <td>No, defaults to the default branch <a href="../configuration/conf.html">configured</a> for the dependency.</td></tr>
    <tr><td>rev</td><td>the revision of the dependency. See <a href="#revision">above</a> for details.</td>
        <td>Yes</td></tr>
    <tr><td>force</td><td>a boolean to give an indication to conflict manager that this dependency <br class="xooki-br"/>     should be forced to this revision (see <a href="../ivyfile/conflicts.html">conflicts manager</a>)</td>
        <td>No, defaults to false</td></tr>
    <tr><td>conf</td><td>an inline mapping configuration spec (see above for details)</td>
        <td>No, defaults to defaultconf attribute of dependencies element if neither conf attribute nor conf children element is given</td></tr>
    <tr><td>transitive</td><td>true to resolve this dependency transitively, false otherwise (<span class="since">since 1.2</span>)</td>
        <td>No, defaults to true</td></tr>
    <tr><td>changing</td><td>true if the dependency artifacts may change without revision change, false otherwise (<span class="since">since 1.2</span>). Artifacts update will be looked after only if the publication date of the ivy file has changed. Note that this is not a recommended use and that it avoid some cache optimization in ivy.</td>
        <td>No, defaults to false</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/dependency-conf.html">conf</a></td><td>defines configuration mapping has sub element</td>
        <td>0..n</td></tr>
    <tr><td><a href="../ivyfile/dependency-artifact.html">artifact / include</a></td><td>defines artifacts inclusion - use only if you do not control dependency ivy file</td>
        <td>0..n</td></tr>
    <tr><td><a href="../ivyfile/artifact-exclude.html">exclude</a></td><td>defines artifacts exclusion - use only if you do not control dependency ivy file</td>
        <td>0..n</td></tr>
</tbody>
</table>

<h1>Examples</h1>
<pre>
&lt;dependency org="jayasoft" name="swtbinding" revision="0.2"/&gt;
</pre>
Declares a dependency on the module swtbinding from jayasoft in its revision 0.2. All the configuration of this dependency will be included in all configurations of the module in which the dependency is declared.<br class="xooki-br"/><hr/>
<pre>
&lt;dependency org="jayasoft" name="swtbinding" branch="fix-103" revision="latest.integration"/&gt;
</pre>
Same as above except that it will take the latest revision on the branch 'fix-103' instead of revision '0.2'.<br class="xooki-br"/><hr/>
<pre>
&lt;dependency name="mymodule" revision="latest.integration" conf="test-&gt;default"/&gt;
</pre>
Declares a dependency on the module <pre>mymodule</pre> from the same organisation as the module in which the dependency is declared. The latest available revision of this dependency will be used. This dependency will only be included in the test configuration of the module, and it's only the default configuration of the dependency which will be included.<br class="xooki-br"/><hr/>
<pre>
&lt;dependency org="apache" name="commons-lang" revision="2.0" force="true" conf="default"/&gt;
</pre>
Declares a dependency on the module <pre>commons-lang</pre> from apache, in revision 2.0. The revision 2.0 will be used even if another dependency declares itself a dependency on another version of commons-lang. Moreover, if no defaultconfmapping is defined, only the <pre>default</pre> conf of commons-lang will be used in the <pre>default</pre> conf of the master module. If <pre>*-&gt;runtime</pre> was declared as defaultconfmapping, then the runtime conf of commons-lang would be included in the default conf of the master module. Note that whatever the defaultconfmapping is, the dependency only be included in the default conf of the master module. The defaultconfmapping only changes the required dependency confs.<br class="xooki-br"/><hr/>
<pre>
&lt;dependency org="foo" name="bar" revision="3.0" transitive="false" conf="default-&gt;@;runtime,test-&gt;runtime"/&gt;
</pre>
Declares a dependency on the module <pre>bar</pre> from foo, in revision 3.0. The dependencies of bar will themselves not be included due to the setting of transitive. The default dependency conf will be included in the default master conf, and the runtime dependency conf will be included in both the runtime and test master conf.<br class="xooki-br"/><hr/>
<pre>
&lt;dependency org="foo" name="bar" revision="3.0" changing="true" conf="compile-&gt;runtime(default)"/&gt;
</pre>
Declares a dependency on the module <pre>bar</pre> from foo, in revision 3.0. This revision is considered to be able to change (<pre>changing="true"</pre>), so even if it is already in ivy cache, Ivy will check if a revision is a more recent last modified date is available on the repository. The runtime conf of bar is required in the compile conf of the master module, but if bar doesn't define a runtime conf, then the <pre>default</pre> conf will be used.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-6'>conf</div><br class="xooki-br"/><b>Tag:</b> conf <b>Parent:</b> <a href="../ivyfile/dependency.html">dependency</a><br/>
<br/>
Describes a configuration mapping for a dependency. See also the inline configuration mapping<br class="xooki-br"/>in dependency element.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the master configuration to map. <br class="xooki-br"/>    	'*' wildcard can be used to designate all configurations of this module</td>
        <td>Yes</td></tr>
    <tr><td>mapped</td><td>a comma separated list of dependency configurations to which this<br class="xooki-br"/>    master configuration should be mapped</td>
        <td>No, default to the same configuration as master one, unless nested mapped elements are specified</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/mapped.html">mapped</a></td><td>map dependency configurations for this master configuration</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-7'>mapped</div><br class="xooki-br"/><b>Tag:</b> mapped <b>Parent:</b> <a href="../ivyfile/dependency-conf.html">conf</a><br/>
<br/>
Describes a mapped dependency configuration for a master configuration.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the dependency configuration mapped. <br class="xooki-br"/>    	'*' wildcard can be used to designate all configurations of this module</td>
        <td>Yes</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-6'>artifact</div><br class="xooki-br"/><b>Tag:</b> artifact <b>Parent:</b> <a href="../ivyfile/dependency.html">dependency</a><br class="xooki-br"/><br class="xooki-br"/>This feature gives you more control on a dependency for which you do not control its ivy file. <br class="xooki-br"/>It enables to specify the artifacts required, if the dependency has no ivy file. <br class="xooki-br"/><br class="xooki-br"/>Indeed, when a module has no ivy file, it is assumed that it publishes exactly one artifact having the same name as the module itself. But when this module publishes more artifacts, or simply does not respect the name rule, and if you cannot deliver an ivy file for it (because you do not control the repository, for instance - think about maven ibiblio repository, to give no name), then this feature let you specify the artifacts names you want to get.<br class="xooki-br"/><br class="xooki-br"/>Each artifact specification can be given in the context of particular master configurations. By default, if no configuration is specified, artifacts specification apply to all master configurations. But you can specify that a specification applies only to one or several master configurations, using either inline or nested conf specification. In this case, do not forget that if you do not specify any specification for a particular configuration, then no specification will apply for this configuration and it will be resolved not taking into account any specification.<br class="xooki-br"/><br class="xooki-br"/>For instance, imagine you have A, B & C master configurations. If you specify art1 in A & B and art2 in A, then C will not be specified at all, and will thus assume the default artifact. To prevent this, you have to specify a configuration mapping for the dependency, mapping only A & B to some or all dependency configurations.<br class="xooki-br"/><br class="xooki-br"/>Example:
<pre>
&lt;dependency org="yourorg" name="yourmodule9" rev="9.1" conf="A,B-&gt;default"&gt;<br class="xooki-br"/>  &lt;artifact name="art1" type="jar" conf="A,B"/&gt;<br class="xooki-br"/>  &lt;artifact name="art2" type="jar" conf="A"/&gt;<br class="xooki-br"/>&lt;/dependency&gt;	
</pre>

<span class="since">since 1.4</span> It's possible to indicate the url at which the artifact can be found. This is not mandatory, and even not recommended with an enterprise repository. Note that Ivy will always look at the location where the artifact should be and only use the url if it cannot be found at the standard location in the repository.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> This feature can also be used for modules having their own module descriptor, but which doesn't declare an artifact you know that is published. Note that in this case artifacts declared to be published by the dependency will be ignored, so do not forget to include all artifacts you want.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of an artifact of the dependency module</td>
        <td>Yes</td></tr>
    <tr><td>type</td><td>the type of the artifact of the dependency module</td>
        <td>Yes</td></tr>
    <tr><td>ext</td><td>the extension of the artifact of the dependency module</td>
        <td>No, defaults to type</td></tr>
    <tr><td>conf</td><td>comma separated list of the master configurations in which this artifact should be included.<br class="xooki-br"/>    '*' wildcard can be used to designate all configurations of this module</td>
        <td>No, defaults to '*', unless nested conf are specified</td></tr>
    <tr><td>url</td><td>an url where this artifact can be found if it isn't present at the standard location in the repository <span class="since">since 1.4</span></td>
        <td>No, defaults to no url</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/dependency-artifact-conf.html">conf</a></td><td>configuration in which the artifact should be included</td>
        <td>0..n</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;dependency org="foo" name="bar" rev="1.0"&gt;<br class="xooki-br"/>  &lt;artifact name="baz" type="jar"/&gt;<br class="xooki-br"/>&lt;/dependency&gt;
</pre>
Declares a dependency on module bar which only publish one artifact: baz.jar.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;dependency org="foo" name="bar" rev="1.0"&gt;<br class="xooki-br"/>  &lt;artifact name="baz" type="jar" url="<a href="http://www.acme.com/repository/bar/baz-1.0-acme.jar">http://www.acme.com/repository/bar/baz-1.0-acme.jar</a>"/&gt;<br class="xooki-br"/>&lt;/dependency&gt;
</pre>
Same as above, except that if the artifact is not found at its standard location, Ivy will use <a href="http://www.acme.com/repository/bar/baz-1.0-acme.jar">http://www.acme.com/repository/bar/baz-1.0-acme.jar</a> to download it.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;dependency org="foo" name="bar" rev="1.0"&gt;<br class="xooki-br"/>  &lt;include name="*"/&gt;<br class="xooki-br"/>  &lt;artifact name="baz" type="source" ext="jar"/&gt;<br class="xooki-br"/>&lt;/dependency&gt;
</pre>
Declares a dependency on module bar for which all artifacts declared will be used (thanks to the include tag) plus an artifact baz of type source and ext jar (which is not declared in module bar module descriptor).<br class="xooki-br"/><hr/><div class='toc-title toc-title-7'>conf</div><br class="xooki-br"/><b>Tag:</b> conf <b>Parent:</b> <a href="../ivyfile/dependency-artifact.html">artifact</a><br class="xooki-br"/><br class="xooki-br"/>Specify a configuration in which the enclosing artifact specification should be included.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the master configuration in which the enclosing artifact should be included</td>
        <td>Yes</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-6'>exclude</div><br class="xooki-br"/><b>Tag:</b> exclude <b>Parent:</b> <a href="../ivyfile/dependency.html">dependency</a><br class="xooki-br"/><br class="xooki-br"/>This feature gives you more control on a dependency for which you do not control its ivy file. <br class="xooki-br"/>It enables to restrict the artifacts required, by excluding artifacts being published by the dependency or any of its transitive dependencies, <br class="xooki-br"/>even if configuration does not a good separation of published artifacts<br class="xooki-br"/><br class="xooki-br"/>The same principle concerning configuration as for include applies to this exclude feature (see above the include feature).<br class="xooki-br"/><br class="xooki-br"/>Note that exclusion is always done AFTER inclusion has been done.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> This exclude feature can also be used not only to exclude artifacts but also to exclude whole modules. Indeed when you exclude artifacts, it doesn't avoid ivy to search for the module itself, and to resolve the dependencies of the module. But you can also exclude the whole module, which means that the module will not be downloaded at all, and so its own dependencies will not be resolved. For sure, this is usually done to exclude not a direct dependency but an indirect one. To exclude a whole module, you just have to not specify any artifact name, type and ext in your exclude rule. For instance:
<pre>
&lt;dependency name="A" rev="1.0"&gt;<br class="xooki-br"/>  &lt;exclude module="B"/&gt;<br class="xooki-br"/>&lt;/dependency&gt;
</pre>

<span class="since">since 2.0</span> A <a href="ivyfile/exclude.html">module wide exclude</a> can also be used to exclude dependencies for the whole module (and not only in the context of one dependency as it is the case here).<br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>org</td><td>the organisation of the dependency module or artifact to exclude, or a regexp matching this organisation <span class="since">since 1.3</span></td>
        <td>No, defaults to *</td></tr>
    <tr><td>module</td><td>the name of the dependency module or the artifact to exclude, or a regexp matching this module name <span class="since">since 1.3</span></td>
        <td>No, defaults to *</td></tr>
    <tr><td>name</td><td>the name of an artifact of the dependency module to add to the exclude list, or an expression matching this name (see matcher attribute below)</td>
        <td>No, defaults to *</td></tr>
    <tr><td>type</td><td>the type of the artifact of the dependency module to add to the exclude list, or a regexp matching this name</td>
        <td>No, defaults to *</td></tr>
    <tr><td>ext</td><td>the extension of the artifact of the dependency module to add to the exclude list, or an expression matching this name (see matcher attribute below)</td>
        <td>No, defaults to type</td></tr>
    <tr><td>matcher</td><td>the <a href="../concept.html#matcher">matcher</a> to use to match the modules to excludes <span class="since">since 1.3</span></td>
        <td>No, defaults to exactOrRegexp in pre 1.3 ivy files, and exact in 1.3 and superior</td></tr>
    <tr><td>conf</td><td>comma separated list of the master configurations in which this artifact should be included.<br class="xooki-br"/>    '*' wildcard can be used to designate all configurations of this module</td>
        <td>No, defaults to '*', unless nested conf are specified</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/artifact-exclude-conf.html">conf</a></td><td>configuration in which the artifact should be included</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-7'>conf</div><br class="xooki-br"/><b>Tag:</b> conf <b>Parent:</b> <a href="../ivyfile/artifact-exclude.html">artifact</a><br/>
<br/>
Specify a configuration in which the enclosing artifact exclusion should be included.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the master configuration in which the enclosing artifact should be excluded</td>
        <td>Yes</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-6'>include</div><br class="xooki-br"/><b>Tag:</b> include <b>Parent:</b> <a href="../ivyfile/dependency.html">dependency</a><br class="xooki-br"/><br class="xooki-br"/>This feature gives you more control on a dependency for which you do not control its ivy file. <br class="xooki-br"/>It enables to restrict the artifacts required by including only the artifacts given here, even if configuration does not a good separation of published artifacts.<br class="xooki-br"/><br class="xooki-br"/>Each artifact restriction can be given in the context of particular master configurations. By default, if no configuration is specified, artifacts restriction apply to all master configurations. But you can specify that a restriction applies only to one or several master configurations, using either inline or nested conf specification. In this case, do not forget that if you do not specify any restriction for a particular configuration, then no restriction will apply for this configuration and it will be resolved not taking into account any restriction.<br class="xooki-br"/><br class="xooki-br"/>For instance, imagine you have A, B & C master configurations. If you restrict to art1 in A & B and art2 in A, then C will not be restricted at all, and will thus get all artifacts of all dependency configurations if you do not specify a configuration mapping. To prevent this, you have to specify a configuration mapping for the dependency, mapping only A & B to some or all dependency configurations.<br class="xooki-br"/><br class="xooki-br"/>Example:
<pre>
&lt;dependency org="yourorg" name="yourmodule9" rev="9.1" conf="A,B-&gt;default"&gt;<br class="xooki-br"/>  &lt;include name="art1" type="jar" conf="A,B"/&gt;<br class="xooki-br"/>  &lt;include name="art2" type="jar" conf="A"/&gt;<br class="xooki-br"/>&lt;/dependency&gt;		
</pre>

<h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of an artifact of the dependency module to add to the include list, or an expression matching this name (see matcher attribute below)</td>
        <td>No, defaults to .*</td></tr>
    <tr><td>type</td><td>the type of the artifact of the dependency module to add to the include list, or an expression matching this name (see matcher attribute below)</td>
        <td>No, defaults to .*</td></tr>
    <tr><td>ext</td><td>the extension of the artifact of the dependency module to add to the include list, or an expression matching this name (see matcher attribute below)</td>
        <td>No, defaults to type</td></tr>
    <tr><td>matcher</td><td>the <a href="../concept.html#matcher">matcher</a> to use to match the modules to include <span class="since">since 2.0</span></td>
        <td>No, defaults to exactOrRegexp in pre 1.3 ivy files, and exact in 1.3 and superior</td></tr>
    <tr><td>conf</td><td>comma separated list of the master configurations in which this artifact should be included.<br class="xooki-br"/>    '*' wildcard can be used to designate all configurations of this module</td>
        <td>No, defaults to '*', unless nested conf are specified</td></tr>
</tbody>
</table>
<h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/dependency-include-conf.html">conf</a></td><td>configuration in which the artifact should be included</td>
        <td>0..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-7'>conf</div><br class="xooki-br"/><b>Tag:</b> conf <b>Parent:</b> <a href="../ivyfile/dependency-include.html">include</a><br class="xooki-br"/><br class="xooki-br"/>Specify a configuration in which the enclosing artifact inclusion should be included.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the master configuration in which the enclosing artifact should be included</td>
        <td>Yes</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>exclude</div><br class="xooki-br"/><b>Tag:</b> exclude <b>Parent:</b> <a href="../ivyfile/dependencies.html">dependencies</a><br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> This feature gives you more control on a dependency for which you do not control its ivy file. <br class="xooki-br"/>It allows to exclude artifacts, modules or organizations from the list of dependencies for the whole module.<br class="xooki-br"/><br class="xooki-br"/>It is very similar to the <a href="ivyfile/artifact-exclude.html">dependency exclude</a> element, except that it applies to a whole module, which can be very useful when a lot of dependencies transitively bring a module you don't want.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>org</td><td>the organization of the dependency module or artifact to exclude, or a regexp matching this organization</td>
        <td>No, defaults to *</td></tr>
    <tr><td>module</td><td>the name of the dependency module or the artifact to exclude, or a regexp matching this module name</td>
        <td>No, defaults to *</td></tr>
    <tr><td>artifact</td><td>the name of an artifact of the dependency module to add to the exclude list, or an expression matching this name (see matcher attribute below)</td>
        <td>No, defaults to *</td></tr>
    <tr><td>type</td><td>the type of the artifact of the dependency module to add to the exclude list, or a regexp matching this name</td>
        <td>No, defaults to *</td></tr>
    <tr><td>ext</td><td>the extension of the artifact of the dependency module to add to the exclude list, or an expression matching this name (see matcher attribute below)</td>
        <td>No, defaults to type</td></tr>
    <tr><td>matcher</td><td>the <a href="../concept.html#matcher">matcher</a> to use to match the modules to excludes</td>
        <td>No, defaults to exactOrRegexp in pre 1.3 ivy files, and exact in 1.3 and superior</td></tr>
    <tr><td>conf</td><td>comma separated list of the master configurations in which this artifact should be included.<br class="xooki-br"/>    '*' wildcard can be used to designate all configurations of this module</td>
        <td>No, defaults to '*', unless nested conf are specified</td></tr>
</tbody>
</table><hr/><div class='toc-title toc-title-4'>conflicts</div><br class="xooki-br"/><b>Tag:</b> conflicts <b>Parent:</b> <a href="../ivyfile.html">ivy-module</a><br/><br/>

Container for conflict manager elements, used to indicate how conflicts should be resolved<br class="xooki-br"/>for this module. <br/><br/>

The list of built-in conflict managers available is listed on the <a href="../configuration/conflict-managers.html">conflict manager configuration page</a>.<br/><br/>

Conflicts manager are used during the resolve operation, i.e. when ivy analyse the graph of dependencies<br class="xooki-br"/>and download corresponding ivy files and artifacts. The fact to manage conflict at resolve time<br class="xooki-br"/>enables to minimize downloads: when a module is evicted by a conflict manager, it is not downloaded.<br/><br/>

There are two things optimized during conflict resolution: download of artifacts and download<br class="xooki-br"/>of ivy files. The first is always ensured by ivy, i.e. artifacts of a module evicted will never<br class="xooki-br"/>be downloaded. The second is not as simple to handle because to know what are the conflicts<br class="xooki-br"/>ivy needs to know the dependency graph, and to know the dependency graph, it has to download<br class="xooki-br"/>ivy files. But ivy is highly optimized on this too, and it tries to evict modules as soon as possible.<br/>
That's why the order of dependencies is important for download optimization. Indeed ivy<br class="xooki-br"/>traverses the dependency graph in the order in which dependencies are declared in the ivy files, <br class="xooki-br"/>and each time it encounters a dependency on a module, it first check if there is a conflict on this module, <br class="xooki-br"/>and if this is the case, it asks the conflict manager to resolve the conflict. Then if the module is evicted,<br class="xooki-br"/>it does not download its ivy file, and the whole branch is not traversed, which can saves<br class="xooki-br"/>a lot of time.<br/><br/>

If this container is not present, a default conflict manager is used for all modules. <br class="xooki-br"/>The current default conflict manager is the "latest-revision" conflict manager.<br class="xooki-br"/><h1>Child elements</h1>
<table class="ivy-children">
<thead>
    <tr><th class="ivy-chld">Element</th><th class="ivy-chld-desc">Description</th><th class="ivy-chld-card">Cardinality</th></tr>
</thead>
<tbody>
    <tr><td><a href="../ivyfile/manager.html">manager</a></td><td>declares a conflict manager for this module</td>
        <td>1..n</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-5'>manager</div><br class="xooki-br"/><b>Tag:</b> manager <b>Parent:</b> <a href="../ivyfile/conflicts.html">conflicts</a><br/>
<br/>
Specify a a conflict manager for one or several dependencies.<br/>
The way to specify a conflict manager is by giving indication to which dependencies<br class="xooki-br"/>the conflict manager applies (by giving organisation and module names or name regexp), <br class="xooki-br"/>and then specifying the conflict manager, either by giving its name or by<br class="xooki-br"/>specifying a fixed revision list, in which case a fixed conflicts manager is used.<br/><br/>

See <a href="../ivyfile/conflicts.html">Conflicts Manager</a> for details on conflicts manager in general.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ivy-attributes">
<thead>
    <tr><th class="ivy-att">Attribute</th><th class="ivy-att-desc">Description</th><th class="ivy-att-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>org</td><td>the name, or an expression matching the name of organisation to which this conflict manager should apply (see matcher attribute below)</td>
        <td>No, defaults to * (match all)</td></tr>
    <tr><td>module</td><td>the name, or an expression matching the name of module to which this conflict manager should apply (see matcher attribute below)</td>
        <td>No, defaults to * (match all)</td></tr>
    <tr><td>name</td><td>the name of the conflict manager to use</td>
        <td rowspan="2">Exactly one of two</td></tr>
    <tr><td>rev</td><td>a comma separated list of revisions this conflict manager should select</td></tr>
    <tr><td>matcher</td><td>the <a href="../concept.html#matcher">matcher</a> to use to match the modules for which the conflict manager should be used <span class="since">since 1.3</span></td>
        <td>No, defaults to exactOrRegexp in pre 1.3 ivy files, and exact in 1.3 and superior</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-3'>Using from Ant</div><br class="xooki-br"/>The main and most frequent way to use ivy is from an ant build file. However, ivy can also be called as a standalone application<br class="xooki-br"/><br class="xooki-br"/>If you use ant version <b>1.6.0</b> or superior, you just have to add ivy namespace to your project (<pre>xmlns:ivy="antlib:org.apache.ivy.ant"</pre> attribute of your project tag), and you can call ivy tasks.<br class="xooki-br"/><br class="xooki-br"/>If you want to make your build handle ivy.jar in either ant lib dir or a local lib dir, you can use a taskdef like this:
<pre>
&lt;path id="ivy.lib.path"&gt;<br class="xooki-br"/>    &lt;fileset dir="path/to/dir/with/ivy/jar" includes="*.jar"/&gt;<br class="xooki-br"/>&lt;/path&gt;<br class="xooki-br"/>&lt;taskdef resource="org/apache/ivy/ant/antlib.xml"<br class="xooki-br"/>         uri="antlib:org.apache.ivy.ant" classpathref="ivy.lib.path"/&gt;
</pre>
Combined with the antlib definition in the project namespace, it will load Ivy classes either from your ant lib or a local directory (path/to/dir/with/ivy/jar in this example).<br class="xooki-br"/><br class="xooki-br"/>If you use ant <b>1.5.1</b> or superior, you have to define the tasks you use in your build file. For instance:
<pre>
  &lt;taskdef name="ivy-configure" classname="org.apache.ivy.ant.IvyConfigure"/&gt;<br class="xooki-br"/>  &lt;taskdef name="ivy-resolve" classname="org.apache.ivy.ant.IvyResolve"/&gt;<br class="xooki-br"/>  &lt;taskdef name="ivy-retrieve" classname="org.apache.ivy.ant.IvyRetrieve"/&gt;<br class="xooki-br"/>  &lt;taskdef name="ivy-deliver" classname="org.apache.ivy.ant.IvyDeliver"/&gt; <br class="xooki-br"/>  &lt;taskdef name="ivy-publish" classname="org.apache.ivy.ant.IvyPublish"/&gt;
</pre>
<em>Note: the tasks listed above are non exhaustive. For a complete list of tasks with the corresponding classes, see the <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk/src/java/org/apache/ivy/ant/antlib.xml">antlib.xml</a> file in svn or the version you use.</em><br class="xooki-br"/><br class="xooki-br"/>Then you can use the tasks, but check their name, following samples assume you use the ivy namespace (ivy:xxx tasks), whereas with ant 1.5 you cannot use namespace, and should therefore use ivy-xxx tasks if you have followed the taskdefs above.<br class="xooki-br"/><br class="xooki-br"/>If you use an ant version lower than 1.5.1, you can not use the ivy tasks... you should then call ivy as any external program.<br class="xooki-br"/><h1>Calling ivy from ant: first steps</h1>
Once your build file is ok to call ivy tasks, the simplest way to use ivy is to call the ivy retrieve task with no parameters:
<pre>
&lt;ivy:retrieve /&gt;
</pre>
This calls ivy with default values, which might be ok in several projects. In fact, it is equivalent to:
<pre>
&lt;target name="resolve"&gt;<br class="xooki-br"/>    &lt;ivy:configure /&gt;<br class="xooki-br"/>    <br class="xooki-br"/>    &lt;ivy:resolve file="${ivy.dep.file}" conf="${ivy.configurations}" /&gt;<br class="xooki-br"/>    <br class="xooki-br"/>    &lt;ivy:retrieve pattern="${ivy.retrieve.pattern}" conf="${ivy.configurations}" /&gt;<br class="xooki-br"/>&lt;/target&gt;
</pre>

Those 3 tasks follow the 3 main steps of ivy retrieving dependencies process:
<ul>
<li>First the configure task tells it how it can find dependencies giving it a path to an <a href="configuration.html">xml configuration file</a>.</li> 
<li>Then the resolve task actually resolve dependencies described by an <a href="ivyfile.html">ivy file</a>, and put those dependencies in the ivy cache (a directory configured in the configuration file).</li>
<li>Finally the retrieve task copies dependencies from the cache to anywhere you want in your file system. You can then use those dependencies to make your classpath with standard ant paths.</li>
</ul>

To understand more accurately the behaviour of ivy tasks, one should know that a property file is loaded in ant by ivy at the beginning of the configure call. This property file contains the following properties:
<pre>
ivy.project.dir = ${basedir}<br class="xooki-br"/>ivy.lib.dir = ${ivy.project.dir}/lib<br class="xooki-br"/>ivy.build.artifacts.dir = ${ivy.project.dir}/build/artifacts<br class="xooki-br"/>ivy.distrib.dir = ${ivy.project.dir}/distrib<br class="xooki-br"/>	<br class="xooki-br"/>ivy.resolver.default.check.modified = false<br class="xooki-br"/>ivy.default.always.check.exact.revision = true<br class="xooki-br"/><br class="xooki-br"/>ivy.configurations = *<br class="xooki-br"/>ivy.resolve.default.type.filter = *<br class="xooki-br"/>ivy.status = integration<br class="xooki-br"/>ivy.dep.file = ivy.xml<br class="xooki-br"/>ivy.settings.file = ivysettings.xml<br class="xooki-br"/>ivy.retrieve.pattern = ${ivy.lib.dir}/[artifact]-[revision].[ext]<br class="xooki-br"/>ivy.deliver.ivy.pattern = ${ivy.distrib.dir}/[type]s/[artifact]-[revision].[ext]<br class="xooki-br"/>ivy.publish.src.artifacts.pattern = ${ivy.distrib.dir}/[type]s/[artifact]-[revision].[ext]<br class="xooki-br"/><br class="xooki-br"/>ivy.report.output.pattern = [organisation]-[module]-[conf].[ext]<br class="xooki-br"/><br class="xooki-br"/>ivy.buildlist.ivyfilepath = ivy.xml<br class="xooki-br"/><br class="xooki-br"/>ivy.checksums=sha1,md5
</pre>
<em>For the latest version of these properties, you can check the <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk/src/java/org/apache/ivy/core/settings/ivy.properties">svn version</a>.</em><br class="xooki-br"/><br class="xooki-br"/><h1>Ivy tasks attributes : generalities</h1>
Some tasks attributes values may be given through different places. The three possible places are :<br class="xooki-br"/><ol>
<li>task attribute</li>
<li>ivy instance</li>
<li>project property</li>
</ol>
The places are queried in this order, so anything set in task attribute will overwrite what would have been found in ivy instance, for example.<br class="xooki-br"/><br class="xooki-br"/>The ivy instance considered here is an instance of the class Ivy, which is setup by a call to the configure task, and then reused for other tasks. Because most of the tasks need an ivy instance, they first check if one is available (i.e. configure has been called), and if none is available, then a default configure is called and the resulting ivy instance is used in the remaining tasks (unless another configure is called).<br class="xooki-br"/><br class="xooki-br"/>It isn't generally necessary to understand this, but it can lead to some issues if you forget to call configure before another task and if the configure step was required in your environment.<br class="xooki-br"/><br class="xooki-br"/><h1>Usual cycle of main tasks</h1>
<center><img src="images/main-tasks.png" /></center>
<h1>Example</h1>
Here is a more complete example of build file using ivy:<br class="xooki-br"/>
<pre>
&lt;project xmlns:ivy="antlib:org.apache.ivy.ant" name="sample" default="resolve"&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;target name="resolve"&gt;<br class="xooki-br"/>        &lt;ivy:configure file="../ivysettings.xml" /&gt;<br class="xooki-br"/>        <br class="xooki-br"/>        &lt;ivy:resolve file="my-ivy.xml" conf="default, myconf" /&gt;<br class="xooki-br"/>        <br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/>    <br class="xooki-br"/>    &lt;target name="retrieve-default" depends="resolve"&gt;<br class="xooki-br"/>        &lt;ivy:retrieve pattern="lib/default/[artifact]-[revision].[ext]" conf="default" /&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;target name="retrieve-myconf" depends="resolve"&gt;<br class="xooki-br"/>        &lt;ivy:retrieve pattern="lib/myconf/[artifact]-[revision].[ext]" conf="myconf" /&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;target name="retrieve-all" depends="resolve"&gt;<br class="xooki-br"/>        &lt;ivy:retrieve pattern="lib/[conf]/[artifact]-[revision].[ext]" conf="*" /&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;target name="deliver" depends="retrieve-all"&gt;<br class="xooki-br"/>        &lt;ivy:deliver deliverpattern="distrib/[artifact]-[revision].[ext]"<br class="xooki-br"/>                     pubrevision="1.1b4" pubdate="20050115123254" status="milestone" /&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/><br class="xooki-br"/>    &lt;target name="publish" depends="deliver"&gt;<br class="xooki-br"/>        &lt;ivy:publish resolver="internal" <br class="xooki-br"/>                     artifactspattern="distrib/[artifact]-[revision].[ext]" <br class="xooki-br"/>                     pubrevision="1.1b4" /&gt;<br class="xooki-br"/>    &lt;/target&gt;<br class="xooki-br"/>&lt;/project&gt;
</pre>

All ivy tasks are documented in the following pages.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>artifactproperty</div>
<div class="since">since 1.1</div>
Sets an ant property for each dependency artifacts previously resolved.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> This is a <a href="use/postresolvetask.html">post resolve task</a>, with all the behaviour and attributes common to all post resolve tasks.<br class="xooki-br"/><br class="xooki-br"/>Please prefer the use of retrieve + standard ant path creation, which make your build more independent from ivy (once artifacts are properly retrieved, ivy is not required any more).<br class="xooki-br"/><br class="xooki-br"/>The property name and value are generated using the classical pattern concept, all artifact tokens and ivy variables being available.<br class="xooki-br"/>  
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>a pattern used to generate the name of the properties to set</td>
        <td>Yes</td></tr>
    <tr><td>value</td><td>a pattern used to generate the value of the properties to set</td>
        <td>Yes</td></tr>
    <tr><td>conf</td><td>a comma separated list of the configurations for which properties should be set</td>
        <td>No. Defaults to the configurations resolved by the last resolve call, or * if no resolve was explicitly called</td></tr>
    <tr><td>haltonfailure</td><td>true to halt the build on ivy failure, false to continue</td><td>No. Defaults to true</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td>
        <td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <b>(since 2.0)</b></td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>

<h1>Example</h1>
Suppose we have one dependency called <i>mydep</i> in revision 1.0 publishing two artifacts: <i>foo.jar</i> and <i>bar.jar</i>.<br class="xooki-br"/>Then:
<pre>
&lt;artifactproperty conf="build" <br class="xooki-br"/>       name="[module].[artifact]-[revision]" <br class="xooki-br"/>       value="${cache.dir}/[module]/[artifact]-[revision].[ext]"/&gt;
</pre>
will set two properties:
<pre>
mydep.foo-1.0 = my/cache/dir/mydep/foo-1.0.jar<br class="xooki-br"/>mydep.bar-1.0 = my/cache/dir/mydep/bar-1.0.jar
</pre>

	<hr/><div class='toc-title toc-title-4'>artifactreport</div><br class="xooki-br"/><span class="since">since 1.4</span>
The artifactreport task generates an xml report of all artifacts dependencies resolved by the last <a href="../use/resolve.html">resolve</a> task call during the same build.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> This is a <a href="use/postresolvetask.html">post resolve task</a>, with all the behaviour and attributes common to all post resolve tasks.<br class="xooki-br"/><br class="xooki-br"/>This report is different from the standard <a href="../use/report.html">report</a> which reports all modules and artifacts, whle this report is much simpler and focuses only on artifacts, and gives more information on artifacts, such as the original location and the retrieve location. <br class="xooki-br"/><br class="xooki-br"/>It is thus easy to use to generate things like a classpath file for an IDE.<br class="xooki-br"/><br class="xooki-br"/>See this <a href="http://www.jaya.free.fr/ivy/doc/articles/ease-multi-module.html">article by Johan Stuyts</a> (who contributed this task) to see how he uses this task.<br class="xooki-br"/><br class="xooki-br"/>Here is an example of generate file:
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br class="xooki-br"/>&lt;modules&gt;<br class="xooki-br"/>  &lt;module organisation="hippo" name="sant-classes" rev="1.01.00b04-dev" status="integration"&gt;<br class="xooki-br"/>    &lt;artifact name="sant-classes-src" ext="zip" type="zip"&gt;<br class="xooki-br"/>      &lt;origin-location is-local="true"&gt;<br class="xooki-br"/>        C:/home/jstuyts/data/ivy/local/hippo/sant-classes/1.01.00b04-dev/sant-classes-src-1.01.00b04-dev.zip&lt;/origin-location&gt;<br class="xooki-br"/>      &lt;cache-location&gt;<br class="xooki-br"/>        C:/home/jstuyts/data/ivy/cache/hippo/sant-classes/zips/sant-classes-src-1.01.00b04-dev.zip&lt;/cache-location&gt;<br class="xooki-br"/>      &lt;retrieve-location&gt;lib/test/sant-classes-src-1.01.00b04-dev.zip&lt;/retrieve-location&gt;<br class="xooki-br"/>    &lt;/artifact&gt;<br class="xooki-br"/>    &lt;artifact name="sant-classes-unoptimized" ext="jar" type="jar"&gt;<br class="xooki-br"/>      &lt;origin-location is-local="true"&gt;<br class="xooki-br"/>        C:/home/jstuyts/data/ivy/local/hippo/sant-classes/1.01.00b04-dev/sant-classes-unoptimized-1.01.00b04-dev.jar&lt;/origin-location&gt;<br class="xooki-br"/>      &lt;cache-location&gt;<br class="xooki-br"/>        C:/home/jstuyts/data/ivy/cache/hippo/sant-classes/jars/sant-classes-unoptimized-1.01.00b04-dev.jar&lt;/cache-location&gt;<br class="xooki-br"/>      &lt;retrieve-location&gt;lib/test/sant-classes-unoptimized-1.01.00b04-dev.jar&lt;/retrieve-location&gt;<br class="xooki-br"/>    &lt;/artifact&gt;<br class="xooki-br"/>  &lt;/module&gt;<br class="xooki-br"/>  &lt;module organisation="testng" name="testng" rev="4.6.1-jdk15" status="release"&gt;<br class="xooki-br"/>    &lt;artifact name="testng" ext="jar" type="jar"&gt;<br class="xooki-br"/>      &lt;origin-location is-local="false"&gt;<br class="xooki-br"/>        <a href="http://repository.hippocms.org/maven/testng/jars/testng-4.6.1-jdk15.jar&lt;/origin-location&gt">http://repository.hippocms.org/maven/testng/jars/testng-4.6.1-jdk15.jar&lt;/origin-location&gt</a>;<br class="xooki-br"/>      &lt;cache-location&gt;C:/home/jstuyts/data/ivy/cache/testng/testng/jars/testng-4.6.1-jdk15.jar&lt;/cache-location&gt;<br class="xooki-br"/>      &lt;retrieve-location&gt;lib/test/testng-4.6.1-jdk15.jar&lt;/retrieve-location&gt;<br class="xooki-br"/>    &lt;/artifact&gt;<br class="xooki-br"/>  &lt;/module&gt; 
</pre>

<h1>Attributes</h1>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>tofile</td><td>the file to which the report should be written</td>
        <td>Yes</td></tr>
    <tr><td>pattern</td><td>the retrieve pattern to use to fill the retrieve location information about the artifacts</td>
        <td>No. Defaults to ${ivy.retrieve.pattern}.</td></tr>
    <tr><td>conf</td><td>a comma separated list of the configurations to use to generate the report</td>
        <td>No. Defaults to the configurations resolved by the last resolve call</td></tr>
    <tr><td>haltonfailure</td><td>true to halt the build on ivy failure, false to continue</td><td>No. Defaults to true</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <b>(since 2.0)</b></td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:artifactreport tofile="${basedir}/path/to/myreport.xml" /&gt;
</pre>
Generates the artifact report for all configurations resolved during the last resolve call (in the same build).<br class="xooki-br"/>
<pre>
&lt;ivy:artifactreport tofile="${basedir}/path/to/myreport.xml" conf="default"/&gt;
</pre>
Generates the artifact report for only the default configuration resolved during the last resolve call.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>buildlist</div><br class="xooki-br"/>The buildlist task enable to obtain a filelist of files (usually build.xml files) ordered according to ivy dependency information from the least dependent to the most one, or the inverse. (<span class="since">since 1.2</span>)<br class="xooki-br"/><br class="xooki-br"/>This is particularly useful combined with subant, to build a set of interelated projects being sure that a dependency will be built before any module depending on it.<br class="xooki-br"/><br class="xooki-br"/>When the ivy.xml of the modules that you want to order doesn't contains a <a href="../ivyfile/info.html">revision</a> numbers, the rev attributes declared in the dependency is not used.<br class="xooki-br"/>When the ivy.xml of the modules that you want to order contains a <a href="../ivyfile/info.html">revision</a> numbers, the revision numbers are used.    If the revision number doesn't match a dependency description a warning is logged and the modules is considered as different modules.  <br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> A root attribute can also be used to include, among all the modules found, only the one that are dependencies (either direct or transitive) of a root module. This can also be used with the excluderoot attribute, which when set to true will exclude the root itself from the list.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4.1</span> A leaf attribute can also be used to include, among all the modules found, only the one that have dependencies (either direct or transitive) on a leaf module. This can also be used with the excludeleaf attribute, which when set to true will exclude the leaf itself from the list.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> The ivy.sorted.modules property is set in the ant at the end of the task with a comma separated list of ordered modules. This can be useful for debug or information purpose.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> The root and leaf attributes can be a delimited list of modules to use as roots.  These modules, and all their dependencies will be included in the build list.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> By default, all the modules included in a circular dependency are grouped together so that any dependency of any module in the loop will apear before the modules in the loop.  This garantee that if there is a depedendency path between a module A and a module B (but no dependency path from B to A), B will alway apear before A even if A is included in a loop in the provided set of modules to sort.<br class="xooki-br"/>Note that circular dependency can also trigger a failure depending on the value configured in the circularDependencyStrategy of your <a href="../configuration/conf.html#circularDependencyStrategy">settings</a><br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> When you are specifying root or leaf modules you can limit the resulting list to only direct dependencies of the roots modules or to modules that directly depends on your leaf modules.<br class="xooki-br"/><br class="xooki-br"/>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>reference</td><td>the reference of the path to set</td>
        <td>Yes</td></tr>
    <tr><td>ivyfilepath</td><td>the relative path from files to order to corresponding ivy files</td><td>No. Defaults to ${ivy.buildlist.ivyfilepath}</td></tr>
    <tr><td>root</td><td><span class="since">since 2.0</span> the names of the modules which should be considered as the root of the buildlist. <br/><span class="since">since 1.3</span> Was limited to only one module name before 2.0.</td><td>No. Defaults to no root (all modules are used in the build list)</td></tr>
    <tr><td>excluderoot</td><td><span class="since">since 1.3</span> true if the root defined should be excluded from the list</td><td>No. Defaults to false</td></tr>
    <tr><td>leaf</td><td><span class="since">since 2.0</span> the names of the modules which should be considered as the leaf of the buildlist. <br/><span class="since">since 1.4.1</span> Was limited to only one module name before 2.0.</td><td>No. Defaults to no leaf (all modules are used in the build list)</td></tr>
  <tr><td>onlydirectdep</td><td><span class="since">since 2.0</span> true if the<br class="xooki-br"/>resulting list should be restricted to direct dependencies of root modules or modules that directly depends on the leaf modules.<br/>
This field is ignored when neither root neither leaf is filled.<br class="xooki-br"/>     </td><td>No. Defaults to no false</td></tr>
    <tr><td>delimiter</td><td><span class="since">since 2.0</span> delimiter to use when specifying multiple module names in the root and leaf properties.</td><td>No. Defaults to the comma (,) character.</td></tr>
    <tr><td>excludeleaf</td><td><span class="since">since 1.4.1</span> true if the leaf defined should be excluded from the list</td><td>No. Defaults to false</td></tr>
    <tr><td>haltonerror</td><td>true to halt the build when an invalid ivy file is encountered, false to continue</td><td>No. Defaults to true</td></tr>
    <tr><td>skipbuildwithoutivy</td><td>true to skip files of the fileset with no corresponding ivy file, false otherwise. If false the file with no corresponding ivy file will be considered as independent of the other and put at the beginning of the built filelist.</td><td>No. Defaults to false</td></tr>
    <tr><td>reverse</td><td>true to obtain the list in the reverse order, i.e. from the most dependent to the least one</td><td>No. Defaults to default false</td></tr>
    <tr><td>settingsRef</td><td><span class="since">since 2.0</span> A reference to the ivy settings that must be used by this task</td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>

<h2>Parameters specified as nested elements</h2>
<h3>fileset</h3>
FileSets are used to select sets of files to order.<br class="xooki-br"/><h1>Examples</h1>
<pre>
    &lt;ivy:buildlist reference="build-path"&gt;<br class="xooki-br"/>      &lt;fileset dir="projects" includes="**/build.xml"/&gt;<br class="xooki-br"/>    &lt;/ivy:buildlist&gt;
</pre>
Builds a list of build.xml files sorted according to the ivy.xml files found at the same level (the default value for ivyfilepath is ivy.xml).<br class="xooki-br"/><br class="xooki-br"/>This list can then be used like that:
<pre>
    &lt;subant target="build" buildpathref="build-path" /&gt;
</pre>

<hr/>
<pre>
    &lt;ivy:buildlist reference="build-path" ivyfilepath="ivy/ivy.xml" reverse="true"&gt;<br class="xooki-br"/>      &lt;fileset dir="projects" includes="**/build.xml"/&gt;<br class="xooki-br"/>    &lt;/ivy:buildlist&gt;
</pre>
Builds a list of build.xml files sorted according to the ivy.xml files found in an ivy directory relative to those build files. The list is sorted from the most dependent to the least one.<br class="xooki-br"/><hr/>
<pre>
    &lt;ivy:buildlist reference="build-path" ivyfilepath="ivy/ivy.xml" root="myapp"&gt;<br class="xooki-br"/>      &lt;fileset dir="projects" includes="**/build.xml"/&gt;<br class="xooki-br"/>    &lt;/ivy:buildlist&gt;
</pre>
Builds a list of build.xml files sorted according to the ivy.xml files found in an ivy directory relative to those build files. Only build.xml files of modules which are dependencies of myapp (either direct or transitive) are put in the result list.<br class="xooki-br"/><hr/>
<pre>
    &lt;ivy:buildlist reference="build-path" ivyfilepath="ivy/ivy.xml" leaf="mymodule"&gt;<br class="xooki-br"/>      &lt;fileset dir="projects" includes="**/build.xml"/&gt;<br class="xooki-br"/>    &lt;/ivy:buildlist&gt;
</pre>
Builds a list of build.xml files sorted according to the ivy.xml files found in an ivy directory relative to those build files. Only build.xml files of modules which have dependencies (direct or transitive) on mymodule are put in the result list.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>buildnumber</div><br class="xooki-br"/><span class="since">since 1.4</span>
The buildnumber task is similar to the ant buildnumber task, except that it uses ivy repository to find what is the latest version and calculate a new one for you.<br class="xooki-br"/><br class="xooki-br"/>When called it sets four properties according to what has been found.<br class="xooki-br"/>These properties are:
<ul>
<li>ivy.revision</li> the last revision found in the repository
<li>ivy.new.revision</li> the new revision calculated from the last one (see below)
<li>ivy.build.number</li> the build number found in the repository
<li>ivy.new.build.number</li> the new build number calculated from the last one, usually with +1
</ul>

build numbers are always numbers (composed of digit characters only).<br class="xooki-br"/>ivy.revision can be not set if no revision was found<br class="xooki-br"/>ivy.build.number can be not set if no revision was found or if no number was found in it<br class="xooki-br"/>ivy.new.build.number can be not set if the default new revision to use when no revision is found do not contain any number<br class="xooki-br"/><br class="xooki-br"/>The new revision is calculated using a somewhat complex to explain but very easy to use algorithm, depending on which latest version you asked.<br class="xooki-br"/><br class="xooki-br"/>Indeed you can ask for a new revision based upon the latest found for a particular prefix (the revision asked), then the new revision will be the one immediately after with only the prefix in common. If no prefix is set the very latest version is searched.<br class="xooki-br"/><br class="xooki-br"/>Examples (suppose the latest version of the module is 1.3.1):
<table>
<tr><th>revision asked</th><th>ivy.revision</th><th>ivy.new.revision</th><th>ivy.build.number</th><th>ivy.new.build.number</th></tr>
<tr><td>1.3</td><td>1.3.1</td><td>1.3.2</td><td>1</td><td>2</td></tr>
<tr><td>1</td><td>1.3.1</td><td>1.4</td><td>3</td><td>4</td></tr>
<tr><td>2</td><td>not set</td><td>2.0</td><td>not set</td><td>0</td></tr>
<tr><td></td><td>1.3.1</td><td>1.3.2</td><td>1</td><td>2</td></tr>
</table>
Note that when asking for revision 1, you can get a revision 10.0. To avoid that you can use 1. as revision asked, but in this case ivy won't find revision 1 if its the latest one, and it will thus give 1.0 as new revision. The solution to this problem is to use versions with always the same number of parts (for instance 1.0.0 instead of 1).<br class="xooki-br"/>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>organisation</td><td>the organisation of the module for which a new build number should be calculated</td>
        <td>Yes</td></tr>
    <tr><td>module</td><td>the name of the module for which a new build number should be calculated</td>
        <td>Yes</td></tr>
    <tr><td>branch</td><td>the branch of the module for which a new build number should be calculated</td>
        <td>No, defaults to the default branch for this module</td></tr>
    <tr><td>revision</td><td>the revision prefix for which a new build number should be calculated</td>
        <td>No, defaults to no prefix (will find the latest version)</td></tr>
    <tr><td>default</td><td>the default revision to assume when no revision prefix is asked and no revision is found</td>
        <td>No, defaults to 0</td></tr>
    <tr><td>defaultBuildNumber</td><td>the default build number to use for the first revision</td>
        <td>No, defaults to 0</td></tr>
    <tr><td>revSep</td><td>the revision separator to use when no matching revision is found, to separate the revision prefix from the build number</td>
        <td>No, defaults to '.'</td></tr>
    <tr><td>prefix</td><td>the prefix to use for the property names set (will be <i>prefix</i>.revision, <i>prefix</i>.new.revision, ...)</td>
        <td>No, defaults to ivy</td></tr>
    <tr><td>settingsRef</td><td><span class="since">(since 2.0)</span> A reference to the ivy settings that must be used by this task</td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>
<h1>Examples</h1>
Here is how it can be used (suppose 1.3.1 is the latest version of ivy in the repository):
<pre>
&lt;ivy:buildnumber organisation="apache" module="ivy" /&gt;
</pre>
will set 1.3.1 as revision, 1.3.2 as new revision, 1 as build number and 2 as new build number<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:buildnumber organisation="apache" module="ivy" revision="1.3" /&gt;
</pre>
will set 1.3.1 as revision, 1.3.2 as new revision, 1 as build number and 2 as new build number<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:buildnumber organisation="apache" module="ivy" revision="1.2" /&gt;
</pre>
will set 1.2 as revision, 1.2.1 as new revision, no build number and 1 as new build number<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:buildnumber organisation="apache" module="ivy" revision="1." /&gt;
</pre>
will set 1.3.1 as revision, 1.4 as new revision, 3 as build number and 4 as new build number<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:buildnumber organisation="apache" module="ivy" revision="3." /&gt;
</pre>
will set no revision, 3.0 as new revision, no build number and 0 as new build number<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:buildnumber organisation="apache" module="ivy" revision="1.4-RC" defaultBuildNumber="1" revSep=""/&gt;
</pre>
If called while no release candidate is in the repository, will set ivy.revision to 1.4-RC1. Then it will increment each time, 1.4-RC2, 1.4-RC3, and so on.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>cachefileset</div><br class="xooki-br"/>Constructs an ant fileset consisting of artifacts in ivy cache for a configuration (<span class="since">since 1.2</span>).<br/><br/>
This is a <a href="../use/postresolvetask.html">post resolve task</a>, with all the behaviour and attributes common to all post resolve tasks. Note that this task<br class="xooki-br"/>does not rely on retrieve, because built fileset is made of artifacts direcly in ivy cache.<br/><br/>
Please prefer the use of retrieve + standard ant path creation, which make your build<br class="xooki-br"/>more independent from ivy (once artifacts are properly retrieved, ivy is not required any more).<br/><br/>
Built fileset is registered in ant with a given id, and can thus be used like any other ant fileset using<br class="xooki-br"/>refid.<br class="xooki-br"/>  
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>setid</td><td>the id to reference the built fileset</td>
        <td>Yes</td></tr>
    <tr><td>conf</td><td>a comma separated list of the configurations to put in the created path</td>
        <td>No. Defaults to the configurations resolved by the last resolve call, or * if no resolve was explicitly called</td></tr>
    <tr><td>type</td><td>comma separated list of artifact types to accept in the path, * for all</td><td>No. Defaults to *</td></tr>
    <tr><td>settingsRef</td><td><span class="since">(since 2.0)</span> A reference to the ivy settings that must be used by this task</td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-4'>cachepath</div><br class="xooki-br"/>Constructs an ant path consisting of artifacts in ivy cache (or origin location with depending on useOrigin setting) for a resolved module configuration.<br class="xooki-br"/><br class="xooki-br"/>This is a <a href="use/postresolvetask.html">post resolve task</a>, with all the behaviour and attributes common to all post resolve tasks.<br class="xooki-br"/><br class="xooki-br"/>Please prefer the use of retrieve + standard ant path creation, which make your build more independent from ivy (once artifacts are properly retrieved, ivy is not required any more).<br class="xooki-br"/><br class="xooki-br"/>Built path is registered in ant with a given id, and can thus be used like any other ant path using refid.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> The behaviour is like this when 'useOrigin=true':
<ul>
<li>if the artifact is not local, the location from within the cache is used</li>
<li>if the artifact is a local artifact, it's original location is used</li>
</ul>
Note that if resolve has been called separately, the copy to the cache may have occur normally if useOrigin was not set when calling <a href="use/resolve.html">resolve</a>. If resolve has not been called, it will be called automatically with useOrigin set to the value specified on this task.<br class="xooki-br"/>  
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>pathid</td><td>the id to reference the built path</td>
        <td>Yes</td></tr>
    <tr><td>conf</td><td>a comma separated list of the configurations to put in the created path</td>
        <td>No. Defaults to the configurations resolved by the last resolve call, or * if no resolve was explicitly called</td></tr>
    <tr><td>type</td><td>comma separated list of artifact types to accept in the path, * for all (<span class="since">since 1.2</span>)</td><td>No. Defaults to *</td></tr>
    <tr><td>useOrigin</td><td>true to use original location of local artifacts, false to use only cache locations <span class="since">since 1.4</span></td>
        <td>No. Defaults false</td></tr>
    <tr><td>settingsRef</td><td><span class="since">(since 2.0)</span> A reference to the ivy settings that must be used by this task</td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>

<h1>Examples</h1>
<pre>
&lt;cachepath pathid="default.classpath" conf="default" /&gt;
</pre>
Construct an ant path composed of all artifacts being part of the default configuration obtained through the last resolve call.<br class="xooki-br"/><br class="xooki-br"/><hr/>

<pre>
&lt;cachepath pathid="default.classpath" conf="default" useOrigin="true" /&gt;
</pre>
Same as before but will use the original location for local artifacts, and the cache location for other artifacts.<br class="xooki-br"/><br class="xooki-br"/><hr/>

<pre>
&lt;ivy:cachepath organisation="emma" module="emma" revision="2.0.4217" inline="true" conf="ant" pathid="emma.classpath"/&gt;<br class="xooki-br"/>&lt;taskdef resource="emma_ant.properties" classpathref="emma.classpath" /&gt; 
</pre>
Resolves the emma module in version 2.0.4217, constructs an ant path with the corresponding artifacts, and then define the emma tasks using this path.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>cleancache</div><br class="xooki-br"/><span class="since">since 2.0</span>
Cleans the Ivy cache.<br class="xooki-br"/><br class="xooki-br"/>This task is roughly equivalent to:
<pre>
&lt;delete dir="${ivy.cache.dir}" /&gt;
</pre>
Using the regular Ant delete task is more flexible, since it allows to specify the files to delete. But it requires an Ivy settings to be loaded, and settings scoping is possible only by using suffixed ant property for the cache directory. <br class="xooki-br"/><br class="xooki-br"/>This task loads the Ivy settings as any other post settings task, and allows easy scoping with the attribute settingsRef.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task</td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:cleancache /&gt;
</pre>
Cleans the cache directory as defined in the loaded settings (by default ~/.ivy2/cache)<br class="xooki-br"/>
<pre>
&lt;ivy:cleancache settingsRef="mysettings"/&gt;
</pre>
Cleans the cache directory as defined in the loaded settings identified as 'mysettings'<hr/><div class='toc-title toc-title-4'>configure</div><br class="xooki-br"/><span class="since">(since 2.0)</span> the configure task is deprecated.  Use the <a href="settings.html">setting</a> declaration<br/>

The configure task is used to configure ivy with an xml settings file.<br/><br/>
See <a href="../configuration.html">settings</a> for details about the settings file itself.<br/><br/>
<i>Note for developers:<br/>
After the call to this task, a reference to the configured ivy instance used by all subsequent ant tasks is put in the ant project, under the id "ivy.instance".</i><br class="xooki-br"/><br class="xooki-br"/><span class="since">since 2.0</span> The file loaded used to be called configuration file in versions prior to 2.0. The name 'settings' and the use of the ivy.settings.file is new to 2.0.
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>file</td><td>path to the settings file to use</td>
        <td rowspan="2">No. If a file is provided, url is ignored. If none are provided, then it attempts to find a file at ${ivy.settings.file}, and if this file does not exist, it uses a <a href="../samples/ivysettings-default.xml">default settings file</a></td></tr>
    <tr><td>url</td><td>url of the settings file to use</td></tr>
    <tr><td>host</td><td>http authentication host</td><td rowspan="4">No, unless authentication is required</td></tr>
    <tr><td>realm</td><td>http authentication realm</td></tr>
    <tr><td>username</td><td>http authentication user name</td></tr>
    <tr><td>passwd</td><td>http authentication password</td></tr>
</tbody>
</table>
<h2>HTTP Authentication</h2>
<i>Note: HTTP Authentication can be used only if <a href="http://jakarta.apache.org/commons/httpclient/">commons-httpclient.jar</a> is in your classpath</i><br class="xooki-br"/>If any of the url you use in ivy (especially in dependency resolvers) need http<br class="xooki-br"/>authentication, then you have to provide the host, realm, username and passwd<br class="xooki-br"/>attributes of the configure task. These settings will then be used in any<br class="xooki-br"/>further call to ivy tasks.<br/><br/>

<b>Since 1.4:</b><br class="xooki-br"/>It's also possible to configure authentication settings for multiple urls. This can be done with the <credentials> subelements. See the examples for more details.<br class="xooki-br"/><br class="xooki-br"/><h2>Examples</h2>
<h3>Simplest settings</h3>
<pre>&lt;ivy:configure /&gt;</pre>
Use either ${ivy.settings.file} if it exists, or the <a href="../samples/ivysettings-default.xml">default settings file</a><br class="xooki-br"/><h3>Configure with a file</h3>
<pre>&lt;ivy:configure file="myconffile.xml" /&gt;</pre>
<h3>Configure with an url</h3>
<pre>&lt;ivy:configure url="<a href="http://mysite.com/myconffile.xml">http://mysite.com/myconffile.xml</a>" /&gt;</pre>
<h3>Configure multiple URLs which require autentication</h3>
<pre>
&lt;ivy:configure file="path/to/my/ivysettings.xml"&gt;<br class="xooki-br"/>  &lt;credentials host="myhost.com" realm="My Realm" username="myuser" passwd="mypasswd" /&gt;<br class="xooki-br"/>  &lt;credentials host="yourhost.com" realm="Your Realm" username="myuser" passwd="myotherpasswd" /&gt;<br class="xooki-br"/>&lt;/ivy:configure&gt; 
</pre>
	<hr/><div class='toc-title toc-title-4'>deliver</div><br class="xooki-br"/>Delivers a resolved ivy file of the current module, and possibly do recursive delivery of dependencies. <br class="xooki-br"/>This task does two main things:<br class="xooki-br"/><h2>Generate a resolved ivy file</h2>
This task generates a resolved ivy file of the current module, based upon the last resolve done. The resolved ivy file contains updated information about the delivered module, such as revision and status.<br class="xooki-br"/><br class="xooki-br"/>Moreover, all included configurations files are included in the ivy file, and variables are replaced by their values.<br class="xooki-br"/><br class="xooki-br"/>Finally, in the resolved ivy file, dynamic revisions are replaced by the static ones that have been found during the resolve step, so the ivy file can be used later safely to obtain the same dependencies (providing that a revision uniquely identifies a module, which should be the case for proper ivy use).<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> The replacement of dynamic revisions by static ones can be turned off, so that dynamic revisions are kept in the ivy file.<br class="xooki-br"/><h2>do recursive delivery</h2>
This is done only if a deliver target is given to the deliver task.<br class="xooki-br"/><br class="xooki-br"/>If a deliver target is set, then it is called (via an antcall) for each dependency which has not a suffisant status compared to the deliver status set for this task. This means that if you deliver an integration revision, no recursive delivery will be done.<br class="xooki-br"/><br class="xooki-br"/>If you deliver a milestone or a release revision, deliver target will be called with each integration dependency. <br class="xooki-br"/><br class="xooki-br"/>The deliver target is called with the following properties available:
<ul>
  <li>dependency.name</li>
the name of the dependency to recursively deliver<br class="xooki-br"/>  <li>dependency.published.status</li>
the status to which the dependency should be delivered<br class="xooki-br"/>  <li>dependency.published.version</li>
the revision to which the dependency should be delivered<br class="xooki-br"/>  <li>dependency.version</li>
the revision of the dependency that should be delivered (the one that was retrieved during last resolve)
</ul>
Both <pre>dependency.published.status</pre> and <pre>dependency.published.version</pre> can be either asked to the user through ant input tasks (default behaviour), or be always the same for the whole recursive delivery process if the following properties are set:
<ul>
<li>recursive.delivery.status</li>set to the status to which all dependencies requiring to be delivered will be
<li>recursive.delivery.version</li>set to the version to which all dependencies requiring to be delivered will be
</ul>

Usually the deliver target itself triggers an another ant build (using ant task) even if this is up to you to decide.<br class="xooki-br"/><br class="xooki-br"/>The delivered ivy file will update its dependency revisions with those given here.  <br class="xooki-br"/><br class="xooki-br"/><h2>deliver and publish</h2>
The deliver task is most of the time not called explicitly, but rather called automatically by the <a href="use/publish.html">publish</a> task. So, when shall the deliver task be called explictly? When you actually need to separate what is performed by the deliver task (see above), from what is performed by the publish task, i.e. upload a module to a repository.<br class="xooki-br"/><br class="xooki-br"/>And this can be particularly useful if you want to process the generated ivy file before uploading it (if you want to add automatically more information like an SCM tag used, the user who performed the release, ...).<br class="xooki-br"/><br class="xooki-br"/>It can also be useful if you want to trigger a recursive delivery and then ensure that you get the recursively delivered modules as dependencies. In this case your build order may look like this:<br class="xooki-br"/>- ivy:configure<br class="xooki-br"/>- ivy:resolve<br class="xooki-br"/>- ivy:deliver with recursive delivery<br class="xooki-br"/>- ivy:resolve again with the ivy file generated by the recursive delivery<br class="xooki-br"/>- do your build stuff (compile, jar, whatever)<br class="xooki-br"/>- ivy:publish <br class="xooki-br"/>  
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>deliverpattern</td><td>the pattern to use for ivy file delivery</td>
        <td>No. Defaults to ${ivy.deliver.ivy.pattern}</td></tr>
    <tr><td>pubrevision</td><td>the revision to use for the publication</td>
        <td>No. Defaults to ${ivy.deliver.revision} if set, or the revision resolved if set, or a timestamp</td></tr>
    <tr><td>pubdate</td><td>the publication date to use for the publication. This date should be either 'now', or a date given with the following pattern: yyyyMMddHHmmss</td>
        <td>No. Defaults to 'now'</td></tr>
    <tr><td>status</td><td>the status to use for the publication</td>
        <td>No. Defaults to ${ivy.status}</td></tr>
    <tr><td>delivertarget</td><td>the target to call for recursive delivery</td>
        <td>No. No recursive delivery is done by default</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td>
        <td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>replacedynamicrev</td><td>true to replace dynmic revisions by static ones in the delivered file, false to avoid this replacement <span class="since">since 1.3</span></td>
        <td>No. Defaults to true</td></tr>
	<tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td>
		<td>No, 'ivy.instance' is taken by default.</td></tr>    
	<tr><td>conf</td><td>comma-separated list of configurations to include in the delivered file. Accepts wildcards. <span class="since">since 2.0</span></td>
        <td>No. Defaults to all configurations</td></tr>
</tbody>
</table>

<h1>Example</h1>
Deliver an ivy file without the private configurations:
<pre>
&lt;deliver conf="*(public)" /&gt; 
</pre>
<hr/><div class='toc-title toc-title-4'>findrevision</div><br class="xooki-br"/><span class="since">since 1.4</span>
Finds the latest revision of a module matching a given version constraint.<br class="xooki-br"/><br class="xooki-br"/>A version constraint is what is used when declaring a <a href="../ivyfile/dependency.html">dependency</a> on a module.<br class="xooki-br"/>If the module is not found the property is not set.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>organisation</td><td>the organisation of the module to find</td>
        <td>Yes</td></tr>
    <tr><td>module</td><td>the the name of the module to find</td>
        <td>Yes</td></tr>
    <tr><td>branch</td><td>the branch of the module to find</td>
        <td>No, defaults to the default branch for the given module</td></tr>
    <tr><td>revision</td><td>the revision constraint to apply</td>
        <td>Yes</td></tr>
    <tr><td>property</td><td>the property to set with the found revision</td>
        <td>No, defaults to ivy.revision</td></tr>
<tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:findrevision organisation="apache" module="ivy" revision="latest.integration"/&gt;
</pre>
finds the latest version of ivy available in the repository and sets the property ivy.revision according to what was found.<br class="xooki-br"/><br class="xooki-br"/><hr/>

<pre>
&lt;ivy:findrevision organisation="apache" module="ivy" revision="1.0+"/&gt;
</pre>
same as above but only with 1.0 sub versions.<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>info</div><br class="xooki-br"/><span class="since">since 1.4</span>
The info task ease the access to some essential data contained in an ivy file without performing a dependency resolution.<br class="xooki-br"/><br class="xooki-br"/>The information is retrieved by setting ant properties:
<table>
<tr><td>ivy.organisation</td><td>The organisation of the module, as found in the <a href="../ivyfile/info.html">info</a> tag of the ivy file parsed</td></tr>
<tr><td>ivy.module</td><td>The name of the module, as found in the <a href="../ivyfile/info.html">info</a> tag of the ivy file parsed</td></tr>
<tr><td>ivy.revision</td><td>The revision of the module, as found in the <a href="../ivyfile/info.html">info</a> tag of the ivy file parsed</td></tr>
<tr><td>ivy.configurations</td><td>A comma separated list of configurations of the module, as declared in the <a href="../ivyfile/configurations.html">configurations</a> section</td></tr>
<tr><td>ivy.public.configurations</td><td>A comma separated list of public configurations of the module, as declared in the <a href="../ivyfile/configurations.html">configurations</a> section</td></tr>
</table>

<h1>Attributes</h1>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>file</td><td>the ivy file to parse</td>
        <td>Yes</td></tr>
<tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr></tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:info file="${basedir}/path/to/ivy.xml" /&gt;
</pre>
Parses ${basedir}/path/to/ivy.xml and set properties as described above accordingly.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>install</div><br class="xooki-br"/>Installs a module and all its dependencies in a resolver. <span class="since">since 1.3</span>

The module to install should be available in a resolver, and will be installed in another resolver which should support publish.<br class="xooki-br"/><br class="xooki-br"/>This is particularly useful for users who only have a private repository, and want to benefit from public repositories from time to time. In this case, when a module is missing in the private repository, a call to install let download the module from a public repository not usually used for dependency resolution, and install it and its dependencies in the private repository.<br class="xooki-br"/><br class="xooki-br"/>For more details about this task and its usage see the <a href="../tutorial/build-repository.html">build repository tutorial</a><br class="xooki-br"/>  
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>from</td><td>the name of the resolver in which the module must be found</td>
        <td>Yes</td></tr>
    <tr><td>to</td><td>the name of the resolver in which the module must be installed</td>
        <td>Yes</td></tr>
    <tr><td>organisation</td><td>the name of the organisation of the module to install</td>
        <td>Yes</td></tr>
    <tr><td>module</td><td>the name of the module to install</td>
        <td>Yes</td></tr>
    <tr><td>revision</td><td>the revision of the module to install</td>
        <td>Yes</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td>
        <td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>overwrite</td><td>true to override modules already present in the destination resolver, false otherwise</td>
        <td>No, defaults to false</td></tr>
    <tr><td>transitive</td><td>true to install the module and all its transitive dependencies, false to install only the module</td>
        <td>No, defaults to false</td></tr>
    <tr><td>matcher</td><td>the name of the matcher to use to find the modules to install</td>
        <td>No, defaults to exact</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td>
    	<td>No, 'ivy.instance' is taken by default.</td></tr>
    <tr><td>haltonunresolved</td><td>true to fail build on unresolved dependencies <span class="since">since 2.0</span></td>
        <td>No, defaults to true</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:install organisation="apache" module="commons-lang" revision="2.0" from="ivyrep" to="myfsresolver"/&gt;
</pre>
Installs the module commons-lang from apache in revision 2.0 in the resolver myfsresolver. The module is found in the resolver named 'ivyrep'.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>listmodules</div><br class="xooki-br"/><span class="since">since 1.4</span>
Finds the list of modules in the repository matching some criteria and set a corresponding list of properties in ant.<br class="xooki-br"/><br class="xooki-br"/>The criteria is set by given patterns matching the organisation, name branch and revision of the modules to find.<br class="xooki-br"/><br class="xooki-br"/>To know if a module matches the criteria ivy will use the configured <a href="../concept.html#matcher">pattern matcher</a>.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>organisation</td><td>the pattern matching the organisation of the modules to list</td>
        <td>Yes</td></tr>
    <tr><td>module</td><td>the pattern matching the name of the modules to list</td>
        <td>Yes</td></tr>
    <tr><td>branch</td><td>the pattern matching the branch of the modules to list</td>
        <td>No, defaults to '*'</td></tr>
    <tr><td>revision</td><td>the pattern matching the revision of the modules to list</td>
        <td>Yes</td></tr>
    <tr><td>matcher</td><td>the name of the pattern matcher to use for matching the modules fields</td>
        <td>No. Defaults to exactOrRegexp.</td></tr>
    <tr><td>property</td><td>the pattern of the property to set when a module is found</td>
        <td>Yes</td></tr>
    <tr><td>value</td><td>The pattern of the value to set when a module is found</td><td>Yes</td></tr>
<tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr></tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:listmodules organisation="apache" module="ivy" revision="*" property="ivy.[revision]" value="found"/&gt;
</pre>
will find all revisions of the module ivy in the org apache, and create one property for each revision found, the name of the property depending on the revision, the value being always 'found'<br class="xooki-br"/><br class="xooki-br"/><hr/>

<pre>
&lt;ivy:listmodules organisation="*" module="ivy*" revision="1.0" matcher="glob" property="modules.[module]" value="[organisation]"/&gt;
</pre>
use the glob matcher to find all modules which name starts with ivy with revision 1.0, and sets for each a property with module name found  and organisation for value.<br class="xooki-br"/>Example:<br class="xooki-br"/>modules.ivy=apache<br class="xooki-br"/>modules.ivyde=apache<br class="xooki-br"/>modules.ivytools=ivytools<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>post resolve tasks</div><br class="xooki-br"/>Several tasks in Ivy are considered as post resolve task and share a common behaviour and settings accordingly.<br class="xooki-br"/><br class="xooki-br"/>These tasks are:
<ul>
<li><a href="use/retrieve.html">retrieve</a></li>
<li><a href="use/cachefileset.html">cachefileset</a></li>
<li><a href="use/cachepath.html">cachepath</a></li>
<li><a href="use/artifactproperty.html">artifactproperty</a> <span class="since">(since 2.0)</span></li>
<li><a href="use/artifactreport.html">artifactreport</a> <span class="since">(since 2.0)</span></li>
</ul>

All these tasks will trigger automatically a resolve if:
<ul>
<li>none has already been called in the current build with the attribute keep set to true (see below)</li>
<li>organisation and module are not set</li>
</ul>

Since Ivy 1.4, there are two ways to run a <a href="use/resolve.html">resolve</a>: with an ivy file, or with the inline mode.<br class="xooki-br"/>When you call resolve with an ivy file, the default for it is to keep the resolved data for use by the subsequent post resolve tasks. When you run an inline resolve, the default is not to keep the data. You can override this behaviour by setting the keep attribute as you like.<br class="xooki-br"/><br class="xooki-br"/>If you want to to reuse the resolved data obtained through a call to resolve in another build (i.e. not the current one), then you have to set the organisation and module attributes. This work only if the cache was not cleaned since your last resolve call. This does not work with inline calls, which must be performed in the same build.<br class="xooki-br"/><br class="xooki-br"/>The attributes listed are then mostly used only if a resolve is triggered automatically.<br class="xooki-br"/><br class="xooki-br"/><h1>Attributes</h1>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>conf</td><td>a comma separated list of the configurations to retrieve</td>
        <td>No. Defaults to the configurations resolved by the last resolve call, or * if no resolve was explicitly called</td></tr>
    <tr><td>inline</td><td>true to use inline mode, false to resolve an ivy file <span class="since">since 1.4</span></td><td>No. defaults false</td></tr>
    <tr><td>organisation</td><td>the organisation of the module to retrieve. This usually doesn't need to be set since it defaults to the last resolved one, except for inline mode where it is required.</td><td>Yes in inline mode, otherwise no, it then defaults to last resolved module name</td></tr>
    <tr><td>module</td><td>the name of the module to retrieve. This usually doesn't need to be set since it defaults to the last resolved one, except for inline mode where it is required.</td><td>Yes in inline mode, otherwise no, it then defaults to last resolved module name</td></tr>
    <tr><td>revision</td><td>the revision constraint of the module to retrieve. Used only in inline mode. <span class="since">since 1.4</span></td><td>No. Defaults to latest.integration</td></tr>
    <tr><td>transitive</td><td>true to resolve dependencies transitively, false otherwise <span class="since">since 1.4</span></td><td>No. Defaults to true</td></tr>
    <tr><td>haltonfailure</td><td>true to halt the build on ivy failure, false to continue</td><td>No. Defaults to true</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td><td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>file</td><td>the file to resolve if a resolve is necessary <span class="since">since 2.0</span></td><td>No. Defaults to the previous resolved Ivy file or to ${ivy.dep.file}</td></tr>
	<tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr>
	<tr><td>resolveId</td><td>The id which was used for a previous resolve, or the resolveId if a new resolve is performed <span class="since">(since 2.0)</span></td><td>No, defaults to '[org]-[module]'.</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:cachepath organisation="emma" module="emma" revision="2.0.4217" inline="true" conf="ant" pathid="emma.classpath"/&gt;<br class="xooki-br"/>&lt;taskdef resource="emma_ant.properties" classpathref="emma.classpath" /&gt; 
</pre>
Resolves the emma module in version 2.0.4217, constructs an ant path with the corresponding artifacts, and then define the emma tasks using this path.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>publish</div><br class="xooki-br"/>Publishes the current modules artifacts.<br class="xooki-br"/><br class="xooki-br"/>This task is meant to publish the declared published artifacts of the current module to a repository.<br class="xooki-br"/><br class="xooki-br"/>The repository is given through the name of a resolver declared in current ivy configuration. See <a href="../configuration.html">configuration</a> for details about resolver supporting artifact publishing.<br class="xooki-br"/>It also publishes the delivered ivy file (except if you don't want), and even deliver it if it has not been done with a previous deliver call or if forcedeliver is set to true. That's why this task takes some parameters useful only for delivery.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4.1</span>
The source artifact pattern can be specified either as an attribute on the task (artifactspattern) or using a list of nested artifacts element (see examples below).<br class="xooki-br"/>  
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>artifactspattern</td><td>the pattern to use to find artifacts to publish</td>
        <td>No. Defaults to ${ivy.publish.src.artifacts.pattern}</td></tr>
    <tr><td>resolver</td><td>the name of the resolver to use for publication</td>
        <td>Yes</td></tr>
    <tr><td>pubrevision</td><td>the revision to use for the publication</td>
        <td>No. Defaults to the ${ivy.deliver.revision}</td></tr>
    <tr><td>forcedeliver</td><td>true to force the implicit call to deliver, false to do it only if the ivy file to publish doesn't exist yet <span class="since">since 1.4</span></td>
        <td>No. Defaults to false</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td>
        <td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>replacedynamicrev</td><td>true to replace dynmic revisions by static ones in the delivered file, false to avoid this replacement <span class="since">since 1.3</span></td>
        <td>No. Defaults to true</td></tr>
    <tr><td>publishivy</td><td>True to publish delivered ivy file, false otherwise</td>
        <td>No. Defaults to true</td></tr>
    <tr><td>conf</td><td>A comma separated list of configurations to publish.  <span class="since">since 1.4.1</span></td>
        <td>No. Defaults to all configurations</td></tr>
    <tr><td>overwrite</td><td>True to overwrite files in repository if the revision already exist, false to let it as is</td>
        <td>No. Defaults to false</td></tr>
    <tr><td>warnonmissing</td><td>True to warn when artifacts to be published are missing</td>
        <td>No. Defaults to true</td></tr>
    <tr><td>haltonmissing</td><td>True to halt build when artifacts to be published are missing</td>
        <td>No. Defaults to true</td></tr>
    <tr><td>srcivypattern</td><td>the pattern to use to find ivy file to publish, and even deliver if necessary (<span class="since">since 1.2</span>)</td>
        <td>No. Defaults to the value of artifactspattern</td></tr>
    <tr><td>pubdate</td><td>the publication date to use for the delivery, if necessary. This date should be either 'now', or a date given with the following pattern: yyyyMMddHHmmss</td>
        <td>No. Defaults to 'now'</td></tr>
    <tr><td>status</td><td>the status to use for the delivery, if necessary</td>
        <td>No. Defaults to ${ivy.status}</td></tr>
    <tr><td>delivertarget</td><td>the target to call for recursive delivery</td>
        <td>No. No recursive delivery is done by default</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr></tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:publish resolver="local" pubrevision="1.0"&gt;<br class="xooki-br"/>   &lt;artifacts pattern="1/[artifact].[ext]" /&gt;<br class="xooki-br"/>   &lt;artifacts pattern="2/[artifact].[ext]" /&gt;<br class="xooki-br"/>&lt;/ivy:publish&gt;
</pre>
Publishes the last resolved module in the local resolver with revision 1.0, looking for artifacts in directories 1 and 2.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>repreport</div><br class="xooki-br"/>Generates reports about dependencies among several modules in the repository (repreport stands for repository report).<span class="since">since 1.4</span>

This task is similar to the <a href="use/report.html">report</a> task, except that instead of working on a single module you just resolved, it works with a set of modules in your repository.<br class="xooki-br"/><br class="xooki-br"/>Note that the set of modules for which you generate the report is determined by setting organisation module and revision and using a matcher, but also by the dependencies of these modules. No dependency is excluded.<br class="xooki-br"/><br class="xooki-br"/>Usually the most useful report is a graph, you can generate either a graphml file that you can then easily <a href="../yed.html">layout using yEd</a>, or a dot file which is the format recognized by graphviz, which is a free tool which does automatic graph layout, and can thus be used to generate automatically a GIF or PNG of the dependencies between all your modules.<br class="xooki-br"/>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>organisation</td><td>A pattern matching the organisation of the modules for which the report should be generated</td>
        <td>No, defaults to '*'</td></tr>
    <tr><td>module</td><td>A pattern matching the name of the modules for which the report should be generated</td>
        <td>No, defaults to '*'</td></tr>
    <tr><td>branch</td><td>The name of the branch of the modules for which the report should be generated</td>
        <td>No, defaults to no branch specified</td></tr>
    <tr><td>revision</td><td>The revision of the modules for which the report should be generated. Only one revision per module will be used, so most of the time keeping the default (latest.integration) is the best thing to do, because it's not very easy to specify only one revision for several modules.</td>
        <td>No, defaults to 'latest.integration'</td></tr>
    <tr><td>todir</td><td>the directory to which reports should be generated</td>
        <td>No, defaults to execution directory</td></tr>
    <tr><td>outputname</td><td>the name to use for the generate file (without extension)</td>
        <td>No, defaults to ivy-repository-report</td></tr>
    <tr><td>xml</td><td>true to generate a xml report, false otherwise</td>
        <td>No, defaults to true</td></tr>
    <tr><td>xsl</td><td>true to generate a report using xslt, false otherwise</td>
        <td>No, defaults to false</td></tr>
    <tr><td>xslfile</td><td>indicates which xsl file should be used to generate the report</td>
        <td>Yes if you want to use xsl transformation</td></tr>
    <tr><td>xslext</td><td>indicates the extension to use when generating report using xsl</td>
        <td>No defaults to 'html'</td></tr>
    <tr><td>graph</td><td>true to generate graphml file, false otherwise</td>
        <td>No, defaults to false</td></tr>
    <tr><td>dot</td><td>true to generate graphviz dot format file, false otherwise</td>
        <td>No, defaults to false</td></tr>
    <tr><td>matcher</td><td>the name of the matcher to use for matching modules names and organisations in your repository</td>
        <td>No. Defaults to exactOrRegexp</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td>
        <td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr></tbody>
</table>

<h1>Examples</h1>
To generate a xml report for all the latest versions of all the modules in your repository:
<pre>
&lt;ivy:repreport /&gt;
</pre>

<hr/>
To generate a graphml report for all the latest versions of all the modules in your repository:
<pre>
&lt;ivy:repreport xml="false" graph="true" /&gt;
</pre>

<hr/>
To generate a xml report for all the latest versions of the modules from the organisation foo in your repository:
<pre>
&lt;ivy:repreport organisation="foo" /&gt;
</pre>

<hr/>
To generate a xml report for all the versions on the 1.x stream of the modules named bar* from the organisation foo in your repository:
<pre>
&lt;ivy:repreport organisation="foo" module="bar*" revision="1.+" matcher="glob" /&gt;
</pre>

<hr/>
To generate an XML report using a custom stylesheet:
<pre>
&lt;ivy:repreport xsl="true" xslfile="my-custom-stylesheet.xsl" xslext="xml" /&gt;
</pre>

<hr/>
To generate an XML report using a custom stylesheet which needs some parameters:
<pre>
&lt;ivy:repreport xsl="true" xslfile="my-custom-stylesheet.xsl" xslext="xml"&gt;<br class="xooki-br"/>    &lt;param name="param1" expression="value1" /&gt; <br class="xooki-br"/>    &lt;param name="param2" expression="value2" /&gt; <br class="xooki-br"/>&lt;/report&gt;
</pre>

	<hr/><div class='toc-title toc-title-4'>resolve</div><br class="xooki-br"/>The resolve task actually resolve dependencies described in an <a href="../ivyfile.html">ivy file</a>, and put the resolved dependencies in the ivy cache.<br class="xooki-br"/>If configure has not been called before resolve is called, a default configuration will be used (equivalent to call configure with no attributes).<br class="xooki-br"/><br class="xooki-br"/>After the call to this task, four properties are set in ant:
<ul>
<li>ivy.organisation</li>
set to the organisation name found in the ivyfile which was used for resolve
<li>ivy.module</li>
set to the module name found in the ivyfile which was used for resolve
<li>ivy.revision</li>
set to the revision name found in the ivyfile which was used for resolve, or a generated revision name if no revision was specified in the file
<li>ivy.resolved.configurations</li>
set to the comma separated list of configurations resolved
</ul>
<b>Since 1.2:</b><br class="xooki-br"/>An additional property is set to true if the resolved dependencies are changes since the last resolve, and to false otherwise: <pre>ivy.deps.changed</pre>

<b>Since 2.0:</b><br class="xooki-br"/>In addition, if the <i>resolveId</i> attribute has been set, the following properties are set as well:
<ul>
<li>ivy.organisation.${resolveId}</li>
<li>ivy.module.${resolveId}</li>
<li>ivy.revision.${resolveId}</li>
<li>ivy.resolved.configurations.${resolveId}</li>
<li>ivy.deps.changed.${resolveId}</li>
</ul>

When ivy has finished the resolve task, it outputs a summary of what has been resolved. This summary looks like this:
<pre>
---------------------------------------------------------------------<br class="xooki-br"/>|                  |            modules            ||   artifacts   |<br class="xooki-br"/>|       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>---------------------------------------------------------------------<br class="xooki-br"/>|      default     |   4   |   0   |   0   |   0   ||   4   |   0   |<br class="xooki-br"/>---------------------------------------------------------------------
</pre>
This table gives some statistics about the dependency resolution. Each line correspond to a configuration resolved. Then the table is divided in two parts:
<ul>
<li>modules</li>
<ul>
<li>number</li>
This is the total number of dependency modules resolved in this configuration, including transitive ones
<li>search</li>
This is the number of dependency modules that required a repository access. The repository access is needed if the module is not yet in cache, or if a latest version is required, or in some other cases (depending on checkModified, for instance)
<li>dwnlded</li>
This is the number of dependency ivy files downloaded from the repository. This number can be less than the total number of modules even with a clean cache, if no ivy file is provided for some dependencies.
<li>evicted</li>
This is the number of dependency module evicted by conflict managers.
</ul>
<li>artifacts</li>
<ul>
<li>number</li>
This is the total number of artifacts resolved in the given configuration.
<li>dwnlded</li>
This is the number of artifacts actually downloaded from the repository.
</ul>
</ul>

<span class="since">since 1.4</span> A new inline mode allow to call a resolve without an ivy file, by setting directly the module which should be resolved from the repository. It is particularly useful to install released software, like an ant task for example. When inline is set to true, the organisation module and revision attributes are used to specify which module should be resolved from the repository.<br class="xooki-br"/><br class="xooki-br"/><i>Note for developers:<br class="xooki-br"/>After the call to this task, a reference to the module descriptor resolved is put in the ant project under the id <pre>"ivy.resolved.descriptor"</pre>.</i><br class="xooki-br"/>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>file</td><td>path to the ivy file to use for resolution</td>
        <td>No. Defaults to ${ivy.dep.file} or nothing in inline mode</td></tr>
    <tr><td>conf</td><td>a comma separated list of the configurations to resolve</td><td>No. Defaults to ${ivy.configurations}</td></tr>
    <tr><td>useOrigin</td><td>true to avoid the copy of local artifacts to the cache and use directly their original location, false otherwise <span class="since">since 1.4</span>. <br class="xooki-br"/>To know if an artifact is local ivy asks to the resolver. Only filesystem resolver is considered local by default, but this can be disabled if you want to force the copy on one filesystem resolver and use the original location on another. Note that it is safe to use useOrigin even if you some no local resolvers, Ivy will behave as usual in this case. Note also that this only applies to artifacts, not to ivy files, which are still copied in the cache.</td><td>No. defaults to false</td></tr>
    <tr><td>inline</td><td>true to use inline mode, false to resolve an ivy file <span class="since">since 1.4</span></td><td>No. defaults to false</td></tr>
    <tr><td>organisation</td><td>the organisation of the module to resolve in inline mode <span class="since">since 1.4</span></td><td>Yes in inline mode, no otherwise.</td></tr>
    <tr><td>module</td><td>the name of the module to resolve in inline mode <span class="since">since 1.4</span></td><td>Yes in inline mode, no otherwise.</td></tr>
    <tr><td>revision</td><td>the revision constraint to apply to the module to resolve in inline mode <span class="since">since 1.4</span></td><td>No. Defaults to "latest.integration" in inline mode, nothing in standard mode.</td></tr>
    <tr><td>type</td><td>comma separated list of accepted artifact types (<span class="since">since 1.2</span>)</td><td>No. defaults to ${ivy.resolve.default.type.filter}</td></tr>
    <tr><td>haltonfailure</td><td>true to halt the build on ivy failure, false to continue</td><td>No. Defaults to true</td></tr>
    <tr><td>failureproperty</td><td>the name of the property to set if the resolve failed <span class="since">since 1.4</span></td><td>No. No property is set by default.</td></tr>
    <tr><td>transitive</td><td>true to resolve dependencies transitively, false otherwise <span class="since">since 1.4</span></td><td>No. Defaults to true</td></tr>
    <tr><td>showprogress</td><td>true to show dots while downloading, false otherwise</td><td>No. Defaults to true</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td><td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr>
    <tr><td>resolveId</td><td>An id which can be used later to refer to the results of this resolve <span class="since">(since 2.0)</span></td><td>No, defaults to '[org]-[module]'.</td></tr>
</tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:resolve file="path/to/ivy.xml"/&gt;
</pre>
Resolve all dependencies declared in path/to/ivy.xml file.<br class="xooki-br"/><br class="xooki-br"/><hr/>

<pre>
&lt;ivy:resolve file="path/to/ivy.xml" transitive="false" /&gt;
</pre>
Same as above, but with transitive dependencies disabled.<br class="xooki-br"/><br class="xooki-br"/><hr/>

<pre>
&lt;ivy:resolve file="path/to/ivy.xml" conf="default, test"/&gt;
</pre>
Resolve the dependencies declared in the configuration default and test of the path/to/ivy.xml file.<br class="xooki-br"/><br class="xooki-br"/><hr/>

<pre>
&lt;ivy:resolve file="path/to/ivy.xml" type="jar"/&gt;
</pre>
Resolve all dependencies declared in path/to/ivy.xml file, but download only jar artifacts.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:resolve organisation="apache" module="commons-lang" revision="2+" inline="true" /&gt;
</pre>
Resolve the commons-lang module revision 2+ from the repository, with its dependencies.<br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>retrieve</div><br class="xooki-br"/>The retrieve task copies resolved dependencies anywhere you want in your file system.<br class="xooki-br"/><br class="xooki-br"/>This is a <a href="use/postresolvetask.html">post resolve task</a>, with all the behaviour and attributes common to all post resolve tasks.<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> This task can even be used to synchronize the destination directory with what should actually be in according to the dependency resolution. This means that by setting sync="true", Ivy will not only copy the necessary files, but it will also remove the files which do not need to be there.<br class="xooki-br"/><br class="xooki-br"/>The synchronisation actually consists in deleting all filles and directories in the root destination directory which are not required by the retrieve.<br class="xooki-br"/><br class="xooki-br"/>The root destination directory is the the directory denoted by the first level up the first token in the destination pattern.<br class="xooki-br"/>Example:<br class="xooki-br"/>pattern: lib/[conf]/[artifact].[ext]<br class="xooki-br"/>root: lib<br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.4</span> The behaviour is like this when 'useOrigin=true':
<ul>
<li>if the artifact is not local, the location from within the cache is used</li>
<li>if the artifact is a local artifact, it's original location is used</li>
</ul>
Note that if resolve has been called separately, the copy to the cache may have occur normally if useOrigin was not set when calling <a href="use/resolve.html">resolve</a>. If resolve has not been called, it will be called automatically with useOrigin set to the value specified on this task.<br class="xooki-br"/>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>pattern</td><td>the pattern to use to copy the dependencies</td>
        <td>No. Defaults to ${ivy.retrieve.pattern}</td></tr>
    <tr><td>ivypattern</td><td>the pattern to use to copy the ivy files of dependencies <span class="since">since 1.3</span></td>
        <td>No. Dependencies ivy files are not retrieved by default.</td></tr>
    <tr><td>conf</td><td>a comma separated list of the configurations to retrieve</td>
        <td>No. Defaults to the configurations resolved by the last resolve call, or * if no resolve was explicitly called</td></tr>
    <tr><td>sync</td><td>true to synchronize the destination, false to just make a copy <span class="since">since 1.4</span></td>
        <td>No. Defaults to false</td></tr>
    <tr><td>type</td><td>comma separated list of accepted artifact types <span class="since">since 1.4</span></td>
        <td>No. All artifact types are accepted by default.</td></tr>
    <tr><td>useOrigin</td><td>true to copy artifacts from their original location for local artifacts, false to use only cache locations <span class="since">since 1.4</span></td>
        <td>No. Defaults to false</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr></tbody>
</table>
<h1>Examples</h1>
<pre>
&lt;ivy:retrieve /&gt;
</pre>
Retrieves dependencies using default parameters. This usually retrieves all the dependencies of the last resolve call to a lib directory.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:retrieve pattern="${lib.dir}/[conf]/[artifact].[ext]"/&gt;
</pre>
Retrieves all dependencies of the last resolve call to a lib directory, dependencies being separated in directories named by configuration, each conf directory containing corresponding artifacts without the revision.<br class="xooki-br"/>For instance, if the ivy file declares two configurations default and test, the resulting lib dir could look like this:
<pre>
lib<br class="xooki-br"/>  default<br class="xooki-br"/>    commons-lang.jar<br class="xooki-br"/>    commons-logging.jar<br class="xooki-br"/>  test<br class="xooki-br"/>    junit.jar
</pre>
Note that if a dependency is required in the two configurations, it will be copied in the two directories. The download of the dependency is however only made once at resolve time.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:retrieve pattern="${lib.dir}/[conf]/[artifact].[ext]" sync="true" /&gt;
</pre>
Same as before, but with synchronisation enabled.<br class="xooki-br"/><br class="xooki-br"/>For instance, if the ivy file declares two configurations default and test, the resulting lib dir could look like this:
<pre>
lib<br class="xooki-br"/>  default<br class="xooki-br"/>    commons-lang.jar<br class="xooki-br"/>    commons-logging.jar<br class="xooki-br"/>  test<br class="xooki-br"/>    junit.jar
</pre>
And now suppose commons-logging is no longer part of the dependencies of the default configuration, then a new call to retrieve will result in:
<pre>
lib<br class="xooki-br"/>  default<br class="xooki-br"/>    commons-lang.jar<br class="xooki-br"/>  test<br class="xooki-br"/>    junit.jar
</pre>
With no synchronisation, commons-logging would not have been removed by the call.<br class="xooki-br"/><br class="xooki-br"/><hr/>
<pre>
&lt;ivy:retrieve pattern="${lib.dir}/[type]/[artifact]-[revision].[ext]" conf="runtime"/&gt;
</pre>
Retrieves only the dependencies of the <pre>runtime</pre> configuration in directories named by artifact type. The resulting lib dir could look like this:
<pre>
lib<br class="xooki-br"/>  jar<br class="xooki-br"/>    commons-lang-1.0.jar<br class="xooki-br"/>    looks-1.1.jar<br class="xooki-br"/>  source<br class="xooki-br"/>    looks-1.1.zip
</pre>


<hr/>
<pre>
&lt;ivy:retrieve organisation="foo" module="bar" inline="true" pattern="${my.install.dir}/[artifact].[ext]"/&gt;
</pre>
Resolves and retrieve the latest version of the module bar and its dependencies in the directory pointed by ${my.install.dir}.<br class="xooki-br"/>	<hr/><div class='toc-title toc-title-4'>report</div><br class="xooki-br"/>Generates reports of dependency resolving. One report per configuration is generated, but all reports generated together are hyperlinked one to each other.<br class="xooki-br"/><br class="xooki-br"/>This task should be used only after a call to resolve, even if the call was not done during the same ant build.<br class="xooki-br"/>In fact, this task uses xml report generated by resolve in cache. So if you call resolve on a module for a given configuration, you can call report safely on this module and this configuration as long as you do not clean your ivy cache.<br class="xooki-br"/><br class="xooki-br"/>If you want to have an idea of what reports look like, check this very simple <a href="../samples/jayasoft-ivyrep-example-default.html">example</a>.<br class="xooki-br"/>The task also generates a graphml file which can be loaded with the free <a href="http://www.yworks.com/en/products_yed_about.htm">yEd</a> graph editor.<br class="xooki-br"/>Then following a few <a href="../yed.html">simple steps</a> you can obtain a graph like this <a href="../samples/jayasoft-ivyrep-example-default.jpg">one</a>.<br class="xooki-br"/>
<div class="since">since 1.4</div> If a custom XSL is specified, it's possible to specify additional parameters to the stylesheet.<br class="xooki-br"/>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>todir</td><td>the directory to which reports should be generated</td>
        <td>No, defaults to ${ivy.report.todir}, or execution directory if not defined</td></tr>
    <tr><td>outputpattern</td><td>the generated report names pattern</td>
        <td>No, defaults to ${ivy.report.output.pattern}, or [organisation]-[module]-[conf].[ext] if not defined</td></tr>
    <tr><td>xsl</td><td>true to generate a report (by default html report) using xslt, false otherwise <span class="since">since 1.3</span></td>
        <td>No, defaults to true</td></tr>
    <tr><td>xml</td><td>true to generate a xml report, false otherwise <span class="since">since 1.3</span></td>
        <td>No, defaults to false</td></tr>
    <tr><td>graph</td><td>true to generate graphml files, false otherwise</td>
        <td>No, defaults to true</td></tr>
    <tr><td>dot</td><td>true to generate <a href="http://www.graphviz.org/">graphviz dot</a> files, false otherwise <span class="since">since 1.4</span></td>
        <td>No, defaults to false</td></tr>
    <tr><td>conf</td><td>a comma separated list of the configurations for which a report should be generated</td>
        <td>No. Defaults to the configurations resolved by the last resolve call (during same ant build), or ${ivy.resolved.configurations} if no resolve was called</td></tr>
    <tr><td>organisation</td><td>the name of the organisation of the module for which report should be generated</td>
        <td>No, unless no resolve was called during the build. Defaults to last resolved module organisation.</td></tr>
    <tr><td>module</td><td>the name of the module for which report should be generated</td>
        <td>No, unless no resolve was called during the build. Defaults to last resolved module.</td></tr>
    <tr><td>validate</td><td>true to force ivy files validation against ivy.xsd, false to force no validation</td>
        <td>No. Defaults to default ivy value (as configured in configuration file)</td></tr>
    <tr><td>xslfile</td><td>indicates which xsl file should be used to generate the report</td>
        <td>No, defaults to ivy provided xsl which generates html report</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr></tbody>
</table>

<h1>Examples</h1>
To generate a HTML and graphml report:
<pre>
&lt;report conf="compile" /&gt;
</pre>

<hr/>
To generate a HTML report only:
<pre>
&lt;report conf="compile" graph="false" /&gt;
</pre>

<hr/>
To generate an XML report using a custom stylesheet:
<pre>
&lt;report conf="compile" xslfile="my-custom-stylesheet.xsl" xslext="xml" /&gt;
</pre>

To generate an XML report using a custom stylesheet which needs some parameters:
<pre>
&lt;report conf="compile" xslfile="my-custom-stylesheet.xsl" xslext="xml"&gt;<br class="xooki-br"/>    &lt;param name="param1" expression="value1" /&gt; <br class="xooki-br"/>    &lt;param name="param2" expression="value2" /&gt; <br class="xooki-br"/>&lt;/report&gt;
</pre>

	<hr/><div class='toc-title toc-title-5'>Using yEd to layout report graphs</div><br class="xooki-br"/><a href="http://www.yworks.com/en/products_yed_about.htm">yEd</a> is a free graph editor, benefiting from<br class="xooki-br"/>all the automatic layouts of yFiles. Ivy is able to generate graphs which are readable by yEd.<br class="xooki-br"/><br class="xooki-br"/>The graphs generated by ivy are not layed out (in fact it's why we use yEd), so you have to follow a simple sequence of steps to layout the generated graphs.<br class="xooki-br"/><br class="xooki-br"/><h2>Preparation</h2>
First you have to generate a graphml file. Simply call the report task (see ivy use documentation) for that.<br class="xooki-br"/><br class="xooki-br"/><h2>Step 1: open the graphml file</h2>
Launch yEd editor, and open the graphml file generated by the report task. You should obtain something like this:<br class="xooki-br"/><center>
<img src="images/yed-step1.jpg"/><br/>
</center>

<h2>Step 2: ask yEd to adjust nodes size</h2>
<center>
<img src="images/yed-step2.jpg"/><br/>
<img src="images/yed-step3.jpg"/><br/>
<img src="images/yed-step3-2.jpg"/><br/>
</center>

<h2>Step 3: ask yEd to layout nodes</h2>
<center>
<img src="images/yed-step4.jpg"/><br/>
<img src="images/yed-step5.jpg"/><br/>
<img src="images/yed-step6.jpg"/><br/>

That's all, you should have obtained something like this:<br class="xooki-br"/><br class="xooki-br"/><img src="images/yed-step7.jpg"/><br/>

Note that this is only one possibility, test the available layouts yourself, you could find one better in your case.<br class="xooki-br"/>Once you have layed out the graph, you can either save it with in the same file (but be warned that it will be overwritten at next ivy report call), or another file, export it to jpg, gif, svg, etc. (see <a href="http://www.yworks.com/en/products_yed_about.htm">yEd</a> site for details).<br class="xooki-br"/></center>


	<hr/><div class='toc-title toc-title-4'>settings</div><br class="xooki-br"/><span class="since">(since 2.0)</span>

The settings declaration is used to configure ivy with an xml settings file.<br class="xooki-br"/><br class="xooki-br"/>See <a href="configuration.html">Settings Files</a> for details about the settings file itself.<br/><br/>

Multiple settings can be defined in a build script.  Every task can reference its own settings.<br class="xooki-br"/><br class="xooki-br"/>All Ivy variables set during the settings are available in the Ant project as long as they were not set in Ant before (Ant properties are immutable). <br class="xooki-br"/>Moreover, the variables are exposed under two names: the variable name, and the variable name suffixed by dot + the settings id (if any). <br class="xooki-br"/>For instance, if you load a settings with the id 'myid', and define a variable my.variable=my.value in the Ivy settings, both my.variable and my.variable.myid will now be available as properties in Ant and equal to 'my.value'. If you later load another settings with the id 'yourid', and in this settings assign the variable 'my.variable' the value 'your.value', in the Ant project you will have:
<pre>
my.variable=my.value<br class="xooki-br"/>my.variable.myid=my.value<br class="xooki-br"/>my.variable.yourid=your.value
</pre>

<h2>Attributes</h2>
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>id</td><td>The settings id useable in the refId attributes of the ivy task that needs a setting.  Note that the ivy tasks will search by default for the settings with the id "ivy.instance".</td><td>Yes</td></tr>
    <tr><td>file</td><td>path to the settings file to use</td>
        <td rowspan="2">No. If a file is provided, url is ignored. If none are provided, then it attempts to find a file at ${ivy.settings.file}, and if this file does not exist, it uses a <a href="../tutorial/defaultconf.html">default settings file</a></td></tr>
    <tr><td>url</td><td>url of the settings file to use</td></tr>
    <tr><td>host</td><td>http authentication host</td><td rowspan="4">No, unless authentication is required</td></tr>
    <tr><td>realm</td><td>http authentication realm</td></tr>
    <tr><td>username</td><td>http authentication user name</td></tr>
    <tr><td>passwd</td><td>http authentication password</td></tr>
</tbody>
</table>
<h2>HTTP Authentication</h2>
<i>Note: HTTP Authentication can be used only if <a href="http://jakarta.apache.org/commons/httpclient/">commons-httpclient.jar</a> is in your classpath</i><br class="xooki-br"/>If any of the url you use in ivy (especially in dependency resolvers) need http<br class="xooki-br"/>authentication, then you have to provide the host, realm, username and passwd<br class="xooki-br"/>attributes of the configure task. These settings will then be used in any<br class="xooki-br"/>further call to ivy tasks.<br/><br/>

<h2>Multiple classloader</h2>
A special attention should be applied when you have a multi-project build with <i>subant</i> call, using ivy task loaded by a <i>typedef</i>.  Indeed in this situation, it is possible to pass settings reference to a subbuild.  When you do that, you should take of the classloader.  The ivy task of your subant should not be defined in a different classloader than the parent one.  This can be achieved by using the <i>loader</i> parameter of the antlib declaration, or avoid to reload the ivy antlib in the subbuild (place the taskdef in a target only executed when the antlib is not yet loaded).<br/><br/>


<h2>Examples</h2>
<h3>Simplest settings</h3>
<pre>&lt;ivy:settings id="ivy.instance"/&gt;</pre>
Use either ${ivy.settings.file} if it exists, or the <a href="../samples/ivysettings-default.xml">default settings file</a><br>
This simplest setting is implicit.<br class="xooki-br"/><h3>Configure with a file</h3>
<pre>&lt;ivy:settings id="ivy.instance" file="mysettings.xml" /&gt;</pre>
<h3>Configure with an url</h3>
<pre>&lt;ivy:settings id="ivy.instance" url="<a href="http://mysite.com/mysettings.xml">http://mysite.com/mysettings.xml</a>" /&gt;</pre>
<h3>Configure multiple URLs which require autentication</h3>
<pre>
&lt;ivy:settings id="authenticated.settings" file="path/to/my/ivysettings.xml"&gt;<br class="xooki-br"/>  &lt;credentials host="myhost.com" realm="My Realm" username="myuser" passwd="mypasswd" /&gt;<br class="xooki-br"/>  &lt;credentials host="yourhost.com" realm="Your Realm" username="myuser" passwd="myotherpasswd" /&gt;<br class="xooki-br"/>&lt;/ivy:configure&gt; 
</pre>
<h3>Configure 2 different settings</h3>
You can use multiple ivy settings during a build.  In that case, every ivy task has specify the settings that it mmust use.
<pre>
 &lt;ivy:settings id="ivy.normal.settings" file="normal_settings.xml" /&gt;<br class="xooki-br"/> &lt;ivy:settings id="ivy.release.settings" file="release_settings.xml" /&gt;
</pre>
<hr/><div class='toc-title toc-title-4'>var</div><br class="xooki-br"/>Sets a variable (by name and value), or set of variables (from file or url) in ivy. <br/>
Variables are case sensitive.<br/><br/>
Contrary to ant properties, ivy variables are mutable. But a problem with this is that you do not control when <br class="xooki-br"/>variables are substituted, and usually it is done as soon as possible. So changing the value of a variable will<br class="xooki-br"/>have no effect if it has already been substituted. Consequently, <b>using this task is NOT recommended</b>.<br class="xooki-br"/>See <a href="../reference.html">reference</a> page for details about ivy variables.<br class="xooki-br"/><br/><br/>
  
<table class="ant">
<thead>
    <tr><th class="ant-att">Attribute</th><th class="ant-desc">Description</th><th class="ant-req">Required</th></tr>
</thead>
<tbody>
    <tr><td>name</td><td>the name of the variable to set</td>
        <td>No</td></tr>
    <tr><td>value</td><td>the value of the variable to set</td>
        <td>Yes when using the name attribute</td></tr>
    <tr><td>file</td><td>the filename of the property file to load as ivy variables</td>
        <td rowspan="2">One of these, when <b>not</b> using the name attribute</td></tr>
    <tr><td>url</td><td>the url from which to read ivy variables</td></tr>
    <tr><td>prefix</td><td>Prefix to apply to variables. A "." is appended to the prefix if not specified.</td>
        <td>No</td></tr>
    <tr><td>settingsRef</td><td>A reference to the ivy settings that must be used by this task <span class="since">(since 2.0)</span></td><td>No, 'ivy.instance' is taken by default.</td></tr>
</tbody>
</table>

	<hr/><div class='toc-title toc-title-3'>Using standalone</div><br class="xooki-br"/>In the case you want to call ivy as a standalone program (outside from ant), you have to put commons-cli 1.0 and its dependencies in your classpath.<br class="xooki-br"/><br class="xooki-br"/>Then here is how to call it:
<pre>
java org.apache.ivy.Main -?
</pre>
It will indicate you what can be given as argument. <br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/><span class="since">since 1.3</span> System properties are included as ivy variables, so you can easily define an ivy variable like this:
<pre>
java -Dmyivyvar=myvalue org.apache.ivy.Main [parameters]
</pre>


<h1>Examples</h1>
<pre>
java org.apache.ivy.Main
</pre>
calls ivy with default configuration using ivy.xml in the current dir<br class="xooki-br"/><hr/>
<pre>
java org.apache.ivy.Main -conf path/to/myivysettings.xml -ivy path/to/myivy.xml
</pre>
calls ivy with given ivysettings file using given ivy file<br class="xooki-br"/><hr/>
<span class="since">since 1.3</span>
<pre>
java org.apache.ivy.Main -conf path/to/myivysettings.xml -dependency apache commons-lang 2.0
</pre>
calls ivy with given ivysettings file and resolve apache commons-lang 2.0. <br class="xooki-br"/><br class="xooki-br"/>This is equivalent to:
<pre>
java org.apache.ivy.Main -conf path/to/myivysettings.xml -ivy ivy.xml
</pre>
with ivy.xml like this:
<pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>  &lt;info organisation="org"<br class="xooki-br"/>       module="standalone"<br class="xooki-br"/>       revision="working"<br class="xooki-br"/>   /&gt;<br class="xooki-br"/>  &lt;dependencies&gt;<br class="xooki-br"/>    &lt;dependency org="apache" name="commons-lang" rev="2.0" conf="default-&gt;*"/&gt;<br class="xooki-br"/>  &lt;/dependencies&gt;<br class="xooki-br"/>&lt;/ivy-module&gt;
</pre>
<hr/>
<span class="since">since 1.3</span>
<pre>
java org.apache.ivy.Main -conf path/to/myivysettings.xml -ivy path/to/myivy.xml -cachepath mycachefile.txt
</pre>
calls ivy with given ivysettings file and resolve the dependencies found in the given ivy file, and then output the classpath of resolved artifacts in cache in a file. This file can then be used to define a classpath corresponding to all the resolved dependencies for any java program. <br class="xooki-br"/><br class="xooki-br"/><hr/>
<span class="since">since 1.4</span>
<pre>
java org.apache.ivy.Main -conf path/to/myivysettings.xml -dependency bar foo 2.0 -main org.bar.foo.FooMain
</pre>
calls ivy with given ivysettings file and resolve bar foo 2.0, and then run org.foo.FooMain class with the resolved artifacts as classpath<br class="xooki-br"/><br class="xooki-br"/><br class="xooki-br"/>	<hr/><div class='toc-title toc-title-2'>Developer doc</div><br class="xooki-br"/><h1>Building from source</h1>
To build Ivy from source it's really easy. <br class="xooki-br"/><h2>Requirements</h2>
All you need is 
<ul>
<li>an <a href="http://subversion.tigris.org/">svn</a> client</li>
<em>to check out Ivy sources from apache svn, not required if you build from sources packaged in a release</em>
<li><a href="http://ant.apache.org/">Apache Ant</a> 1.6.2 or greater</li>
<em>We recommend either ant 1.6.5 or 1.7.0</em>
<li><a href="http://junit.org">junit</a> 3.8.2 jar in your ant lib</li>
<em> this is not required if you use ant 1.7</em>
<li>a <a href="http://java.sun.com/">jdk</a> 1.4 or greater</li>
<em>Build instructions have been successfully tested with sun jdk 1.4.2, 1.5.0 and 1.6.0</em>
</ul>

<h2>Procedure</h2>
<h3>Get the source</h3>
You can either get the sources from a release, or get them directly from svn. For instance, to get the trunk version:
<pre>
svn co <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk">https://svn.apache.org/repos/asf/incubator/ivy/core/trunk</a> ivy
</pre>
<h3>Build</h3>
Go to the directory where you get the Ivy sources (you should see a file named build.xml) and run:
<pre>
ant
</pre>
<h3>Check the result</h3>
The ant build will download Ivy if you don't already have a proper version in your home, compile, and run tests with coverage metrics.<br class="xooki-br"/>If everything goes well, you should see the message
<pre>
BUILD SUCCESSFUL
</pre>
Then you can check the test results in the build/doc/reports/test directory, the jars are in build/artifacts, and the test coverage report in build/doc/reports/coverage<br class="xooki-br"/><h1>Coding conventions</h1>
The Ivy code base is supposed to follow the standard java conventions:<br class="xooki-br"/><a href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html">http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html</a><br class="xooki-br"/><br class="xooki-br"/>This is a work in progress though (see <a href="http://issues.apache.org/jira/browse/IVY-511">IVY-511</a>), but patches helping migration to these conventions are welcome.<br class="xooki-br"/><br class="xooki-br"/><h1>Developing with eclipse</h1>
Even though you can develop Ivy with your IDE of choice, we support eclipse development by providing ad hoc metadata.<br class="xooki-br"/><br class="xooki-br"/>We currently provide two options:<br class="xooki-br"/><h2>Eclipse alone</h2>
To develop with a simple eclipse install all you need is eclipse 3.1 or greater, with no particular plugin.<br class="xooki-br"/>First call the following ant target in your Ivy workspace:
<pre>
ant eclipse-default
</pre>
This will resolve the dependencies of Ivy and produce a .classpath using the resolved jars for the build path.<br class="xooki-br"/>Then you can use the "Import->Existing project into workspace" eclipse feature to import the Ivy project in your workspace.<br class="xooki-br"/><h2>Eclipse + IvyDE</h2>
You can also leverage the latest IvyDE version to be able to easily resolve the ivy dependencies from Eclipse.<br class="xooki-br"/>To do so all you need is call the following ant target in your Ivy workspace:
<pre>
ant eclipse-ivyde
</pre>
or if you don't have ant installed you can simply copy the file .classpath.ivyde and rename it to .classpath<br class="xooki-br"/>Then you can import the project using "Import->Existing project into workspace" as long as you already have latest IvyDE installed.<br class="xooki-br"/><br class="xooki-br"/>To install latest IvyDE version compatible with the latest Ivy used to resolve Ivy dependencies, you will need to use a snapshot build, not endorsed by the ASF, available here:<br class="xooki-br"/><a href="http://people.apache.org/~xavier/ivyde/snapshot/">http://people.apache.org/~xavier/ivyde/snapshot/</a><br class="xooki-br"/><br class="xooki-br"/>Download the file and unzip its content in your eclipse installation directory.<br class="xooki-br"/><br class="xooki-br"/><h1>Making a release</h1>
<h2>Requirements</h2>
Requirements for making a release are similar to the requirements for building from source, except that sun jdk 1.6 and ant 1.7 are required.<br class="xooki-br"/><h2>Procedure</h2>
<h3>1. Check the files which needs to be updated for the release.</h3>
On the trunk, check that files which require update for the release are up to date.<br class="xooki-br"/>This includes particularly:<br class="xooki-br"/>RELEASE_NOTES<br class="xooki-br"/>CHANGES<br class="xooki-br"/>README<br class="xooki-br"/><h3>2. Create a release branch</h3>
This will allow to work separately from other developers, in case you need any last modification.
<pre>
svn copy <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/trunk">https://svn.apache.org/repos/asf/incubator/ivy/core/trunk</a> \<br class="xooki-br"/>           <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/branches/2.0.0-alpha1">https://svn.apache.org/repos/asf/incubator/ivy/core/branches/2.0.0-alpha1</a> \<br class="xooki-br"/>      -m "Creating a release branch for 2.0.0-alpha1."
</pre>
<h3>3. Check out the branch</h3>
<pre>
svn co <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/branches/2.0.0-alpha1">https://svn.apache.org/repos/asf/incubator/ivy/core/branches/2.0.0-alpha1</a> ivy-2.0.0-alpha1
</pre>
<h3>4. Double check the files which need to be updated for the release.</h3>
Check again that files have proper revision information.<br class="xooki-br"/>It's also time to update the documentation template files which will be used for doc generation to include the version information in the page title.<br class="xooki-br"/>For instance in
<pre>
doc/homeTemplate.html<br class="xooki-br"/>doc/template.html<br class="xooki-br"/>doc/printTemplate.html
</pre>
replace
<pre>
&lt;title&gt;${title} | Ivy&lt;/title&gt;
</pre>
by
<pre>
&lt;title&gt;${title} | Ivy 2.0.0-alpha1-incubating&lt;/title&gt;
</pre>
<h3>5. Commit your changes</h3>
<pre>
svn ci -m "update templates for 2.0.0-alpha-1 release."
</pre>
<h3>6. Check that you have no pending modifications</h3>
<pre>
svn status
</pre>
If your working copy is clean, you can launch the release script. If it isn't, make sure to clean it properly. Sometimes you may need to call ant clean-all if you have started to work with ant builds. If you are confused about your working copy state, delete it and check it out again.<br class="xooki-br"/><h3>7. Launch the release script</h3>
<pre>
ant -Dbuild.version=2.0.0-alpha1-incubating -Dstatus=milestone -f build-release.xml release
</pre>
The status should be release only for final releases, and milestone for any other intermediate release.<br class="xooki-br"/>If anything is wrong, fix and go back to step 4.<br class="xooki-br"/>If the release script is successful, release artifacts will be waiting for you in the build/distrib directory.<br class="xooki-br"/><h3>8. Verify the release</h3>
Check that all zips can be opened correctly, and that running 'ant' after unzipping the source distribution works properly.<br class="xooki-br"/>You can also do a smoke test with the generated ivy.jar , to see if it is able to resolve properly a basic module (for instance you can replace the jar you have in your ~/.ivy/jars directory, clean your cache, and run 'ant clean jar'.<br class="xooki-br"/><h3>9. Sign and upload the artifacts</h3>
You will still need to sign the release artifacts and upload them to a location accessible by other Apache commiters<br class="xooki-br"/><h3>10. Cast a vote to approve the release</h3>
Cast a vote to approve the release, first on the ivy-dev mailing list, then if it is approved, on the general@incubator.apache.org mailing list<br class="xooki-br"/><h3>11. Tag the svn repository</h3>
Now that the release is approved, it is time to tag the svn repo
<pre>
svn copy <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/branches/2.0.0-alpha1">https://svn.apache.org/repos/asf/incubator/ivy/core/branches/2.0.0-alpha1</a> \<br class="xooki-br"/>           <a href="https://svn.apache.org/repos/asf/incubator/ivy/core/tags/2.0.0-alpha1">https://svn.apache.org/repos/asf/incubator/ivy/core/tags/2.0.0-alpha1</a> \<br class="xooki-br"/>      -m "Tag release 2.0.0-alpha1."
</pre>
<h3>12. Upload to public repository</h3>
If the release is approved, it's now time to make it public by uploading it to the public Apache distrib repository (i.e. /www/people.apache.org/dist/incubator/ivy/[version] on people.a.o).<br class="xooki-br"/><br class="xooki-br"/><h3>13. Announce</h3>
Announce the release on the ivy-dev and ivy-user mailing lists, on the general@i.a.o list, announce@apache.org and on the user@ant.apache.org.<br class="xooki-br"/>Announce also the release on Ivy web site by editing the doc/index.html on the trunk.<br class="xooki-br"/>You can also announce the release on popular web sites, like freshmeat.net (xavier is the owner of the Ivy project on freshmeat), javalobby.org, theserverside.com, dzone.com, ...<br class="xooki-br"/><h3>14. Update this doc</h3>
If you feel like anything is missing or misleading in this release doc, update it as soon as you encounter the problem.<br class="xooki-br"/><h3>15. Merge your modifications back to the trunk if necessary.</h3>
Modifications on the template files do not need to be merged, but if you had troubles during your release you may want to merge your fixes back to the trunk.<br class="xooki-br"/><h3>16. Prepare next release</h3>
Update the file version.properties with the version of the next release so that anyone building from the trunk will obtain jar with the correct version number.<hr/><div class='toc-title toc-title-3'>Extending Ivy</div><br class="xooki-br"/>Many things are configurable in ivy, and many things are available with ivy core. But when you want to do <br class="xooki-br"/>something not built in ivy core, you can still plug your own code.<br/><br/>

Several things are pluggable in ivy:
<ul>
<li>module descriptor parsers</li>
<li>dependency resolvers</li>
<li>latest strategies</li>
<li>conflict managers</li>
<li>report outputters</li>
<li>version matchers</li>
<li>triggers</li>
</ul>

Before trying to implement your own, we encourage you to check if the solution to your problem cannot be <br class="xooki-br"/>addressed by existing features, or by contributed ones. Do not hesitate to ask for help on the mailing-lists.<br/><br/>

If you still don't find what you need, then you'll have to develop your own plugin or find someone who could do that for you.<br/><br/>

Here are the main things to know if you want to develop your own plugins...<br/><br/>

All ivy plug-ins use the same code patterns as ant specific tasks for parameters. This means that<br class="xooki-br"/>if you want to have a "myattribute" of type String, you just have to declare a method called<br class="xooki-br"/>setMyattribute(String val) on your plug-in. The same applies to child tags, you just have to follow ant specifications.<br/><br/>

Knowing that, you then have to implement the appropriate interface:
<ul>
<li>org.apache.ivy.DependencyResolver for dependency resolvers</li>
<li>org.apache.ivy.LatestStrategy for latest strategies</li>
<li>org.apache.ivy.ConflictManager for conflict managers</li>
<li>org.apache.ivy.parser.ModuleDescriptorParser for module descriptor parsers</li>
</ul>

To help you understand what is required in each implementation, and what you can use to do it, have a look to existing implementations, it's the best advice we can give you!<br class="xooki-br"/><br class="xooki-br"/>	
 		</div><!-- main -->

<div id="footer-message" class="footer">
    <hr />
    <i>Copyright &#169; 2010 The Apache Software Foundation, Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.txt">Apache License, Version 2.0</a>.</i><br />
    <i>Apache Ivy, Apache Ant, Ivy, Ant, Apache, the Apache Ivy logo, the Apache Ant logo and the Apache feather logo are trademarks of The Apache Software Foundation.</i><br />
    <i>All other marks mentioned may be trademarks or registered trademarks of their respective owners. </i>
</div>

</div><!-- body -->
</body>
</html>
