<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->
<html>
<head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
    <script type="text/javascript">var xookiConfig = {level: 2};</script>   
    

  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>menugenerator</title>
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <link rel="stylesheet" type="text/css" href="../../../../style/style.css" media="screen"/>
  <!-- for tree, see if it would better go in xooki.js -->
  <link rel="stylesheet" type="text/css" href="../../../../style/tree.css" />
  <script src="../../../../js/jquery.pack.js" type="text/javascript"></script>
  <script src="../../../../js/jquery.treeview.js" type="text/javascript"></script>
  <script type="text/javascript">
  $(document).ready(function(){$("#treemenu").Treeview({speed: "fast",store: true});});
  </script>

<script language="javascript" type="text/javascript">xooki = {u: function(url) {return "../../../../xooki/"+url;}};</script>
</head>
<body>
<div id="header">
    <div id="incubatorlogo">
	<img src="../../../../images/apache-incubator-logo.png"/>
    </div>    
    <div id="topmenu">
        <ul>
            <li><a href="../../../../index.html" id="topmenu1" accesskey="1" title="">Home</a></li>
            <li><a href="../../../../contact.html" id="topmenu2" accesskey="2" title="">Get involved</a></li>
        </ul>
    </div>
</div>
<!-- end #header -->
<div id="menu">
    <ul>
        <li class="first"><a href="../../../../index.html" accesskey="1" title="">Home</a></li>
        <li><a href="../../../../download.html" accesskey="1" title="">Download</a></li>
        <li><a href="http://www.apache.org/licenses/" title="">License</a></li>
        <li><a href="../../../../history/trunk/tutorials.html" title="">Tutorials</a></li>
        <li><a href="../../../../history/trunk/reference.html" title="">References</a></li>
    </ul>
</div>
<!-- end #menu -->
<div id="content">
    <div id="sidebar" class="boxed">
        <h2 class="title">Apache EasyAnt&#153;</h2>
        <div id="links">
                <ul id="treemenu" class="treeview"><li id="xooki-index" class="submenu"><a href="../../../../index.html" >Home</a><ul class="closed"><li id="xooki-features"><a href="../../../../features.html" >Features</a></li><li id="xooki-license"><a href="http://www.apache.org/licenses/" >License</a></li><li id="xooki-faq"><a href="../../../../faq.html" >FAQ</a></li></ul></li><li id="xooki-download"><a href="../../../../download.html" >Download</a></li><li id="xooki-history" class="submenu">History<ul class="open"><li id="xooki-history/trunk/index" class="submenu"><a href="../../../../history/trunk/index.html" >Trunk</a><ul class="open"><li id="xooki-history/trunk/tutorials" class="submenu"><a href="../../../../history/trunk/tutorials.html" >Tutorials</a><ul class="closed"><li id="xooki-history/trunk/howto/GettingStarted"><a href="../../../../history/trunk/howto/GettingStarted.html" >Getting Started</a></li><li id="xooki-history/trunk/howto/SettingupasimpleEasyAntproject"><a href="../../../../history/trunk/howto/SettingupasimpleEasyAntproject.html" >Setting up a simple EasyAnt Project</a></li><li id="xooki-history/trunk/howto/writePlugins"><a href="../../../../history/trunk/howto/writePlugins.html" >Writing plugins</a></li><li id="xooki-history/trunk/howto/skeleton"><a href="../../../../history/trunk/howto/skeleton.html" >Working with skeletons of project</a></li><li id="xooki-history/trunk/howto/multimodules"><a href="../../../../history/trunk/howto/multimodules.html" >Working with multi-modules</a></li><li id="xooki-history/trunk/howto/BuildConfigurations"><a href="../../../../history/trunk/howto/BuildConfigurations.html" >Build configurations</a></li></ul></li><li id="xooki-history/trunk/reference" class="submenu"><a href="../../../../history/trunk/reference.html" >Reference</a><ul class="open"><li id="xooki-history/trunk/ref/features"><a href="../../../../history/trunk/ref/features.html" >Features</a></li><li id="xooki-history/trunk/ref/Defaultlifecycle"><a href="../../../../history/trunk/ref/Defaultlifecycle.html" >Default lifecycle</a></li><li id="xooki-history/trunk/ref/Directorystructure"><a href="../../../../history/trunk/ref/Directorystructure.html" >Directory structure</a></li><li id="xooki-history/trunk/ref/Modulefiles"><a href="../../../../history/trunk/ref/Modulefiles.html" >Module files</a></li><li id="xooki-history/trunk/ref/ProjectMancommand"><a href="../../../../history/trunk/ref/ProjectMancommand.html" >ProjectMan commands</a></li><li id="xooki-history/trunk/ref/phases"><a href="../../../../history/trunk/ref/phases.html" >Understanding phases</a></li><li id="xooki-history/trunk/ref/anttasks" class="submenu"><a href="../../../../history/trunk/ref/anttasks.html" >Ant Tasks</a><ul class="open"><li id="xooki-history/trunk/ref/anttasks/BindTarget"><a href="../../../../history/trunk/ref/anttasks/BindTarget.html" >bindtarget</a></li><li id="xooki-history/trunk/ref/anttasks/checkresolver"><a href="../../../../history/trunk/ref/anttasks/checkresolver.html" >checkresolver</a></li><li id="xooki-history/trunk/ref/anttasks/CoreVersiontask"><a href="../../../../history/trunk/ref/anttasks/CoreVersiontask.html" >core-version</a></li><li id="xooki-history/trunk/ref/anttasks/easyant"><a href="../../../../history/trunk/ref/anttasks/easyant.html" >easyant</a></li><li id="xooki-history/trunk/ref/anttasks/findclasspath" class="submenu"><a href="../../../../history/trunk/ref/anttasks/findclasspath.html" >findclasspath</a><ul class="closed"><li id="xooki-history/trunk/ref/anttasks/findclasspath/basic-configuration-strategy"><a href="../../../../history/trunk/ref/anttasks/findclasspath/basic-configuration-strategy.html" >basic-configuration-strategy</a></li><li id="xooki-history/trunk/ref/anttasks/findclasspath/environment-strategy"><a href="../../../../history/trunk/ref/anttasks/findclasspath/environment-strategy.html" >environment-strategy</a></li><li id="xooki-history/trunk/ref/anttasks/findclasspath/project-dependency-strategy"><a href="../../../../history/trunk/ref/anttasks/findclasspath/project-dependency-strategy.html" >project-dependency-strategy</a></li></ul></li><li id="xooki-history/trunk/ref/anttasks/Importtask" class="submenu"><a href="../../../../history/trunk/ref/anttasks/Importtask.html" >import</a><ul class="closed"><li id="xooki-history/trunk/ref/anttasks/plugintask"><a href="../../../../history/trunk/ref/anttasks/plugintask.html" >plugin task</a></li><li id="xooki-history/trunk/ref/anttasks/buildtypetask"><a href="../../../../history/trunk/ref/anttasks/buildtypetask.html" >buildtype task</a></li></ul></li><li id="xooki-history/trunk/ref/anttasks/menugenerator"><a href="../../../../history/trunk/ref/anttasks/menugenerator.html" class="current">menugenerator</a></li><li id="xooki-history/trunk/ref/anttasks/LoadModuletask"><a href="../../../../history/trunk/ref/anttasks/LoadModuletask.html" >loadmodule</a></li><li id="xooki-history/trunk/ref/anttasks/Parametertask"><a href="../../../../history/trunk/ref/anttasks/Parametertask.html" >parameter</a></li><li id="xooki-history/trunk/ref/anttasks/Pathtask"><a href="../../../../history/trunk/ref/anttasks/Pathtask.html" >path</a></li><li id="xooki-history/trunk/ref/anttasks/Property"><a href="../../../../history/trunk/ref/anttasks/Property.html" >property</a></li><li id="xooki-history/trunk/ref/anttasks/registerartifact"><a href="../../../../history/trunk/ref/anttasks/registerartifact.html" >registerartifact</a></li><li id="xooki-history/trunk/ref/anttasks/SubModuletask"><a href="../../../../history/trunk/ref/anttasks/SubModuletask.html" >submodule</a></li></ul></li><li id="xooki-history/trunk/ref/buildtypes/buildtypes"><a href="../../../../history/trunk/ref/buildtypes/buildtypes.html" >Build Types</a></li><li id="xooki-history/trunk/ref/plugins/plugins"><a href="../../../../history/trunk/ref/plugins/plugins.html" >Plugins</a></li><li id="xooki-history/trunk/ref/EasyAntconfigurationfile"><a href="../../../../history/trunk/ref/EasyAntconfigurationfile.html" >EasyAnt configuration file</a></li><li id="xooki-history/trunk/ref/ProjectIvyInstance"><a href="../../../../history/trunk/ref/ProjectIvyInstance.html" >Project Ivy Instance</a></li></ul></li><li id="xooki-history/trunk/changelog" class="submenu"><a href="../../../../history/trunk/changelog.html" >Changelog</a><ul class="closed"><li id="xooki-history/trunk/changelog/0.7"><a href="../../../../history/trunk/changelog/0.7.html" >0.7</a></li></ul></li><li id="xooki-history/trunk/faq"><a href="../../../../history/trunk/faq.html" >FAQ</a></li><li id="xooki-history/trunk/contact"><a href="../../../../history/trunk/contact.html" >Contact</a></li></ul></li></ul></li><li id="xooki-contact" class="submenu"><a href="../../../../contact.html" >Get Involved</a><ul class="closed"><li id="xooki-Mailinglist"><a href="../../../../Mailinglist.html" >Mailing list</a></li><li id="xooki-Issuetracking"><a href="../../../../Issuetracking.html" >Issue tracking</a></li><li id="xooki-Sourcerepository"><a href="../../../../Sourcerepository.html" >Source repository</a></li><li id="xooki-irc"><a href="../../../../irc.html" >IRC</a></li></ul></li><li id="xooki-Team"><a href="../../../../Team.html" >Team</a></li><li id="xooki-foundation" class="submenu"><a href="../../../../foundation.html" >Foundation</a><ul class="closed"><li id="xooki-undefined"><a href="http://www.apache.org" >ASF</a></li><li id="xooki-undefined"><a href="http://www.apache.org/foundation/sponsorship.html" >Sponsorship</a></li><li id="xooki-undefined"><a href="http://www.apache.org/foundation/thanks.html" >Thanks</a></li></ul></li></ul>
        </div>
    </div>

    <div id="posts">
        <br class="xooki-br"/><h1>menugenerator task</h1>

<h2>What is a menu generator ?</h2>

A menu generator is supposed to generate menu. It provides some methods to write menu entries in a given menu file.<br class="xooki-br"/><br class="xooki-br"/><h2>Writing your own menugenerator</h2>
To write your own menu generator you must write a java class implementing the org.apache.easyant.core.menu.MenuGenerator interface.<br class="xooki-br"/>This interface allow you to implements the logic to generate menu entries in a menu file.<br class="xooki-br"/><br class="xooki-br"/>When you're own implementation is ready you'll need to register it in easyant this is done through a menu generator registry.<br class="xooki-br"/><br class="xooki-br"/><h2>What is a menu generator registry ?</h2>
A menu generator registry is used to reference all the menu generator for a given context.<br class="xooki-br"/>As explained before a menu generator is supposed to generate menu entries in one given file.<br class="xooki-br"/>But maybe in a project we can have multiple menu files.<br class="xooki-br"/>Let's take the example of easyant documentation, we have a root menu and we also have submenus for plugins and buildtypes.<br class="xooki-br"/>So behind we have three different files :
<ul>
  <li>the root menu</li>
  <li>submenu for plugins</li>
  <li>submenu for buildtypes</li>

How can we handle this with easyant ?<br class="xooki-br"/>The answer is by using context.<br class="xooki-br"/><br class="xooki-br"/>We can ask easyant to manage a registry by context (if not specified the default context will be "default").<br class="xooki-br"/>Plugins can register their menugenerator implementation is the registry for a given context.<br class="xooki-br"/><br class="xooki-br"/><h2>Registering a menugenerator</h2>

The syntax looks like this
<pre>
&lt;ea:registermenugenerator classname="org.mycompany.menugenerators.MyOwnMenuGenerator" file="my.file" context="root"/&gt;
</pre>

The <b>registermenugenerator</b> task support classpath and classpathref attribute.
<pre>
&lt;ea:registermenugenerator classname="org.mycompany.menugenerators.MyOwnMenuGenerator" file="my.file" context="root" classpathref="my.classpath"/&gt;
</pre>

It also support nested classpath
<pre>
&lt;ea:registermenugenerator classname="org.mycompany.menugenerators.MyOwnMenuGenerator" file="my.file" context="root"&gt;<br class="xooki-br"/>     &lt;classpath&gt;<br class="xooki-br"/>          &lt;fileset dir="/path/to/directory" incluse="**/*.jar"/&gt;<br class="xooki-br"/>     &lt;/classpath&gt;<br class="xooki-br"/>&lt;/ea:registermenugenerator&gt;
</pre>
So get back to our example talking about easyant documentation to understand the meaning of context.<br class="xooki-br"/>We have three files so we need to register three menugenerators in different context.<br class="xooki-br"/>Here we consider that i only uses Xooki as a documentation layer.<br class="xooki-br"/>So the xooki plugins should do :
<pre>
&lt;ea:registermenugenerator classname="org.mycompany.menugenerators.XookiMenuGenerator" file="${basedir}/toc.json" context="root"/&gt;<br class="xooki-br"/>&lt;ea:registermenugenerator classname="org.mycompany.menugenerators.XookiMenuGenerator" file="/path/to/plugins/toc.json" context="plugins"/&gt;<br class="xooki-br"/>&lt;ea:registermenugenerator classname="org.mycompany.menugenerators.XookiMenuGenerator" file="/path/to/buildtypes/toc.json" context="buildtypes"/&gt;
</pre>
Here we've registered the same implementation for three different context.<br class="xooki-br"/><br class="xooki-br"/>We will now play with menu entries<br class="xooki-br"/><br class="xooki-br"/><h2>Adding a simple menu entry</h2>

The syntax looks like this :
<pre>
&lt;ea:addmenuentry context="test" title="mytitle" targetlink="foobar"/&gt;
</pre>
The title is the label of the link in the menu. The target link means is a URL(can be relative).<br class="xooki-br"/>The context similar as the one in <ea:registermenugenerator> task.<br class="xooki-br"/><br class="xooki-br"/>What happens behind ?<br class="xooki-br"/>EasyAnt will retrieve the right registry for this context, loop and all registered menu generator implementation, and process the generation of the link.<br class="xooki-br"/><br class="xooki-br"/>This task also supported nested <menuentry> elements.<br class="xooki-br"/><br class="xooki-br"/><h2>Adding a multiple menu entries</h2>
<pre>
&lt;ea:addmenuentry context="test"&gt;<br class="xooki-br"/>    &lt;ea:menuentry title="foo" targetlink="bar"/&gt;<br class="xooki-br"/>    &lt;ea:menuentry title="bla" targetlink="plop"/&gt;<br class="xooki-br"/>    &lt;ea:menuentry title="test" targetlink="test"/&gt;<br class="xooki-br"/>&lt;/ea:addmenuentry&gt;
</pre>

    </div>
    <!-- end #posts -->
    <!-- end #links -->
    <div style="clear: both;">&nbsp;</div>
</div>
<!-- end #content -->
<div id="footer">
    <p id="legal">
        <i>Copyright &#169; 2011 The Apache Software Foundation, Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.txt">Apache License, Version 2.0</a>.</i><br>
        <i>Apache EasyAnt, Apache Ivy, Apache Ant, Ivy, Ant, Apache, the Apache Ivy logo, the Apache Ant logo and the Apache feather logo are trademarks of The Apache Software Foundation.</i><br>
        <i>All other marks mentioned may be trademarks or registered trademarks of their respective owners. </i>
    </p>
</div>
<!-- end #footer -->
</body>
</html>
