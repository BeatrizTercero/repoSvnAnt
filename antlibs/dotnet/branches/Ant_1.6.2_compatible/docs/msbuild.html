<html>
  <head>
    <meta http-equiv="Content-Language" content="en-us"></meta>
    <title>MSBuild Task</title>
  </head>

  <body>
    <h2><a name="dotnetexec">MSBuild</a></h2>

    <h3>Description</h3>

    <p>Runs the MSBuild build tool of Microsoft's .NET framework
    2.0.</p>

    <p>Unlike the nant task, this task doesn't support nested build
    files.  MSBuild requires a certain default namespace and there is
    no easy way to write an XML file of that type within Ant 1.6.x -
    without repeating code that is already present in Ant 1.7 or some
    ugly hacks, that is.  Use the Ant 1.7+ version of this antlib and
    Ant 1.7+ if you want nested build file snippets, alternatively use
    the echo task to write the build file (see example below).</p>

    <p>If you don't specify a build file, MSBuild's default build file
    search algorithm will apply.</p>

    <h3>Parameters</h3>
    <table border="1" cellpadding="2" cellspacing="0">
      <tr>
        <td valign="top"><b>Attribute</b></td>
        <td valign="top"><b>Description</b></td>
        <td align="center" valign="top"><b>Required</b></td>
      </tr>
      <tr>
        <td valign="top">buildfile</td>
        <td valign="top">External build file to invoke MSBuild on.</td>
        <td align="center">No.</td>
      </tr>
      <tr>
        <td valign="top">vm</td>
        <td valign="top">Same as <a
            href="dotnetexec.html">dotnetexec</a>'s vm attribute.
          Specify the framework to use.</td>
        <td align="center">No.</td>
      </tr>
    </table>

    <h3>Parameters specified as nested elements</h3>
    <h4>target</h4>

    <p><code>target</code> has a single required attribute name -
    specifies a target to be run.</p>

    <h4>property</h4>

    <p><code>property</code> has two required attributes.  name and
    value that specify name and value of a property that is to be
    defined in the MSBuild invocation.</p>

    <h3>Examples</h3>

    <p>Let MSBuild search for a *.proj file in the (Ant) project's base
    directory and execute the default target in it:</p>

    <pre>&lt;msbuild/&gt;</pre>
    
    <p>Let MSBuild execute the targets named foo and bar in the build
    file msbuild.proj in Ant's basedir and pass the property
    <code>/property:test=testvalue</code> to it:</p>

    <pre>
      &lt;msbuild buildfile="msbuild.proj"&gt;
        &lt;target name="foo"/&gt;
        &lt;target name="bar"/&gt;
        &lt;property name="test" value="testvalue"/&gt;
      &lt;/msbuild&gt;
    </pre>

    <p>Define a build file embeded into an Ant build file, let MSBuild
    execute the echo target of that build file.</p>

    <pre>
      &lt;tempfile property="ms.proj" suffix=".proj"/&gt;
      &lt;echo file="${ms.proj}"&gt;&lt;![CDATA[
        &lt;Project DefaultTargets="echo" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"&gt;
          &lt;Target Name="echo"&gt;
            &lt;Message Text="This is MSBuild"/&gt;
          &lt;/Target&gt;
        &lt;/Project&gt;]]&gt;&lt;/echo&gt;
      &lt;msbuild buildfile="${ms.proj}"
        xmlns="antlib:org.apache.ant.dotnet"
        /&gt;
      &lt;delete file="${ms.proj}"/&gt;
    </pre>

    <hr/>
      <p align="center">Copyright &copy; 2003-2005 The Apache Software Foundation. All rights Reserved.</p>
  </body>
</html>