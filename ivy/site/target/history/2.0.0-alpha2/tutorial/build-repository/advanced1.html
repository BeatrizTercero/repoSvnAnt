<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!--
   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.    
-->
<html>
<head>
	<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1">
	<script type="text/javascript">var xookiConfig = {level: 2};</script>	
	

<title>Advanced repository - step 1 | Apache Ivy&#153;</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="../../style/style.css" />
  <script src="../../js/jquery.pack.js" type="text/javascript"></script>
  <script src="../../js/jquery.treeview.js" type="text/javascript"></script>
  <script type="text/javascript">
  $(document).ready(function(){$("#treemenu").Treeview({speed: "fast",store: true});});
  </script>

<script language="javascript" type="text/javascript">xooki = {u: function(url) {return "../../xooki/"+url;}};</script>
</head>
<body>

<div id="body">
<table id="header" summary="Navigation elements." border="0"
	cellpadding="0" cellspacing="0" width="100%">
	<tr>
		<td id="home" width="30%"><a href="http://ant.apache.org/"
			title="Apache Ant"><img src="../../images/ant-group-logo.gif" alt="Apache Ant"
			border="0" /></a></td>

		<td class="product" width="70%" align="right" valign="middle"><img
			src="../../images/logo.png" alt="ivy" border="0" /></td>
	</tr>
</table>

<table id="top-menu" summary="Navigation elements." border="0"
	cellpadding="0" cellspacing="0" width="100%">
	<tr>
		<td>

        <div style="float:right;margin: 0 10px;">
        <!-- Google CSE Search Box Begins -->
  <form id="searchbox_014292259695392975429:5y6qypnrni8" action="http://ant.apache.org/ivy/search.html">
    <input type="hidden" name="cx" value="014292259695392975429:5y6qypnrni8" />
    <input type="hidden" name="cof" value="FORID:11" />
    <input name="q" type="text" size="30" />
    <input type="submit" name="sa" value="Search" />
  </form>
  <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=searchbox_014292259695392975429%3A5y6qypnrni8"></script>
<!-- Google CSE Search Box Ends -->
        </div>

		<div id="navcontainer">
		<a href="http://ant.apache.org/">Apache Ant</a> &gt; <a href="http://ant.apache.org/ivy/">Ivy</a> &gt; <a href="http://ant.apache.org/ivy/history.html">History</a> &gt; <span class="breadCrumb"><a href="../../index.html" >Documentation (2.0.0-alpha2)</a> &gt; <a href="../../tutorial.html" >Tutorials</a> &gt; <a href="../../tutorial/build-repository.html" >Building a repository</a> &gt; <a href="../../tutorial/build-repository/advanced1.html" class="current">Advanced repository - step 1</a></span>
		</div>
		</td>
	</tr>

</table>

<table id="content" border="0" cellpadding="0" cellspacing="0"
	width="100%">
	<tr>
		<td id="sidebar-left">
		<div class="block block-book" id="block-book-0">
		<h2>Apache Ivy&#153;</h2>

		<div class="content"><ul id="treemenu" class="treeview"><li id="xooki-index" class="submenu"><a href="../../index.html" >Documentation (2.0.0-alpha2)</a><ul class="open"><li id="xooki-release-notes"><a href="../../release-notes.html" >Release Notes</a></li><li id="xooki-tutorial" class="submenu"><a href="../../tutorial.html" >Tutorials</a><ul class="open"><li id="xooki-tutorial/start"><a href="../../tutorial/start.html" >Quick Start</a></li><li id="xooki-tutorial/ivyrep"><a href="../../tutorial/ivyrep.html" >Using IvyRep</a></li><li id="xooki-tutorial/defaultconf"><a href="../../tutorial/defaultconf.html" >Adjusting default settings</a></li><li id="xooki-tutorial/multiple"><a href="../../tutorial/multiple.html" >Multiple Resolvers</a></li><li id="xooki-tutorial/dual"><a href="../../tutorial/dual.html" >Dual Resolver</a></li><li id="xooki-tutorial/multi-project"><a href="../../tutorial/multi-project.html" >Project dependencies</a></li><li id="xooki-tutorial/multiproject"><a href="../../tutorial/multiproject.html" >Using Ivy in multiple projects environment</a></li><li id="xooki-tutorial/conf"><a href="../../tutorial/conf.html" >Using Ivy Configurations</a></li><li id="xooki-tutorial/build-repository" class="submenu"><a href="../../tutorial/build-repository.html" >Building a repository</a><ul class="open"><li id="xooki-tutorial/build-repository/basic"><a href="../../tutorial/build-repository/basic.html" >Basic repository replication</a></li><li id="xooki-tutorial/build-repository/advanced1"><a href="../../tutorial/build-repository/advanced1.html" class="current">Advanced repository - step 1</a></li><li id="xooki-tutorial/build-repository/advanced2"><a href="../../tutorial/build-repository/advanced2.html" >Advanced repository - step 2</a></li></ul></li><li id="xooki-moreexamples"><a href="../../moreexamples.html" >More examples</a></li></ul></li><li id="xooki-reference" class="submenu"><a href="../../reference.html" >Reference</a><ul class="closed"><li id="xooki-intro" class="submenu">Introduction<ul class="closed"><li id="xooki-terminology"><a href="../../terminology.html" >Terminology</a></li><li id="xooki-concept"><a href="../../concept.html" >Main Concepts</a></li><li id="xooki-principle"><a href="../../principle.html" >How does it work ?</a></li><li id="xooki-bestpractices"><a href="../../bestpractices.html" >Best practices</a></li><li id="xooki-install"><a href="../../install.html" >Installation</a></li></ul></li><li id="xooki-configuration" class="submenu"><a href="../../configuration.html" >Settings Files</a><ul class="closed"><li id="xooki-configuration/property"><a href="../../configuration/property.html" >property</a></li><li id="xooki-configuration/properties"><a href="../../configuration/properties.html" >properties</a></li><li id="xooki-configuration/conf"><a href="../../configuration/conf.html" >settings</a></li><li id="xooki-configuration/include"><a href="../../configuration/include.html" >include</a></li><li id="xooki-configuration/classpath"><a href="../../configuration/classpath.html" >classpath</a></li><li id="xooki-configuration/typedef"><a href="../../configuration/typedef.html" >typedef</a></li><li id="xooki-configuration/latest-strategies"><a href="../../configuration/latest-strategies.html" >latest-strategies</a></li><li id="xooki-configuration/parsers"><a href="../../configuration/parsers.html" >parsers</a></li><li id="xooki-configuration/namespaces" class="submenu"><a href="../../configuration/namespaces.html" >namespaces</a><ul class="closed"><li id="xooki-configuration/namespace" class="submenu"><a href="../../configuration/namespace.html" >namespace</a><ul class="closed"><li id="xooki-configuration/namespace/rule" class="submenu"><a href="../../configuration/namespace/rule.html" >rule</a><ul class="closed"><li id="xooki-configuration/namespace/fromtosystem" class="submenu"><a href="../../configuration/namespace/fromtosystem.html" >fromsystem / tosystem</a><ul class="closed"><li id="xooki-configuration/namespace/src"><a href="../../configuration/namespace/src.html" >src</a></li><li id="xooki-configuration/namespace/dest"><a href="../../configuration/namespace/dest.html" >dest</a></li></ul></li></ul></li></ul></li></ul></li><li id="xooki-configuration/macrodef" class="submenu"><a href="../../configuration/macrodef.html" >macrodef</a><ul class="closed"><li id="xooki-configuration/macrodef/attribute"><a href="../../configuration/macrodef/attribute.html" >attribute</a></li></ul></li><li id="xooki-configuration/resolvers" class="submenu"><a href="../../configuration/resolvers.html" >resolvers</a><ul class="closed"><li id="xooki-resolver/ivyrep"><a href="../../resolver/ivyrep.html" >IvyRep Resolver</a></li><li id="xooki-resolver/ibiblio"><a href="../../resolver/ibiblio.html" >IBiblio Resolver</a></li><li id="xooki-resolver/filesystem"><a href="../../resolver/filesystem.html" >File System resolver</a></li><li id="xooki-resolver/url"><a href="../../resolver/url.html" >Url Resolver</a></li><li id="xooki-resolver/chain"><a href="../../resolver/chain.html" >Chain Resolver</a></li><li id="xooki-resolver/dual"><a href="../../resolver/dual.html" >Dual resolver</a></li><li id="xooki-resolver/sftp"><a href="../../resolver/sftp.html" >sftp resolver</a></li><li id="xooki-resolver/ssh"><a href="../../resolver/ssh.html" >ssh resolver</a></li><li id="xooki-resolver/vfs"><a href="../../resolver/vfs.html" >vfs</a></li></ul></li><li id="xooki-configuration/conflict-managers"><a href="../../configuration/conflict-managers.html" >conflict-managers</a></li><li id="xooki-configuration/modules" class="submenu"><a href="../../configuration/modules.html" >modules</a><ul class="closed"><li id="xooki-configuration/module"><a href="../../configuration/module.html" >module</a></li></ul></li><li id="xooki-configuration/outputters"><a href="../../configuration/outputters.html" >outputters</a></li><li id="xooki-configuration/statuses" class="submenu"><a href="../../configuration/statuses.html" >statuses</a><ul class="closed"><li id="xooki-configuration/status"><a href="../../configuration/status.html" >status</a></li></ul></li><li id="xooki-configuration/triggers"><a href="../../configuration/triggers.html" >triggers</a></li><li id="xooki-configuration/version-matchers"><a href="../../configuration/version-matchers.html" >version-matchers</a></li></ul></li><li id="xooki-ivyfile" class="submenu"><a href="../../ivyfile.html" >Ivy Files</a><ul class="closed"><li id="xooki-ivyfile/info" class="submenu"><a href="../../ivyfile/info.html" >info</a><ul class="closed"><li id="xooki-ivyfile/license"><a href="../../ivyfile/license.html" >license</a></li><li id="xooki-ivyfile/ivyauthor"><a href="../../ivyfile/ivyauthor.html" >ivyauthor</a></li><li id="xooki-ivyfile/repository"><a href="../../ivyfile/repository.html" >repository</a></li><li id="xooki-ivyfile/description"><a href="../../ivyfile/description.html" >description</a></li></ul></li><li id="xooki-ivyfile/configurations" class="submenu"><a href="../../ivyfile/configurations.html" >configurations</a><ul class="closed"><li id="xooki-ivyfile/conf"><a href="../../ivyfile/conf.html" >conf</a></li><li id="xooki-ivyfile/include"><a href="../../ivyfile/include.html" >include</a></li></ul></li><li id="xooki-ivyfile/publications" class="submenu"><a href="../../ivyfile/publications.html" >publications</a><ul class="closed"><li id="xooki-ivyfile/artifact" class="submenu"><a href="../../ivyfile/artifact.html" >artifact</a><ul class="closed"><li id="xooki-ivyfile/artifact-conf"><a href="../../ivyfile/artifact-conf.html" >conf</a></li></ul></li></ul></li><li id="xooki-ivyfile/dependencies" class="submenu"><a href="../../ivyfile/dependencies.html" >dependencies</a><ul class="closed"><li id="xooki-ivyfile/dependency" class="submenu"><a href="../../ivyfile/dependency.html" >dependency</a><ul class="closed"><li id="xooki-ivyfile/dependency-conf" class="submenu"><a href="../../ivyfile/dependency-conf.html" >conf</a><ul class="closed"><li id="xooki-ivyfile/mapped"><a href="../../ivyfile/mapped.html" >mapped</a></li></ul></li><li id="xooki-ivyfile/dependency-artifact" class="submenu"><a href="../../ivyfile/dependency-artifact.html" >artifact</a><ul class="closed"><li id="xooki-ivyfile/dependency-artifact-conf"><a href="../../ivyfile/dependency-artifact-conf.html" >conf</a></li></ul></li><li id="xooki-ivyfile/artifact-exclude" class="submenu"><a href="../../ivyfile/artifact-exclude.html" >exclude</a><ul class="closed"><li id="xooki-ivyfile/artifact-exclude-conf"><a href="../../ivyfile/artifact-exclude-conf.html" >conf</a></li></ul></li><li id="xooki-ivyfile/dependency-include" class="submenu"><a href="../../ivyfile/dependency-include.html" >include</a><ul class="closed"><li id="xooki-ivyfile/dependency-include-conf"><a href="../../ivyfile/dependency-include-conf.html" >conf</a></li></ul></li></ul></li><li id="xooki-ivyfile/exclude"><a href="../../ivyfile/exclude.html" >exclude</a></li></ul></li><li id="xooki-ivyfile/conflicts" class="submenu"><a href="../../ivyfile/conflicts.html" >conflicts</a><ul class="closed"><li id="xooki-ivyfile/manager"><a href="../../ivyfile/manager.html" >manager</a></li></ul></li></ul></li><li id="xooki-ant" class="submenu"><a href="../../ant.html" >Using from Ant</a><ul class="closed"><li id="xooki-use/artifactproperty"><a href="../../use/artifactproperty.html" >artifactproperty</a></li><li id="xooki-use/artifactreport"><a href="../../use/artifactreport.html" >artifactreport</a></li><li id="xooki-use/buildlist"><a href="../../use/buildlist.html" >buildlist</a></li><li id="xooki-use/buildnumber"><a href="../../use/buildnumber.html" >buildnumber</a></li><li id="xooki-use/cachefileset"><a href="../../use/cachefileset.html" >cachefileset</a></li><li id="xooki-use/cachepath"><a href="../../use/cachepath.html" >cachepath</a></li><li id="xooki-use/cleancache"><a href="../../use/cleancache.html" >cleancache</a></li><li id="xooki-use/configure"><a href="../../use/configure.html" >configure</a></li><li id="xooki-use/deliver"><a href="../../use/deliver.html" >deliver</a></li><li id="xooki-use/findrevision"><a href="../../use/findrevision.html" >findrevision</a></li><li id="xooki-use/info"><a href="../../use/info.html" >info</a></li><li id="xooki-use/install"><a href="../../use/install.html" >install</a></li><li id="xooki-use/listmodules"><a href="../../use/listmodules.html" >listmodules</a></li><li id="xooki-use/postresolvetask"><a href="../../use/postresolvetask.html" >post resolve tasks</a></li><li id="xooki-use/publish"><a href="../../use/publish.html" >publish</a></li><li id="xooki-use/repreport"><a href="../../use/repreport.html" >repreport</a></li><li id="xooki-use/resolve"><a href="../../use/resolve.html" >resolve</a></li><li id="xooki-use/retrieve"><a href="../../use/retrieve.html" >retrieve</a></li><li id="xooki-use/report" class="submenu"><a href="../../use/report.html" >report</a><ul class="closed"><li id="xooki-yed"><a href="../../yed.html" >Using yEd to layout report graphs</a></li></ul></li><li id="xooki-use/settings"><a href="../../use/settings.html" >settings</a></li><li id="xooki-use/var"><a href="../../use/var.html" >var</a></li></ul></li><li id="xooki-standalone"><a href="../../standalone.html" >Using standalone</a></li></ul></li><li id="xooki-dev" class="submenu"><a href="../../dev.html" >Developer doc</a><ul class="closed"><li id="xooki-extend"><a href="../../extend.html" >Extending Ivy</a></li></ul></li></ul></li></ul></div>

		<center><iframe src="http://www.apache.org/ads/buttonbar.html"
                         style="border-width:0;" frameborder="0" scrolling="no"
                         width="135" height="265"></iframe>
                </center>
                
		</div>

		</td>
		
		<td valign="top">
		<div id="main">

		<h1 class="title">Advanced repository - step 1</h1>
            <br class="xooki-br"/><h1>On the road to a professional repository</h1>
We will study in this section how to build a <strong>professionnal</strong> repository. What is a <strong>professionnal</strong> repository? Our vision is to say that a good quality repository must follow clear rules about projects naming and must offer corrects, usuables, configurables and verified project descriptors. In order to achieve those goals, we think that you have to build your own repository.<br class="xooki-br"/>We have seen in the previous example, that we could use some public repositories to begin to build our own repository. <br class="xooki-br"/>Nevertheless, the result is not at all the one that was expected. Indeed there is a problem with public repositories: their partial incompatibility.<br class="xooki-br"/>For example, in <a href="http://ivyrep.jayasoft.org">ivyrep</a> all commons-* projects belong to the apache organisation. In both ibiblio versions, it is not the case. The same problem could appear for other projects with other repositories, it is not the debate here.<br class="xooki-br"/><br class="xooki-br"/>To resolve some of the incompatibilities, we will use a feature introduced in ivy 1.3: <a href="../../configuration/namespaces.html">namespaces</a>.<br class="xooki-br"/><br class="xooki-br"/><h1>Using namespaces</h1>
In order to use namespaces, we first need to see what's happening when none are used on repositories that do not fit our needs.<br class="xooki-br"/>Let's take commons-lang 1.0 from ibiblio with a maven2 pom.<br class="xooki-br"/>First clean your cache and repository.
<div class="shell"><pre>Z:\ivy-repository>ant clean-cache clean-repo</pre></div>
Then call the good ant target : ant commons-lang-1-0-ibiblio-no-namespace
<div class="shell"><pre>Z:\ivy-repository>ant commons-lang-1-0-ibiblio-no-namespace<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>init-advanced:<br class="xooki-br"/>:: Ivy 20060125070719 - 20060125070719 :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>:: configuring :: file = Z:\ivy-repository\ivy-conf-advanced.xml<br class="xooki-br"/><br class="xooki-br"/>commons-lang-1-0-ibiblio-no-namespace:<br class="xooki-br"/>:: installing [ commons-lang | commons-lang | 1.0 ] ::<br class="xooki-br"/>:: resolving dependencies ::<br class="xooki-br"/>        found [ commons-lang | commons-lang | 1.0 ] in ibiblio-maven2-nonamespace<br class="xooki-br"/>        found [ junit | junit | 3.7 ] in ibiblio-maven2-nonamespace<br class="xooki-br"/>:: downloading artifacts to cache ::<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar">http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar</a> ...<br class="xooki-br"/>.............. (62kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ commons-lang | commons-lang | 1.0 ]/commons-lang.jar[jar] (1313ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar">http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar</a> ...<br class="xooki-br"/>.............<br class="xooki-br"/>.............. (114kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ junit | junit | 3.7 ]/junit.jar[jar] (2360ms)<br class="xooki-br"/>:: installing in local-repository ::<br class="xooki-br"/>        published commons-lang to Z:\ivy-repository/ivy-local-repository/commons-lang/commons-lang/jars/commons-lang-1.0.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/commons-lang/commons-lang/ivys/ivy-1.0.xml<br class="xooki-br"/>        published junit to Z:\ivy-repository/ivy-local-repository/junit/junit/jars/junit-3.7.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/junit/junit/ivys/ivy-3.7.xml<br class="xooki-br"/>:: install resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   2   |   2   |   2   |   0   ||   2   |   2   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 6 seconds<br class="xooki-br"/>Z:\ivy-repository></pre></div>
If we take a look at the repository, we can see that we respect the ibiblio maven2 architecture, the organisation apache does not appear.
<div class="shell"><pre>Z:\ivy-repository>dir /s /B /A:-D ivy-local-repository<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\commons-lang\commons-lang\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\commons-lang\commons-lang\jars\commons-lang-1.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\ivys\ivy-3.7.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\jars\junit-3.7.jar</pre></div>
If you take a look at the ivy descriptor for commons-lang, you will see that the organisation is still commons-lang. It could not be another thing as we did not do anything for it.
<div><pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>	&lt;info organisation="commons-lang"<br class="xooki-br"/>		module="commons-lang"<br class="xooki-br"/>		revision="1.0"<br class="xooki-br"/>		status="integration"<br class="xooki-br"/>		publication="20051124062021"<br class="xooki-br"/>	/&gt;
</pre></div>

<h2>Introduction to namespaces</h2>
Let's see directly the result, we will have some explanations after.<br class="xooki-br"/>Clean your repo and cache, and call : ant commons-lang-1-0-ibiblio-with-namespace
<div class="shell"><pre>Z:\ivy-repository>ant commons-lang-1-0-ibiblio-with-namespace<br class="xooki-br"/>Buildfile: build.xml<br class="xooki-br"/><br class="xooki-br"/>init-advanced:<br class="xooki-br"/>:: Ivy non official version :: <a href="http://ivy.jayasoft.org/">http://ivy.jayasoft.org/</a> ::<br class="xooki-br"/>:: configuring :: file = Z:\ivy-repository\ivy-conf-advanced.xml<br class="xooki-br"/><br class="xooki-br"/>commons-lang-1-0-ibiblio-with-namespace:<br class="xooki-br"/>:: installing [ apache | commons-lang | 1.0 ] ::<br class="xooki-br"/>:: resolving dependencies ::<br class="xooki-br"/>        found [ apache | commons-lang | 1.0 ] in ibiblio-maven2<br class="xooki-br"/>        found [ junit | junit | 3.7 ] in ibiblio-maven2<br class="xooki-br"/>:: downloading artifacts to cache ::<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar">http://www.ibiblio.org/maven2/commons-lang/commons-lang/1.0/commons-lang-1.0.jar</a> ...<br class="xooki-br"/>............. (62kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ apache | commons-lang | 1.0 ]/commons-lang.jar[jar] (1094ms)<br class="xooki-br"/>downloading <a href="http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar">http://www.ibiblio.org/maven2/junit/junit/3.7/junit-3.7.jar</a> ...<br class="xooki-br"/>............................ (114kB)<br class="xooki-br"/>        [SUCCESSFUL ] [ junit | junit | 3.7 ]/junit.jar[jar] (1641ms)<br class="xooki-br"/>:: installing in local-repository ::<br class="xooki-br"/>        published commons-lang to Z:\ivy-repository/ivy-local-repository/apache/commons-lang/jars/commons-lang-1.0.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/apache/commons-lang/ivys/ivy-1.0.xml<br class="xooki-br"/>        published junit to Z:\ivy-repository/ivy-local-repository/junit/junit/jars/junit-3.7.jar<br class="xooki-br"/>        published ivy to Z:\ivy-repository/ivy-local-repository/junit/junit/ivys/ivy-3.7.xml<br class="xooki-br"/>:: install resolution report ::<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |                  |            modules            ||   artifacts   |<br class="xooki-br"/>        |       conf       | number| search|dwnlded|evicted|| number|dwnlded|<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/>        |      default     |   2   |   2   |   2   |   0   ||   2   |   2   |<br class="xooki-br"/>        ---------------------------------------------------------------------<br class="xooki-br"/><br class="xooki-br"/>BUILD SUCCESSFUL<br class="xooki-br"/>Total time: 5 seconds</pre></div>
Now if we look at our repository, it seems to look fine.
<div class="shell"><pre>Z:\ivy-repository>dir /s /B /A:-D ivy-local-repository<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\ivys\ivy-1.0.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\apache\commons-lang\jars\commons-lang-1.0.jar<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\ivys\ivy-3.7.xml<br class="xooki-br"/>Z:\ivy-repository\ivy-local-repository\junit\junit\jars\junit-3.7.jar</pre></div>
Have a look at the ivy file to see it it looks better than before. Ok, we have now our apache organisation.
<div><pre>
&lt;ivy-module version="1.0"&gt;<br class="xooki-br"/>	&lt;info organisation="apache"<br class="xooki-br"/>		module="commons-lang"<br class="xooki-br"/>		revision="1.0"<br class="xooki-br"/>		status="integration"<br class="xooki-br"/>		publication="20051124062021"<br class="xooki-br"/>	/&gt;
</pre></div>
<h2>How does this work ?</h2>
If we look at the ant target commons-lang-1-0-ibiblio-with-namespace, we can see that it uses a resolver called ibiblio-maven2. <br class="xooki-br"/>Let's find it... The configuration file used for this test is ivysettings-advanced.xml. This one includes ivy-maven2-ivysettings.xml where the required resolver is defined.<br class="xooki-br"/>Let's see it's definition :
<pre>&lt;ibiblio	name="ibiblio-maven2" <br class="xooki-br"/>                root="${ibiblio-maven2-root}" <br class="xooki-br"/>                pattern="${ibiblio-maven2-pattern}"<br class="xooki-br"/>                m2compatible="true"<br class="xooki-br"/>                namespace="ibiblio-maven2"<br class="xooki-br"/>/&gt;</pre>Ok, i see it, it is a ibiblio resolver for which we specify the root and the pattern. The important things here are the 2 other parameters.
<ul><li><b>m2compatible</b> is a flag telling that we allow reading POMs file and make some transformations on URLs regarding the organisation name. Indeed, maven transforms organisations like "org.apache" into "some_url/org/apache" to retrieve information on ibiblio repositories.</li>
<li><b>namespace</b> this attribute defines a domain in which same projects (meaning organsiation, module or revision) can be named whith differents kinds.</li></ul>

A namespace is defined by a set of rule, for ibiblio-maven2, we have declared some rules:<br class="xooki-br"/><h3>rule handling imported apache maven1 projects</h3>
<pre>&lt;rule&gt;	&lt;!-- imported apache maven1 projects --&gt;<br class="xooki-br"/>	&lt;fromsystem&gt;<br class="xooki-br"/>	    &lt;src org="apache" module=".+"/&gt;<br class="xooki-br"/>	    <br class="xooki-br"/>	    &lt;dest org="$m0" module="$m0"/&gt;<br class="xooki-br"/>	&lt;/fromsystem&gt;<br class="xooki-br"/>	&lt;tosystem&gt;<br class="xooki-br"/>	    &lt;src org="commons-.+" module="commons-.+" /&gt;<br class="xooki-br"/>	    &lt;src org="ant.*" module="ant.*" /&gt;<br class="xooki-br"/>	    ...<br class="xooki-br"/>	    &lt;src org="xmlrpc" module="xmlrpc" /&gt;<br class="xooki-br"/><br class="xooki-br"/>	    &lt;dest org="apache" module="$m0"/&gt;<br class="xooki-br"/>	&lt;/tosystem&gt;<br class="xooki-br"/>&lt;/rule&gt;</pre>
<div class="postit"><u>Note about regular expressions usage :</u>
In order to distinguish matching regular expressions found in organisation, module & revision the notation used prefixes the matching regular expression with the letters 'o', 'm' & 'r'.<br class="xooki-br"/>$o0 : the whole regular expression term in the organisation attribute<br class="xooki-br"/>$o1 : the first matching expression term that was marked in the organisation attribute<br class="xooki-br"/>...<br class="xooki-br"/>The same applies for modules : $m0, $m1, ...<br class="xooki-br"/>and for revisions : $r0, $r1, ...
</div>
<ul>
<li><b>fromsystem :</b> we define here that the projects defined in the system under the organisation called "apache" are transformed into the destination namespace (whose resolver it applies) into projects whose organisation is named with the module name, we don't care here about the revision. For example, the project ['apache', 'commons-lang', '1.0'] in the namespace system will be translated into ['commons-lang', 'commons-lang', '1.0'] in the ibiblio-maven2 resolver namespace.</li>
<li><b>tosystem :</b> we define here the reverse mapping, ie how to translate <em>apache</em> projects from ibiblio into real apache projects in the namespace system. The rule here, is telling that all projects matching commons-.+ (see it as java regular expression) for their organisation name and module name are transformed into projects whose organisation is apache with the module name as it was found. The same kind of rule is applied for others apache projects like ant, etc. For example, ['ant','ant','1.6.2'] in ibiblio-maven2 namespace will become ['apache','ant','1.6.2'] int the system namespace.</li>
</ul>
<h3>rule handling new apache projects</h3>
<pre>&lt;rule&gt; &lt;!-- new apache projects --&gt;<br class="xooki-br"/>    &lt;fromsystem&gt;<br class="xooki-br"/>        &lt;src org="apache" /&gt;<br class="xooki-br"/>        &lt;dest org="org.apache"/&gt;<br class="xooki-br"/>    &lt;/fromsystem&gt;<br class="xooki-br"/>    &lt;tosystem&gt;<br class="xooki-br"/>        &lt;src org="org.apache" /&gt;<br class="xooki-br"/>        &lt;dest org="apache" /&gt;<br class="xooki-br"/>    &lt;/tosystem&gt;<br class="xooki-br"/>&lt;/rule&gt;</pre>
The mapping adds or removes the package 'org' before the organisation name to conform to maven2 choices.<br class="xooki-br"/>	
 		</div><!-- main -->
		</td>
	</tr>
</table>

<table id="footer-menu" summary="Navigation elements." border="0"
	cellpadding="0" cellspacing="0" width="100%">
	<tr>
		<td align="center" valign="middle">
		<div class="primary-links">:: 
			<a href="../../index.html">Home</a> ::
			<a href="../../download.html">Download</a> ::
			<a href="../../history/latest-milestone/index.html">Documentation</a> ::
			<a href="../../get-involved.html">Get Involved</a> ::
			<a href="../../search.html">Search</a> ::
		</div>
		</td>
	</tr>
</table>

<div id="footer-message" class="footer">
    <hr />
    <i>Copyright &#169; 2010 The Apache Software Foundation, Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0.txt">Apache License, Version 2.0</a>.</i><br />
    <i>Apache Ivy, Apache Ant, Ivy, Ant, Apache, the Apache Ivy logo, the Apache Ant logo and the Apache feather logo are trademarks of The Apache Software Foundation.</i><br />
    <i>All other marks mentioned may be trademarks or registered trademarks of their respective owners. </i>
</div>

</div><!-- body -->
</body>
</html>
